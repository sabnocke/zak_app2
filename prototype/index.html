<html lang="cs"><head><style>
  @import url(https://fonts.googleapis.com/css?family=Google+Sans+Text);
  html {
    font-family: 'Google Sans Text', 'Google Sans';
    font-size: 14px;
    color-scheme: light dark;
    background: light-dark(white, black);
    color: light-dark(black, white);
  }
</style>

<script type="importmap">{"imports":{"@modelcontextprotocol/sdk/":"https://aistudiocdn.com/@modelcontextprotocol/sdk/dist/esm/","https://aistudiocdn.com/@modelcontextprotocol/sdk@^1.11.0/es2022/":"https://aistudiocdn.com/@modelcontextprotocol/sdk@^1.11.0/es2022/dist/esm/","https://aistudiocdn.com/@modelcontextprotocol/sdk@^1.11.0/client/index?target=es2022":"https://aistudiocdn.com/@modelcontextprotocol/sdk@^1.11.0/dist/esm/client/index?target=es2022","https://aistudiocdn.com/@modelcontextprotocol/sdk@^1.11.0/types?target=es2022":"https://aistudiocdn.com/@modelcontextprotocol/sdk@^1.11.0/dist/esm/types?target=es2022","react-dom/":"https://aistudiocdn.com/react-dom@^19.2.0/","react/":"https://aistudiocdn.com/react@^19.2.0/","react":"https://aistudiocdn.com/react@^19.2.0","@google/genai":"https://aistudiocdn.com/@google/genai@^1.29.0","@/index":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20vY2xpZW50JzsKaW1wb3J0IEFwcCBmcm9tICdAL0FwcCc7CmNvbnN0IHJvb3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKTsKaWYgKCFyb290RWxlbWVudCkgewogICAgdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgZmluZCByb290IGVsZW1lbnQgdG8gbW91bnQgdG8iKTsKfQpjb25zdCByb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChyb290RWxlbWVudCk7CnJvb3QucmVuZGVyKF9qc3goUmVhY3QuU3RyaWN0TW9kZSwgeyBjaGlsZHJlbjogX2pzeChBcHAsIHt9KSB9KSk7Cg==","@":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20vY2xpZW50JzsKaW1wb3J0IEFwcCBmcm9tICdAL0FwcCc7CmNvbnN0IHJvb3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKTsKaWYgKCFyb290RWxlbWVudCkgewogICAgdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgZmluZCByb290IGVsZW1lbnQgdG8gbW91bnQgdG8iKTsKfQpjb25zdCByb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChyb290RWxlbWVudCk7CnJvb3QucmVuZGVyKF9qc3goUmVhY3QuU3RyaWN0TW9kZSwgeyBjaGlsZHJlbjogX2pzeChBcHAsIHt9KSB9KSk7Cg==","@/App":"data:application/javascript;base64,aW1wb3J0IHsganN4cyBhcyBfanN4cywganN4IGFzIF9qc3gsIEZyYWdtZW50IGFzIF9GcmFnbWVudCB9IGZyb20gInJlYWN0L2pzeC1ydW50aW1lIjsKaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBFTVBMT1lFRVMgfSBmcm9tICdAL2NvbnN0YW50cyc7CmltcG9ydCB7IEJyaWVmY2FzZUljb24sIFVzZXJJY29uLCBDbG9ja0ljb24sIFRyYXNoSWNvbiwgUGVuY2lsSWNvbiwgQ2hlY2tDaXJjbGVJY29uLCBLZXlJY29uLCBMb2dvdXRJY29uLCBDaGFydEJhckljb24sIENhc2hJY29uLCBBcmNoaXZlQm94SWNvbiwgRm9sZGVySWNvbiwgRG9jdW1lbnRUZXh0SWNvbiwgQWxlcnRUcmlhbmdsZUljb24sIENvZ0ljb24sIEdpZnRJY29uLCBDYWxjdWxhdG9ySWNvbiwgQ2FsZW5kYXJEYXlzSWNvbiwgUHJlc2VudGF0aW9uQ2hhcnRCYXJJY29uLCBVc2VyUGx1c0ljb24sIFBhdXNlSWNvbiwgUGxheUljb24sIFN1bkljb24sIEZhY2VGcm93bkljb24sIEJ1aWxkaW5nT2ZmaWNlSWNvbiwgQm9va09wZW5JY29uLCBYTWFya0ljb24sIEFycm93RG93blRyYXlJY29uLCBBcnJvd1VwVHJheUljb24gfSBmcm9tICdAL2NvbXBvbmVudHMvSWNvbnMnOwovLyBSZXVzYWJsZSBCYXIgQ2hhcnQgQ29tcG9uZW50CmNvbnN0IEJhckNoYXJ0ID0gKHsgZGF0YSwgdGl0bGUsIGJhckNvbG9yQ2xhc3MgPSAnZmlsbC1icmFuZC1wcmltYXJ5JywgdW5pdCA9ICdoJywgc3RhY2tlZERhdGEgfSkgPT4gewogICAgY29uc3QgaXNTdGFja2VkID0gISFzdGFja2VkRGF0YTsKICAgIGNvbnN0IGNoYXJ0RGF0YSA9IGlzU3RhY2tlZCA/IHN0YWNrZWREYXRhIDogZGF0YTsKICAgIGlmICghY2hhcnREYXRhIHx8IGNoYXJ0RGF0YS5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAidGV4dC1jZW50ZXIgdGV4dC1icmFuZC10ZXh0LXNlY29uZGFyeSBweS04IiwgY2hpbGRyZW46IFt0aXRsZSwgIjogUHJvIHRvdG8gb2Jkb2JcdTAwRUQgbmVqc291IGsgZGlzcG96aWNpIFx1MDE3RVx1MDBFMWRuXHUwMEUxIGRhdGEuIl0gfSk7CiAgICB9CiAgICBjb25zdCBtYXhWYWx1ZSA9IGlzU3RhY2tlZAogICAgICAgID8gTWF0aC5tYXgoLi4uY2hhcnREYXRhLm1hcChkID0+IGQud29yayArIGQucGF1c2UpLCAxKQogICAgICAgIDogTWF0aC5tYXgoLi4uY2hhcnREYXRhLm1hcChkID0+IGQudmFsdWUpLCAxKTsKICAgIGNvbnN0IGNoYXJ0SGVpZ2h0ID0gMjUwOwogICAgY29uc3QgdG9wTWFyZ2luID0gMjA7IC8vIFJlc2VydmUgc3BhY2UgZm9yIGxhYmVscyBvbiB0b3Agb2YgdGhlIGJhcnMKICAgIGNvbnN0IGVmZmVjdGl2ZUNoYXJ0SGVpZ2h0ID0gY2hhcnRIZWlnaHQgLSB0b3BNYXJnaW47CiAgICBjb25zdCBiYXJXaWR0aCA9IDMwOwogICAgY29uc3QgYmFyTWFyZ2luID0gMjA7CiAgICBjb25zdCBzdmdXaWR0aCA9IGNoYXJ0RGF0YS5sZW5ndGggKiAoYmFyV2lkdGggKyBiYXJNYXJnaW4pOwogICAgY29uc3QgbGFiZWxSb3RhdGlvbiA9IC00NTsKICAgIGNvbnN0IGxhYmVsWU9mZnNldCA9IE1hdGguY29zKGxhYmVsUm90YXRpb24gKiBNYXRoLlBJIC8gMTgwKSAqIDEwOwogICAgY29uc3Qgc3ZnSGVpZ2h0ID0gY2hhcnRIZWlnaHQgKyA4MDsKICAgIGNvbnN0IGZvcm1hdFZhbHVlID0gKHZhbHVlKSA9PiB7CiAgICAgICAgcmV0dXJuIHVuaXQgPT09ICdLxI0nCiAgICAgICAgICAgID8gYCR7dmFsdWUudG9Mb2NhbGVTdHJpbmcoJ2NzLUNaJywgeyBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDAgfSl9IEvEjWAKICAgICAgICAgICAgOiBgJHt2YWx1ZS50b0ZpeGVkKDEpfSBoYDsKICAgIH07CiAgICByZXR1cm4gKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImJnLWdyYXktODAwIHAtNCByb3VuZGVkLWxnIiwgY2hpbGRyZW46IFtfanN4KCJoNCIsIHsgY2xhc3NOYW1lOiAidGV4dC1sZyBmb250LWJvbGQgdGV4dC1jZW50ZXIgbWItMiIsIGNoaWxkcmVuOiB0aXRsZSB9KSwgaXNTdGFja2VkICYmIChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGp1c3RpZnktY2VudGVyIGl0ZW1zLWNlbnRlciBnYXAtNCBtYi00IHRleHQteHMiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGdhcC0xLjUiLCBjaGlsZHJlbjogW19qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAidy0zIGgtMyBiZy1ibHVlLTUwMCByb3VuZGVkLXNtIiB9KSwgX2pzeCgic3BhbiIsIHsgY2hpbGRyZW46ICJQclx1MDBFMWNlIiB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGdhcC0xLjUiLCBjaGlsZHJlbjogW19qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAidy0zIGgtMyBiZy1vcmFuZ2UtNTAwIHJvdW5kZWQtc20iIH0pLCBfanN4KCJzcGFuIiwgeyBjaGlsZHJlbjogIlBhdXphIiB9KV0gfSldIH0pKSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJvdmVyZmxvdy14LWF1dG8gcGItMiIsIGNoaWxkcmVuOiBfanN4KCJzdmciLCB7IHdpZHRoOiBzdmdXaWR0aCwgaGVpZ2h0OiBzdmdIZWlnaHQsIGNsYXNzTmFtZTogImZvbnQtc2FucyIsIGNoaWxkcmVuOiBjaGFydERhdGEubWFwKChkLCBpKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1N0YWNrZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsVmFsdWUgPSBzdGFjay53b3JrICsgc3RhY2sucGF1c2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JrSGVpZ2h0ID0gKHN0YWNrLndvcmsgLyBtYXhWYWx1ZSkgKiBlZmZlY3RpdmVDaGFydEhlaWdodDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdXNlSGVpZ2h0ID0gKHN0YWNrLnBhdXNlIC8gbWF4VmFsdWUpICogZWZmZWN0aXZlQ2hhcnRIZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKF9qc3hzKCJnIiwgeyB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHtpICogKGJhcldpZHRoICsgYmFyTWFyZ2luKX0sIDApYCwgY2hpbGRyZW46IFtfanN4cygidGl0bGUiLCB7IGNoaWxkcmVuOiBbZC5sYWJlbCwgIjogUHJcdTAwRTFjZSAiLCBmb3JtYXRWYWx1ZShzdGFjay53b3JrKSwgIiwgUGF1emEgIiwgZm9ybWF0VmFsdWUoc3RhY2sucGF1c2UpXSB9KSwgX2pzeCgicmVjdCIsIHsgeDogIjAiLCB5OiBjaGFydEhlaWdodCAtIHdvcmtIZWlnaHQsIHdpZHRoOiBiYXJXaWR0aCwgaGVpZ2h0OiB3b3JrSGVpZ2h0LCBjbGFzc05hbWU6IGBmaWxsLWJsdWUtNTAwIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTMwMCBob3ZlcjpvcGFjaXR5LTgwYCB9KSwgX2pzeCgicmVjdCIsIHsgeDogIjAiLCB5OiBjaGFydEhlaWdodCAtIHdvcmtIZWlnaHQgLSBwYXVzZUhlaWdodCwgd2lkdGg6IGJhcldpZHRoLCBoZWlnaHQ6IHBhdXNlSGVpZ2h0LCBjbGFzc05hbWU6IGBmaWxsLW9yYW5nZS01MDAgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwIGhvdmVyOm9wYWNpdHktODBgIH0pLCBfanN4KCJ0ZXh0IiwgeyB4OiBiYXJXaWR0aCAvIDIsIHk6IGNoYXJ0SGVpZ2h0IC0gd29ya0hlaWdodCAtIHBhdXNlSGVpZ2h0IC0gNSwgdGV4dEFuY2hvcjogIm1pZGRsZSIsIGNsYXNzTmFtZTogInRleHQteHMgZmlsbC1jdXJyZW50IHRleHQtYnJhbmQtdGV4dC1wcmltYXJ5IGZvbnQtYm9sZCIsIGNoaWxkcmVuOiBmb3JtYXRWYWx1ZSh0b3RhbFZhbHVlKSB9KSwgX2pzeCgidGV4dCIsIHsgeDogYmFyV2lkdGggLyAyLCB5OiBjaGFydEhlaWdodCArIGxhYmVsWU9mZnNldCArIDE1LCB0ZXh0QW5jaG9yOiAiZW5kIiwgY2xhc3NOYW1lOiAidGV4dC14cyBmaWxsLWN1cnJlbnQgdGV4dC1icmFuZC10ZXh0LXNlY29uZGFyeSIsIHRyYW5zZm9ybTogYHJvdGF0ZSgke2xhYmVsUm90YXRpb259ICR7YmFyV2lkdGggLyAyfSAke2NoYXJ0SGVpZ2h0ICsgMTV9KWAsIGNoaWxkcmVuOiBkLmxhYmVsIH0pXSB9LCBpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhckhlaWdodCA9IChpdGVtLnZhbHVlIC8gbWF4VmFsdWUpICogZWZmZWN0aXZlQ2hhcnRIZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKF9qc3hzKCJnIiwgeyB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHtpICogKGJhcldpZHRoICsgYmFyTWFyZ2luKX0sIDApYCwgY2hpbGRyZW46IFtfanN4KCJyZWN0IiwgeyB4OiAiMCIsIHk6IGNoYXJ0SGVpZ2h0IC0gYmFySGVpZ2h0LCB3aWR0aDogYmFyV2lkdGgsIGhlaWdodDogYmFySGVpZ2h0LCBjbGFzc05hbWU6IGAke2JhckNvbG9yQ2xhc3N9IHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTMwMCBob3ZlcjpvcGFjaXR5LTgwYCwgY2hpbGRyZW46IF9qc3hzKCJ0aXRsZSIsIHsgY2hpbGRyZW46IFtpdGVtLmxhYmVsLCAiOiAiLCBmb3JtYXRWYWx1ZShpdGVtLnZhbHVlKV0gfSkgfSksIF9qc3goInRleHQiLCB7IHg6IGJhcldpZHRoIC8gMiwgeTogY2hhcnRIZWlnaHQgLSBiYXJIZWlnaHQgLSA1LCB0ZXh0QW5jaG9yOiAibWlkZGxlIiwgY2xhc3NOYW1lOiAidGV4dC14cyBmaWxsLWN1cnJlbnQgdGV4dC1icmFuZC10ZXh0LXByaW1hcnkgZm9udC1ib2xkIiwgY2hpbGRyZW46IGZvcm1hdFZhbHVlKGl0ZW0udmFsdWUpIH0pLCBfanN4KCJ0ZXh0IiwgeyB4OiBiYXJXaWR0aCAvIDIsIHk6IGNoYXJ0SGVpZ2h0ICsgbGFiZWxZT2Zmc2V0ICsgMTUsIHRleHRBbmNob3I6ICJlbmQiLCBjbGFzc05hbWU6ICJ0ZXh0LXhzIGZpbGwtY3VycmVudCB0ZXh0LWJyYW5kLXRleHQtc2Vjb25kYXJ5IiwgdHJhbnNmb3JtOiBgcm90YXRlKCR7bGFiZWxSb3RhdGlvbn0gJHtiYXJXaWR0aCAvIDJ9ICR7Y2hhcnRIZWlnaHQgKyAxNX0pYCwgY2hpbGRyZW46IGQubGFiZWwgfSldIH0sIGkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pIH0pIH0pXSB9KSk7Cn07CmNvbnN0IGN6ZWNoUHVibGljSG9saWRheXMgPSAoeWVhcikgPT4gewogICAgY29uc3QgaG9saWRheXMgPSBbCiAgICAgICAgYDAxLTAxYCwgLy8gTm92w70gcm9rCiAgICAgICAgYDA1LTAxYCwgLy8gU3bDoXRlayBwcsOhY2UKICAgICAgICBgMDUtMDhgLCAvLyBEZW4gdsOtdMSbenN0dsOtCiAgICAgICAgYDA3LTA1YCwgLy8gRGVuIHNsb3ZhbnNrw71jaCB2xJtyb3p2xJtzdMWvIEN5cmlsYSBhIE1ldG9kxJtqZQogICAgICAgIGAwNy0wNmAsIC8vIERlbiB1cMOhbGVuw60gbWlzdHJhIEphbmEgSHVzYQogICAgICAgIGAwOS0yOGAsIC8vIERlbiDEjWVza8OpIHN0w6F0bm9zdGkKICAgICAgICBgMTAtMjhgLCAvLyBEZW4gdnpuaWt1IHNhbW9zdGF0bsOpaG8gxI1lc2tvc2xvdmVuc2vDqWhvIHN0w6F0dQogICAgICAgIGAxMS0xN2AsIC8vIERlbiBib2plIHphIHN2b2JvZHUgYSBkZW1va3JhY2lpCiAgICAgICAgYDEyLTI0YCwgLy8gxaB0xJtkcsO9IGRlbgogICAgICAgIGAxMi0yNWAsIC8vIDEuIHN2w6F0ZWsgdsOhbm/EjW7DrQogICAgICAgIGAxMi0yNmAsIC8vIDIuIHN2w6F0ZWsgdsOhbm/EjW7DrQogICAgXTsKICAgIC8vIFZlbGlrb25vY2UKICAgIGNvbnN0IGVhc3RlciA9ICh5KSA9PiB7CiAgICAgICAgY29uc3QgYSA9IHkgJSAxOTsKICAgICAgICBjb25zdCBiID0gTWF0aC5mbG9vcih5IC8gMTAwKTsKICAgICAgICBjb25zdCBjID0geSAlIDEwMDsKICAgICAgICBjb25zdCBkID0gTWF0aC5mbG9vcihiIC8gNCk7CiAgICAgICAgY29uc3QgZSA9IGIgJSA0OwogICAgICAgIGNvbnN0IGYgPSBNYXRoLmZsb29yKChiICsgOCkgLyAyNSk7CiAgICAgICAgY29uc3QgZyA9IE1hdGguZmxvb3IoKGIgLSBmICsgMSkgLyAzKTsKICAgICAgICBjb25zdCBoID0gKDE5ICogYSArIGIgLSBkIC0gZyArIDE1KSAlIDMwOwogICAgICAgIGNvbnN0IGkgPSBNYXRoLmZsb29yKGMgLyA0KTsKICAgICAgICBjb25zdCBrID0gYyAlIDQ7CiAgICAgICAgY29uc3QgbCA9ICgzMiArIDIgKiBlICsgMiAqIGkgLSBoIC0gaykgJSA3OwogICAgICAgIGNvbnN0IG0gPSBNYXRoLmZsb29yKChhICsgMTEgKiBoICsgMjIgKiBsKSAvIDQ1MSk7CiAgICAgICAgY29uc3QgbW9udGggPSBNYXRoLmZsb29yKChoICsgbCAtIDcgKiBtICsgMTE0KSAvIDMxKTsKICAgICAgICBjb25zdCBkYXkgPSAoKGggKyBsIC0gNyAqIG0gKyAxMTQpICUgMzEpICsgMTsKICAgICAgICByZXR1cm4gbmV3IERhdGUoeSwgbW9udGggLSAxLCBkYXkpOwogICAgfTsKICAgIGNvbnN0IGVhc3RlckRhdGUgPSBlYXN0ZXIoeWVhcik7CiAgICBjb25zdCBnb29kRnJpZGF5ID0gbmV3IERhdGUoZWFzdGVyRGF0ZSk7CiAgICBnb29kRnJpZGF5LnNldERhdGUoZWFzdGVyRGF0ZS5nZXREYXRlKCkgLSAyKTsKICAgIGNvbnN0IGVhc3Rlck1vbmRheSA9IG5ldyBEYXRlKGVhc3RlckRhdGUpOwogICAgZWFzdGVyTW9uZGF5LnNldERhdGUoZWFzdGVyRGF0ZS5nZXREYXRlKCkgKyAxKTsKICAgIGhvbGlkYXlzLnB1c2goYCR7U3RyaW5nKGdvb2RGcmlkYXkuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyl9LSR7U3RyaW5nKGdvb2RGcmlkYXkuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpfWApOwogICAgaG9saWRheXMucHVzaChgJHtTdHJpbmcoZWFzdGVyTW9uZGF5LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfS0ke1N0cmluZyhlYXN0ZXJNb25kYXkuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpfWApOwogICAgcmV0dXJuIGhvbGlkYXlzLm1hcChoID0+IGAke3llYXJ9LSR7aH1gKTsKfTsKY29uc3QgY2FsY3VsYXRlV29ya2luZ0RheXMgPSAoc3RhcnREYXRlLCBlbmREYXRlKSA9PiB7CiAgICBsZXQgY291bnQgPSAwOwogICAgY29uc3QgY3VyRGF0ZSA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSk7CiAgICBjb25zdCBsYXN0RGF0ZSA9IG5ldyBEYXRlKGVuZERhdGUpOwogICAgd2hpbGUgKGN1ckRhdGUgPD0gbGFzdERhdGUpIHsKICAgICAgICBjb25zdCB5ZWFyID0gY3VyRGF0ZS5nZXRGdWxsWWVhcigpOwogICAgICAgIGNvbnN0IGhvbGlkYXlzID0gY3plY2hQdWJsaWNIb2xpZGF5cyh5ZWFyKTsKICAgICAgICBjb25zdCBkYXlPZldlZWsgPSBjdXJEYXRlLmdldERheSgpOwogICAgICAgIGNvbnN0IGRhdGVTdHIgPSBjdXJEYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsKICAgICAgICBpZiAoZGF5T2ZXZWVrICE9PSAwICYmIGRheU9mV2VlayAhPT0gNiAmJiAhaG9saWRheXMuaW5jbHVkZXMoZGF0ZVN0cikpIHsKICAgICAgICAgICAgY291bnQrKzsKICAgICAgICB9CiAgICAgICAgY3VyRGF0ZS5zZXREYXRlKGN1ckRhdGUuZ2V0RGF0ZSgpICsgMSk7CiAgICB9CiAgICByZXR1cm4gY291bnQ7Cn07CmNvbnN0IEFQUF9EQVRBX0tFWSA9ICdqb2JUcmFja2VyRGF0YSc7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFwcCgpIHsKICAgIGNvbnN0IFtqb2JOYW1lLCBzZXRKb2JOYW1lXSA9IHVzZVN0YXRlKCcnKTsKICAgIGNvbnN0IFtqb2JWYWx1ZSwgc2V0Sm9iVmFsdWVdID0gdXNlU3RhdGUoJycpOwogICAgY29uc3QgW21hdGVyaWFsQ29zdCwgc2V0TWF0ZXJpYWxDb3N0XSA9IHVzZVN0YXRlKCcnKTsKICAgIGNvbnN0IFtob3VybHlSYXRlLCBzZXRIb3VybHlSYXRlXSA9IHVzZVN0YXRlKCc0NTAnKTsKICAgIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUobnVsbCk7CiAgICBjb25zdCBbam9icywgc2V0Sm9ic10gPSB1c2VTdGF0ZShbXSk7CiAgICBjb25zdCBbYXJjaGl2ZWRKb2JzLCBzZXRBcmNoaXZlZEpvYnNdID0gdXNlU3RhdGUoW10pOwogICAgY29uc3QgW2VtcGxveWVlcywgc2V0RW1wbG95ZWVzXSA9IHVzZVN0YXRlKEVNUExPWUVFUyk7CiAgICBjb25zdCBbc2VsZWN0ZWRKb2JJZCwgc2V0U2VsZWN0ZWRKb2JJZF0gPSB1c2VTdGF0ZShudWxsKTsKICAgIGNvbnN0IFthY3RpdmVXb3JrLCBzZXRBY3RpdmVXb3JrXSA9IHVzZVN0YXRlKHt9KTsKICAgIGNvbnN0IFtlZGl0aW5nRW1wbG95ZWUsIHNldEVkaXRpbmdFbXBsb3llZV0gPSB1c2VTdGF0ZShudWxsKTsKICAgIGNvbnN0IFtlZGl0aW5nSm9iSWQsIHNldEVkaXRpbmdKb2JJZF0gPSB1c2VTdGF0ZShudWxsKTsKICAgIGNvbnN0IFtlZGl0aW5nSm9iRGF0YSwgc2V0RWRpdGluZ0pvYkRhdGFdID0gdXNlU3RhdGUobnVsbCk7CiAgICBjb25zdCBbZWRpdGluZ1dvcmtMb2csIHNldEVkaXRpbmdXb3JrTG9nXSA9IHVzZVN0YXRlKG51bGwpOwogICAgY29uc3QgW2lzQXV0aGVudGljYXRlZCwgc2V0SXNBdXRoZW50aWNhdGVkXSA9IHVzZVN0YXRlKGZhbHNlKTsKICAgIGNvbnN0IFtwYXNzd29yZCwgc2V0UGFzc3dvcmRdID0gdXNlU3RhdGUoJycpOwogICAgY29uc3QgW2xvZ2luRXJyb3IsIHNldExvZ2luRXJyb3JdID0gdXNlU3RhdGUoJycpOwogICAgY29uc3QgW2lzT3ZlcnZpZXdWaXNpYmxlLCBzZXRJc092ZXJ2aWV3VmlzaWJsZV0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgICBjb25zdCBbaXNQYXlyb2xsVmlzaWJsZSwgc2V0SXNQYXlyb2xsVmlzaWJsZV0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgICBjb25zdCBbaXNNb250aGx5T3ZlcnZpZXdWaXNpYmxlLCBzZXRJc01vbnRobHlPdmVydmlld1Zpc2libGVdID0gdXNlU3RhdGUoZmFsc2UpOwogICAgY29uc3QgW2lzQ2hhcnRzVmlzaWJsZSwgc2V0SXNDaGFydHNWaXNpYmxlXSA9IHVzZVN0YXRlKGZhbHNlKTsKICAgIGNvbnN0IFtpc0xlYXZlUGxhbm5lclZpc2libGUsIHNldElzTGVhdmVQbGFubmVyVmlzaWJsZV0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgICBjb25zdCBbaXNDb21wYW55T3ZlcnZpZXdWaXNpYmxlLCBzZXRJc0NvbXBhbnlPdmVydmlld1Zpc2libGVdID0gdXNlU3RhdGUoZmFsc2UpOwogICAgY29uc3QgW3NlbGVjdGVkRW1wbG95ZWVGb3JSZXBvcnQsIHNldFNlbGVjdGVkRW1wbG95ZWVGb3JSZXBvcnRdID0gdXNlU3RhdGUobnVsbCk7CiAgICBjb25zdCBbcmVwb3J0RGF0ZSwgc2V0UmVwb3J0RGF0ZV0gPSB1c2VTdGF0ZShuZXcgRGF0ZSgpKTsKICAgIGNvbnN0IFtqb2JUb0NvbmZpcm1BcmNoaXZlLCBzZXRKb2JUb0NvbmZpcm1BcmNoaXZlXSA9IHVzZVN0YXRlKG51bGwpOwogICAgY29uc3QgW2JvbnVzUmF0ZSwgc2V0Qm9udXNSYXRlXSA9IHVzZVN0YXRlKCcxJyk7CiAgICBjb25zdCBbbGFzdEJvbnVzRGlzdHJpYnV0aW9uLCBzZXRMYXN0Qm9udXNEaXN0cmlidXRpb25dID0gdXNlU3RhdGUobnVsbCk7CiAgICBjb25zdCBbd29ya0xvZywgc2V0V29ya0xvZ10gPSB1c2VTdGF0ZSh7fSk7CiAgICBjb25zdCBbcGF1c2VMb2csIHNldFBhdXNlTG9nXSA9IHVzZVN0YXRlKHt9KTsKICAgIGNvbnN0IFtkZXRhaWxlZFdvcmtMb2csIHNldERldGFpbGVkV29ya0xvZ10gPSB1c2VTdGF0ZSh7fSk7CiAgICBjb25zdCBbZW1wbG95ZWVCb251c2VzLCBzZXRFbXBsb3llZUJvbnVzZXNdID0gdXNlU3RhdGUoe30pOwogICAgY29uc3QgW21hbnVhbEJvbnVzQWRqdXN0bWVudHMsIHNldE1hbnVhbEJvbnVzQWRqdXN0bWVudHNdID0gdXNlU3RhdGUoe30pOwogICAgY29uc3QgW2xlYXZlUmVjb3Jkcywgc2V0TGVhdmVSZWNvcmRzXSA9IHVzZVN0YXRlKFtdKTsKICAgIGNvbnN0IFtwYXlyb2xsSGlzdG9yeSwgc2V0UGF5cm9sbEhpc3RvcnldID0gdXNlU3RhdGUoW10pOwogICAgY29uc3QgW3BheXJvbGxWaWV3LCBzZXRQYXlyb2xsVmlld10gPSB1c2VTdGF0ZSgnY3VycmVudCcpOwogICAgY29uc3QgW2RldGFpbGVkUGF5cm9sbEhpc3RvcnlWaWV3LCBzZXREZXRhaWxlZFBheXJvbGxIaXN0b3J5Vmlld10gPSB1c2VTdGF0ZShudWxsKTsKICAgIGNvbnN0IFtzaG93UGF5cm9sbFN1bW1hcnksIHNldFNob3dQYXlyb2xsU3VtbWFyeV0gPSB1c2VTdGF0ZShudWxsKTsKICAgIGNvbnN0IFtzdXBlcnZpc29yUGFzc3dvcmQsIHNldFN1cGVydmlzb3JQYXNzd29yZF0gPSB1c2VTdGF0ZSgoKSA9PiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3VwZXJ2aXNvclBhc3N3b3JkJykgfHwgJ2FkbWluJyk7CiAgICBjb25zdCBbaXNDaGFuZ2luZ1Bhc3N3b3JkLCBzZXRJc0NoYW5naW5nUGFzc3dvcmRdID0gdXNlU3RhdGUoZmFsc2UpOwogICAgY29uc3QgW25ld1Bhc3N3b3JkLCBzZXROZXdQYXNzd29yZF0gPSB1c2VTdGF0ZSgnJyk7CiAgICBjb25zdCBbY29uZmlybVBhc3N3b3JkLCBzZXRDb25maXJtUGFzc3dvcmRdID0gdXNlU3RhdGUoJycpOwogICAgY29uc3QgW3Bhc3N3b3JkRXJyb3IsIHNldFBhc3N3b3JkRXJyb3JdID0gdXNlU3RhdGUoJycpOwogICAgY29uc3QgW2N1cnJlbnRUaW1lLCBzZXRDdXJyZW50VGltZV0gPSB1c2VTdGF0ZShuZXcgRGF0ZSgpKTsKICAgIGNvbnN0IGltcG9ydEZpbGVSZWYgPSB1c2VSZWYobnVsbCk7CiAgICAvLyBEYXRhIFBlcnNpc3RlbmNlOiBMb2FkIHN0YXRlIGZyb20gbG9jYWxTdG9yYWdlIG9uIGluaXRpYWwgcmVuZGVyCiAgICB1c2VFZmZlY3QoKCkgPT4gewogICAgICAgIGNvbnN0IHNhdmVkRGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKEFQUF9EQVRBX0tFWSk7CiAgICAgICAgaWYgKHNhdmVkRGF0YSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IEpTT04ucGFyc2Uoc2F2ZWREYXRhKTsKICAgICAgICAgICAgICAgIHNldEpvYnMocGFyc2VkRGF0YS5qb2JzIHx8IFtdKTsKICAgICAgICAgICAgICAgIHNldEFyY2hpdmVkSm9icyhwYXJzZWREYXRhLmFyY2hpdmVkSm9icyB8fCBbXSk7CiAgICAgICAgICAgICAgICBzZXRFbXBsb3llZXMocGFyc2VkRGF0YS5lbXBsb3llZXMgfHwgRU1QTE9ZRUVTKTsKICAgICAgICAgICAgICAgIHNldEFjdGl2ZVdvcmsocGFyc2VkRGF0YS5hY3RpdmVXb3JrIHx8IHt9KTsKICAgICAgICAgICAgICAgIHNldFdvcmtMb2cocGFyc2VkRGF0YS53b3JrTG9nIHx8IHt9KTsKICAgICAgICAgICAgICAgIHNldFBhdXNlTG9nKHBhcnNlZERhdGEucGF1c2VMb2cgfHwge30pOwogICAgICAgICAgICAgICAgc2V0RGV0YWlsZWRXb3JrTG9nKHBhcnNlZERhdGEuZGV0YWlsZWRXb3JrTG9nIHx8IHt9KTsKICAgICAgICAgICAgICAgIHNldEVtcGxveWVlQm9udXNlcyhwYXJzZWREYXRhLmVtcGxveWVlQm9udXNlcyB8fCB7fSk7CiAgICAgICAgICAgICAgICBzZXRNYW51YWxCb251c0FkanVzdG1lbnRzKHBhcnNlZERhdGEubWFudWFsQm9udXNBZGp1c3RtZW50cyB8fCB7fSk7CiAgICAgICAgICAgICAgICBzZXRMZWF2ZVJlY29yZHMocGFyc2VkRGF0YS5sZWF2ZVJlY29yZHMgfHwgW10pOwogICAgICAgICAgICAgICAgc2V0UGF5cm9sbEhpc3RvcnkocGFyc2VkRGF0YS5wYXlyb2xsSGlzdG9yeSB8fCBbXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gcGFyc2Ugc2F2ZWQgZGF0YSBmcm9tIGxvY2FsU3RvcmFnZSIsIGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sIFtdKTsKICAgIC8vIERhdGEgUGVyc2lzdGVuY2U6IFNhdmUgc3RhdGUgdG8gbG9jYWxTdG9yYWdlIHdoZW5ldmVyIGl0IGNoYW5nZXMKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgY29uc3QgZGF0YVRvU2F2ZSA9IHsKICAgICAgICAgICAgam9icywKICAgICAgICAgICAgYXJjaGl2ZWRKb2JzLAogICAgICAgICAgICBlbXBsb3llZXMsCiAgICAgICAgICAgIGFjdGl2ZVdvcmssCiAgICAgICAgICAgIHdvcmtMb2csCiAgICAgICAgICAgIHBhdXNlTG9nLAogICAgICAgICAgICBkZXRhaWxlZFdvcmtMb2csCiAgICAgICAgICAgIGVtcGxveWVlQm9udXNlcywKICAgICAgICAgICAgbWFudWFsQm9udXNBZGp1c3RtZW50cywKICAgICAgICAgICAgbGVhdmVSZWNvcmRzLAogICAgICAgICAgICBwYXlyb2xsSGlzdG9yeSwKICAgICAgICB9OwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEFQUF9EQVRBX0tFWSwgSlNPTi5zdHJpbmdpZnkoZGF0YVRvU2F2ZSkpOwogICAgfSwgW2pvYnMsIGFyY2hpdmVkSm9icywgZW1wbG95ZWVzLCBhY3RpdmVXb3JrLCB3b3JrTG9nLCBwYXVzZUxvZywgZGV0YWlsZWRXb3JrTG9nLCBlbXBsb3llZUJvbnVzZXMsIG1hbnVhbEJvbnVzQWRqdXN0bWVudHMsIGxlYXZlUmVjb3JkcywgcGF5cm9sbEhpc3RvcnldKTsKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgY29uc3QgdGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiBzZXRDdXJyZW50VGltZShuZXcgRGF0ZSgpKSwgMTAwMCk7CiAgICAgICAgcmV0dXJuICgpID0+IGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgfSwgW10pOwogICAgY29uc3QgYWN0aXZlV29ya1JlZiA9IHVzZVJlZihhY3RpdmVXb3JrKTsKICAgIGFjdGl2ZVdvcmtSZWYuY3VycmVudCA9IGFjdGl2ZVdvcms7CiAgICBjb25zdCBlbXBsb3llZXNSZWYgPSB1c2VSZWYoZW1wbG95ZWVzKTsKICAgIGVtcGxveWVlc1JlZi5jdXJyZW50ID0gZW1wbG95ZWVzOwogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgZWxhcHNlZFNlY29uZHMgPSAxOwogICAgICAgICAgICBjb25zdCBlbGFwc2VkSG91cnMgPSBlbGFwc2VkU2Vjb25kcyAvIDM2MDA7CiAgICAgICAgICAgIGNvbnN0IHRvZGF5U3RyaW5nID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07CiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRBY3RpdmVXb3JrID0gYWN0aXZlV29ya1JlZi5jdXJyZW50OwogICAgICAgICAgICBjb25zdCBjdXJyZW50RW1wbG95ZWVzID0gZW1wbG95ZWVzUmVmLmN1cnJlbnQ7CiAgICAgICAgICAgIHNldEpvYnMocHJldkpvYnMgPT4gewogICAgICAgICAgICAgICAgbGV0IGpvYnNDaGFuZ2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkSm9icyA9IHByZXZKb2JzLm1hcChqb2IgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVdvcmtlcnMgPSBjdXJyZW50QWN0aXZlV29ya1tqb2IuaWRdPy5maWx0ZXIoZW1wSWQgPT4gIWN1cnJlbnRFbXBsb3llZXMuZmluZChlID0+IGUuaWQgPT09IGVtcElkKT8ub25QYXVzZSkgfHwgW107CiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVdvcmtlcnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBob3Vyc1RvRGVkdWN0ID0gZWxhcHNlZEhvdXJzICogYWN0aXZlV29ya2Vycy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGpvYnNDaGFuZ2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uam9iLCByZW1haW5pbmdIb3Vyczogam9iLnJlbWFpbmluZ0hvdXJzIC0gaG91cnNUb0RlZHVjdCB9OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gam9iOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gam9ic0NoYW5nZWQgPyB1cGRhdGVkSm9icyA6IHByZXZKb2JzOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc2V0V29ya0xvZyhwcmV2TG9nID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IG5ld0xvZyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocHJldkxvZykpOwogICAgICAgICAgICAgICAgbGV0IGxvZ0NoYW5nZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgam9iSWQgaW4gY3VycmVudEFjdGl2ZVdvcmspIHsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50QWN0aXZlV29ya1tqb2JJZF0uZm9yRWFjaChlbXBJZCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtcCA9IGN1cnJlbnRFbXBsb3llZXMuZmluZChlID0+IGUuaWQgPT09IGVtcElkKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVtcCAmJiAhZW1wLm9uUGF1c2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV3TG9nW2pvYklkXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdMb2dbam9iSWRdID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdMb2dbam9iSWRdW1N0cmluZyhlbXBJZCldID0gKG5ld0xvZ1tqb2JJZF1bU3RyaW5nKGVtcElkKV0gfHwgMCkgKyBlbGFwc2VkSG91cnM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dDaGFuZ2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGxvZ0NoYW5nZWQgPyBuZXdMb2cgOiBwcmV2TG9nOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc2V0UGF1c2VMb2cocHJldkxvZyA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBuZXdMb2cgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHByZXZMb2cpKTsKICAgICAgICAgICAgICAgIGxldCBsb2dDaGFuZ2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGpvYklkIGluIGN1cnJlbnRBY3RpdmVXb3JrKSB7CiAgICAgICAgICAgICAgICAgICAgY3VycmVudEFjdGl2ZVdvcmtbam9iSWRdLmZvckVhY2goZW1wSWQgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbXAgPSBjdXJyZW50RW1wbG95ZWVzLmZpbmQoZSA9PiBlLmlkID09PSBlbXBJZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbXAgJiYgZW1wLm9uUGF1c2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV3TG9nW2pvYklkXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdMb2dbam9iSWRdID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdMb2dbam9iSWRdW1N0cmluZyhlbXBJZCldID0gKG5ld0xvZ1tqb2JJZF1bU3RyaW5nKGVtcElkKV0gfHwgMCkgKyBlbGFwc2VkSG91cnM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dDaGFuZ2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGxvZ0NoYW5nZWQgPyBuZXdMb2cgOiBwcmV2TG9nOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc2V0RGV0YWlsZWRXb3JrTG9nKHByZXZEZXRhaWxlZExvZyA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBuZXdMb2cgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHByZXZEZXRhaWxlZExvZykpOwogICAgICAgICAgICAgICAgbGV0IGxvZ0NoYW5nZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmICghbmV3TG9nW3RvZGF5U3RyaW5nXSkKICAgICAgICAgICAgICAgICAgICBuZXdMb2dbdG9kYXlTdHJpbmddID0ge307CiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGpvYklkIGluIGN1cnJlbnRBY3RpdmVXb3JrKSB7CiAgICAgICAgICAgICAgICAgICAgY3VycmVudEFjdGl2ZVdvcmtbam9iSWRdLmZvckVhY2goZW1wbG95ZWVJZCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtcGxveWVlID0gY3VycmVudEVtcGxveWVlcy5maW5kKGUgPT4gZS5pZCA9PT0gZW1wbG95ZWVJZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZW1wbG95ZWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZ1R5cGUgPSBlbXBsb3llZS5vblBhdXNlID8gJ3BhdXNlJyA6ICd3b3JrJzsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW1wSWRTdHIgPSBTdHJpbmcoZW1wbG95ZWVJZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV3TG9nW3RvZGF5U3RyaW5nXVtlbXBJZFN0cl0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdMb2dbdG9kYXlTdHJpbmddW2VtcElkU3RyXSA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5ld0xvZ1t0b2RheVN0cmluZ11bZW1wSWRTdHJdW2xvZ1R5cGVdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TG9nW3RvZGF5U3RyaW5nXVtlbXBJZFN0cl1bbG9nVHlwZV0gPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgbmV3TG9nW3RvZGF5U3RyaW5nXVtlbXBJZFN0cl1bbG9nVHlwZV1bam9iSWRdID0gKG5ld0xvZ1t0b2RheVN0cmluZ11bZW1wSWRTdHJdW2xvZ1R5cGVdW2pvYklkXSB8fCAwKSArIGVsYXBzZWRIb3VyczsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nQ2hhbmdlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbG9nQ2hhbmdlZCA/IG5ld0xvZyA6IHByZXZEZXRhaWxlZExvZzsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgcmV0dXJuICgpID0+IGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpOwogICAgfSwgW10pOwogICAgY29uc3QgaGFuZGxlTG9naW4gPSAoZSkgPT4gewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBpZiAocGFzc3dvcmQgPT09IHN1cGVydmlzb3JQYXNzd29yZCkgewogICAgICAgICAgICBzZXRJc0F1dGhlbnRpY2F0ZWQodHJ1ZSk7CiAgICAgICAgICAgIHNldExvZ2luRXJyb3IoJycpOwogICAgICAgICAgICBzZXRQYXNzd29yZCgnJyk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBzZXRMb2dpbkVycm9yKCdOZXNwcsOhdm7DqSBoZXNsby4nKTsKICAgICAgICB9CiAgICB9OwogICAgY29uc3QgaGFuZGxlTG9nb3V0ID0gKCkgPT4gewogICAgICAgIHNldElzQXV0aGVudGljYXRlZChmYWxzZSk7CiAgICAgICAgLy8gUmVzZXQgYWxsIHN1cGVydmlzb3Itc3BlY2lmaWMgVUkgc3RhdGVzCiAgICAgICAgc2V0SXNPdmVydmlld1Zpc2libGUoZmFsc2UpOwogICAgICAgIHNldElzUGF5cm9sbFZpc2libGUoZmFsc2UpOwogICAgICAgIHNldElzTW9udGhseU92ZXJ2aWV3VmlzaWJsZShmYWxzZSk7CiAgICAgICAgc2V0SXNDaGFydHNWaXNpYmxlKGZhbHNlKTsKICAgICAgICBzZXRJc0xlYXZlUGxhbm5lclZpc2libGUoZmFsc2UpOwogICAgICAgIHNldElzQ29tcGFueU92ZXJ2aWV3VmlzaWJsZShmYWxzZSk7CiAgICAgICAgc2V0Sm9iVG9Db25maXJtQXJjaGl2ZShudWxsKTsKICAgICAgICBzZXRTaG93UGF5cm9sbFN1bW1hcnkobnVsbCk7CiAgICAgICAgc2V0U2VsZWN0ZWRFbXBsb3llZUZvclJlcG9ydChudWxsKTsKICAgICAgICBzZXREZXRhaWxlZFBheXJvbGxIaXN0b3J5VmlldyhudWxsKTsKICAgICAgICBzZXRFZGl0aW5nRW1wbG95ZWUobnVsbCk7CiAgICAgICAgc2V0RWRpdGluZ0pvYklkKG51bGwpOwogICAgICAgIHNldEVkaXRpbmdKb2JEYXRhKG51bGwpOwogICAgICAgIHNldEVkaXRpbmdXb3JrTG9nKG51bGwpOwogICAgfTsKICAgIGNvbnN0IGhhbmRsZVBhc3N3b3JkQ2hhbmdlID0gKGUpID0+IHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgaWYgKG5ld1Bhc3N3b3JkICE9PSBjb25maXJtUGFzc3dvcmQpIHsKICAgICAgICAgICAgc2V0UGFzc3dvcmRFcnJvcignSGVzbGEgc2UgbmVzaG9kdWrDrS4nKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAobmV3UGFzc3dvcmQubGVuZ3RoIDwgNCkgewogICAgICAgICAgICBzZXRQYXNzd29yZEVycm9yKCdIZXNsbyBtdXPDrSBtw610IGFsZXNwb8WIIDQgem5ha3kuJyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgc2V0U3VwZXJ2aXNvclBhc3N3b3JkKG5ld1Bhc3N3b3JkKTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc3VwZXJ2aXNvclBhc3N3b3JkJywgbmV3UGFzc3dvcmQpOwogICAgICAgIHNldFBhc3N3b3JkRXJyb3IoJycpOwogICAgICAgIHNldE5ld1Bhc3N3b3JkKCcnKTsKICAgICAgICBzZXRDb25maXJtUGFzc3dvcmQoJycpOwogICAgICAgIHNldElzQ2hhbmdpbmdQYXNzd29yZChmYWxzZSk7CiAgICB9OwogICAgY29uc3QgaGFuZGxlQ2xlYXJBbGxEYXRhID0gKCkgPT4gewogICAgICAgIGlmICh3aW5kb3cuY29uZmlybSgiT3ByYXZkdSBjaGNldGUgc21hemF0IHbFoWVjaG5hIGRhdGE/IFRhdG8gYWtjZSBqZSBuZXZyYXRuw6EgYSBvZHN0cmFuw60gaSB1bG/FvmVuw6kgesOhbG9oeSB2IHByb2hsw63FvmXEjWkuIikpIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oQVBQX0RBVEFfS0VZKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3N1cGVydmlzb3JQYXNzd29yZCcpOwogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgfQogICAgfTsKICAgIGNvbnN0IGhhbmRsZUV4cG9ydERhdGEgPSAoKSA9PiB7CiAgICAgICAgY29uc3QgZGF0YVRvRXhwb3J0ID0gewogICAgICAgICAgICBqb2JzLAogICAgICAgICAgICBhcmNoaXZlZEpvYnMsCiAgICAgICAgICAgIGVtcGxveWVlcywKICAgICAgICAgICAgYWN0aXZlV29yaywKICAgICAgICAgICAgd29ya0xvZywKICAgICAgICAgICAgcGF1c2VMb2csCiAgICAgICAgICAgIGRldGFpbGVkV29ya0xvZywKICAgICAgICAgICAgZW1wbG95ZWVCb251c2VzLAogICAgICAgICAgICBtYW51YWxCb251c0FkanVzdG1lbnRzLAogICAgICAgICAgICBsZWF2ZVJlY29yZHMsCiAgICAgICAgICAgIHBheXJvbGxIaXN0b3J5LAogICAgICAgICAgICBzdXBlcnZpc29yUGFzc3dvcmQsIC8vIE9wdGlvbmFsbHkgZXhwb3J0IHBhc3N3b3JkCiAgICAgICAgfTsKICAgICAgICBjb25zdCBkYXRhU3RyID0gSlNPTi5zdHJpbmdpZnkoZGF0YVRvRXhwb3J0LCBudWxsLCAyKTsKICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2RhdGFTdHJdLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTsKICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7CiAgICAgICAgbGluay5kb3dubG9hZCA9IGB6YWthemtvdm5pay1kYXRhLSR7ZGF0ZX0uanNvbmA7CiAgICAgICAgbGluay5ocmVmID0gdXJsOwogICAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7CiAgICB9OwogICAgY29uc3QgaGFuZGxlSW1wb3J0RGF0YSA9IChldmVudCkgPT4gewogICAgICAgIGNvbnN0IGZpbGUgPSBldmVudC50YXJnZXQuZmlsZXM/LlswXTsKICAgICAgICBpZiAoIWZpbGUpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBpZiAoIXdpbmRvdy5jb25maXJtKCJPcHJhdmR1IGNoY2V0ZSBpbXBvcnRvdmF0IGRhdGE/IFTDrW10byBwxZllcMOtxaFldGUgdsWhZWNobmEgYWt0dcOhbG7DrSBkYXRhIHYgYXBsaWthY2kuIikpIHsKICAgICAgICAgICAgLy8gQ2xlYXIgdGhlIGZpbGUgaW5wdXQgc28gdGhlIHNhbWUgZmlsZSBjYW4gYmUgc2VsZWN0ZWQgYWdhaW4KICAgICAgICAgICAgaWYgKGltcG9ydEZpbGVSZWYuY3VycmVudCkgewogICAgICAgICAgICAgICAgaW1wb3J0RmlsZVJlZi5jdXJyZW50LnZhbHVlID0gIiI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4gewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGUudGFyZ2V0Py5yZXN1bHQ7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRleHQgIT09ICdzdHJpbmcnKQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiRmlsZSBjb3VsZCBub3QgYmUgcmVhZCIpOwogICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IEpTT04ucGFyc2UodGV4dCk7CiAgICAgICAgICAgICAgICAvLyBWYWxpZGF0ZSBiYXNpYyBzdHJ1Y3R1cmUKICAgICAgICAgICAgICAgIGlmICghcGFyc2VkRGF0YS5qb2JzIHx8ICFwYXJzZWREYXRhLmVtcGxveWVlcyB8fCAhcGFyc2VkRGF0YS53b3JrTG9nKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJOZXBsYXRuw70gZm9ybcOhdCBzb3Vib3J1IG5lYm8gY2h5YsSbasOtY8OtIGtsw63EjW92w6EgZGF0YS4iKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNldEpvYnMocGFyc2VkRGF0YS5qb2JzIHx8IFtdKTsKICAgICAgICAgICAgICAgIHNldEFyY2hpdmVkSm9icyhwYXJzZWREYXRhLmFyY2hpdmVkSm9icyB8fCBbXSk7CiAgICAgICAgICAgICAgICBzZXRFbXBsb3llZXMocGFyc2VkRGF0YS5lbXBsb3llZXMgfHwgRU1QTE9ZRUVTKTsKICAgICAgICAgICAgICAgIHNldEFjdGl2ZVdvcmsocGFyc2VkRGF0YS5hY3RpdmVXb3JrIHx8IHt9KTsKICAgICAgICAgICAgICAgIHNldFdvcmtMb2cocGFyc2VkRGF0YS53b3JrTG9nIHx8IHt9KTsKICAgICAgICAgICAgICAgIHNldFBhdXNlTG9nKHBhcnNlZERhdGEucGF1c2VMb2cgfHwge30pOwogICAgICAgICAgICAgICAgc2V0RGV0YWlsZWRXb3JrTG9nKHBhcnNlZERhdGEuZGV0YWlsZWRXb3JrTG9nIHx8IHt9KTsKICAgICAgICAgICAgICAgIHNldEVtcGxveWVlQm9udXNlcyhwYXJzZWREYXRhLmVtcGxveWVlQm9udXNlcyB8fCB7fSk7CiAgICAgICAgICAgICAgICBzZXRNYW51YWxCb251c0FkanVzdG1lbnRzKHBhcnNlZERhdGEubWFudWFsQm9udXNBZGp1c3RtZW50cyB8fCB7fSk7CiAgICAgICAgICAgICAgICBzZXRMZWF2ZVJlY29yZHMocGFyc2VkRGF0YS5sZWF2ZVJlY29yZHMgfHwgW10pOwogICAgICAgICAgICAgICAgc2V0UGF5cm9sbEhpc3RvcnkocGFyc2VkRGF0YS5wYXlyb2xsSGlzdG9yeSB8fCBbXSk7CiAgICAgICAgICAgICAgICBpZiAocGFyc2VkRGF0YS5zdXBlcnZpc29yUGFzc3dvcmQpIHsKICAgICAgICAgICAgICAgICAgICBzZXRTdXBlcnZpc29yUGFzc3dvcmQocGFyc2VkRGF0YS5zdXBlcnZpc29yUGFzc3dvcmQpOwogICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzdXBlcnZpc29yUGFzc3dvcmQnLCBwYXJzZWREYXRhLnN1cGVydmlzb3JQYXNzd29yZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBhbGVydCgiRGF0YSBieWxhIMO6c3DEm8WhbsSbIGltcG9ydG92w6FuYS4iKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byBpbXBvcnQgZGF0YToiLCBlcnJvcik7CiAgICAgICAgICAgICAgICBhbGVydChgQ2h5YmEgcMWZaSBpbXBvcnR1IGRhdDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdOZXpuw6Ftw6EgY2h5YmEnfWApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZpbmFsbHkgewogICAgICAgICAgICAgICAgLy8gQ2xlYXIgdGhlIGZpbGUgaW5wdXQKICAgICAgICAgICAgICAgIGlmIChpbXBvcnRGaWxlUmVmLmN1cnJlbnQpIHsKICAgICAgICAgICAgICAgICAgICBpbXBvcnRGaWxlUmVmLmN1cnJlbnQudmFsdWUgPSAiIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7CiAgICB9OwogICAgY29uc3QgaGFuZGxlQ3JlYXRlSm9iID0gKGUpID0+IHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgc2V0RXJyb3IobnVsbCk7CiAgICAgICAgY29uc3QgdmFsdWVOdW0gPSBwYXJzZUZsb2F0KGpvYlZhbHVlKTsKICAgICAgICBjb25zdCByYXRlTnVtID0gcGFyc2VGbG9hdChob3VybHlSYXRlKTsKICAgICAgICBjb25zdCBtYXRlcmlhbE51bSA9IHBhcnNlRmxvYXQobWF0ZXJpYWxDb3N0KSB8fCAwOwogICAgICAgIGlmICgham9iTmFtZS50cmltKCkpIHsKICAgICAgICAgICAgc2V0RXJyb3IoIk7DoXpldiB6YWvDoXpreSBqZSBwb3Zpbm7DvS4iKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoaXNOYU4odmFsdWVOdW0pIHx8IHZhbHVlTnVtIDw9IDApIHsKICAgICAgICAgICAgc2V0RXJyb3IoIkhvZG5vdGEgemFrw6F6a3kgbXVzw60gYsO9dCBrbGFkbsOpIMSNw61zbG8uIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKGlzTmFOKG1hdGVyaWFsTnVtKSB8fCBtYXRlcmlhbE51bSA8IDApIHsKICAgICAgICAgICAgc2V0RXJyb3IoIkhvZG5vdGEgbWF0ZXJpw6FsdSBtdXPDrSBiw710IG5lesOhcG9ybsOpIMSNw61zbG8uIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHZhbHVlTnVtIDwgbWF0ZXJpYWxOdW0pIHsKICAgICAgICAgICAgc2V0RXJyb3IoIkhvZG5vdGEgemFrw6F6a3kgbmVtxa/FvmUgYsO9dCBtZW7FocOtIG5lxb4gaG9kbm90YSBtYXRlcmnDoWx1LiIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmIChpc05hTihyYXRlTnVtKSB8fCByYXRlTnVtIDw9IDApIHsKICAgICAgICAgICAgc2V0RXJyb3IoIkhvZGlub3bDoSBzYXpiYSBtdXPDrSBiw710IGtsYWRuw6kgxI3DrXNsby4iKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjb25zdCBsYWJvclZhbHVlID0gdmFsdWVOdW0gLSBtYXRlcmlhbE51bTsKICAgICAgICBjb25zdCB0b3RhbEhvdXJzID0gbGFib3JWYWx1ZSAvIHJhdGVOdW07CiAgICAgICAgY29uc3QgbmV3Sm9iID0gewogICAgICAgICAgICBpZDogRGF0ZS5ub3coKSwKICAgICAgICAgICAgbmFtZTogam9iTmFtZSwKICAgICAgICAgICAgdG90YWxWYWx1ZTogdmFsdWVOdW0sCiAgICAgICAgICAgIG1hdGVyaWFsQ29zdDogbWF0ZXJpYWxOdW0sCiAgICAgICAgICAgIGhvdXJseVJhdGU6IHJhdGVOdW0sCiAgICAgICAgICAgIHRvdGFsSG91cnM6IHRvdGFsSG91cnMsCiAgICAgICAgICAgIHJlbWFpbmluZ0hvdXJzOiB0b3RhbEhvdXJzLAogICAgICAgICAgICBwdWJsaWNEb2N1bWVudHM6IFtdLAogICAgICAgICAgICBwcml2YXRlRG9jdW1lbnRzOiBbXSwKICAgICAgICB9OwogICAgICAgIHNldEpvYnMoWy4uLmpvYnMsIG5ld0pvYl0pOwogICAgICAgIHNldEpvYk5hbWUoJycpOwogICAgICAgIHNldEpvYlZhbHVlKCcnKTsKICAgICAgICBzZXRIb3VybHlSYXRlKCc0NTAnKTsKICAgICAgICBzZXRNYXRlcmlhbENvc3QoJycpOwogICAgfTsKICAgIGNvbnN0IGhhbmRsZUVkaXRKb2IgPSAoam9iKSA9PiB7CiAgICAgICAgc2V0RWRpdGluZ0pvYklkKGpvYi5pZCk7CiAgICAgICAgc2V0RWRpdGluZ0pvYkRhdGEoewogICAgICAgICAgICB2YWx1ZTogU3RyaW5nKGpvYi50b3RhbFZhbHVlKSwKICAgICAgICAgICAgbWF0ZXJpYWw6IFN0cmluZyhqb2IubWF0ZXJpYWxDb3N0KSwKICAgICAgICAgICAgcmF0ZTogU3RyaW5nKGpvYi5ob3VybHlSYXRlKSwKICAgICAgICB9KTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVDYW5jZWxFZGl0Sm9iID0gKCkgPT4gewogICAgICAgIHNldEVkaXRpbmdKb2JJZChudWxsKTsKICAgICAgICBzZXRFZGl0aW5nSm9iRGF0YShudWxsKTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVTYXZlSm9iID0gKGpvYklkKSA9PiB7CiAgICAgICAgaWYgKCFlZGl0aW5nSm9iRGF0YSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIHNldEVycm9yKG51bGwpOwogICAgICAgIGNvbnN0IHZhbHVlTnVtID0gcGFyc2VGbG9hdChlZGl0aW5nSm9iRGF0YS52YWx1ZSk7CiAgICAgICAgY29uc3QgcmF0ZU51bSA9IHBhcnNlRmxvYXQoZWRpdGluZ0pvYkRhdGEucmF0ZSk7CiAgICAgICAgY29uc3QgbWF0ZXJpYWxOdW0gPSBwYXJzZUZsb2F0KGVkaXRpbmdKb2JEYXRhLm1hdGVyaWFsKSB8fCAwOwogICAgICAgIGNvbnN0IG9yaWdpbmFsSm9iID0gam9icy5maW5kKGogPT4gai5pZCA9PT0gam9iSWQpOwogICAgICAgIGlmICghb3JpZ2luYWxKb2IpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBpZiAoaXNOYU4odmFsdWVOdW0pIHx8IHZhbHVlTnVtIDw9IDApIHsKICAgICAgICAgICAgYWxlcnQoIkhvZG5vdGEgemFrw6F6a3kgbXVzw60gYsO9dCBrbGFkbsOpIMSNw61zbG8uIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKGlzTmFOKG1hdGVyaWFsTnVtKSB8fCBtYXRlcmlhbE51bSA8IDApIHsKICAgICAgICAgICAgYWxlcnQoIkhvZG5vdGEgbWF0ZXJpw6FsdSBtdXPDrSBiw710IG5lesOhcG9ybsOpIMSNw61zbG8uIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHZhbHVlTnVtIDwgbWF0ZXJpYWxOdW0pIHsKICAgICAgICAgICAgYWxlcnQoIkhvZG5vdGEgemFrw6F6a3kgbmVtxa/FvmUgYsO9dCBtZW7FocOtIG5lxb4gaG9kbm90YSBtYXRlcmnDoWx1LiIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmIChpc05hTihyYXRlTnVtKSB8fCByYXRlTnVtIDw9IDApIHsKICAgICAgICAgICAgYWxlcnQoIkhvZGlub3bDoSBzYXpiYSBtdXPDrSBiw710IGtsYWRuw6kgxI3DrXNsby4iKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjb25zdCB3b3JrZWRIb3VycyA9IG9yaWdpbmFsSm9iLnRvdGFsSG91cnMgLSBvcmlnaW5hbEpvYi5yZW1haW5pbmdIb3VyczsKICAgICAgICBjb25zdCBuZXdMYWJvclZhbHVlID0gdmFsdWVOdW0gLSBtYXRlcmlhbE51bTsKICAgICAgICBjb25zdCBuZXdUb3RhbEhvdXJzID0gbmV3TGFib3JWYWx1ZSAvIHJhdGVOdW07CiAgICAgICAgY29uc3QgbmV3UmVtYWluaW5nSG91cnMgPSBuZXdUb3RhbEhvdXJzIC0gd29ya2VkSG91cnM7CiAgICAgICAgc2V0Sm9icyhwcmV2Sm9icyA9PiBwcmV2Sm9icy5tYXAoam9iID0+IGpvYi5pZCA9PT0gam9iSWQgPyB7CiAgICAgICAgICAgIC4uLmpvYiwKICAgICAgICAgICAgdG90YWxWYWx1ZTogdmFsdWVOdW0sCiAgICAgICAgICAgIG1hdGVyaWFsQ29zdDogbWF0ZXJpYWxOdW0sCiAgICAgICAgICAgIGhvdXJseVJhdGU6IHJhdGVOdW0sCiAgICAgICAgICAgIHRvdGFsSG91cnM6IG5ld1RvdGFsSG91cnMsCiAgICAgICAgICAgIHJlbWFpbmluZ0hvdXJzOiBuZXdSZW1haW5pbmdIb3VycwogICAgICAgIH0gOiBqb2IpKTsKICAgICAgICBoYW5kbGVDYW5jZWxFZGl0Sm9iKCk7CiAgICB9OwogICAgY29uc3QgaGFuZGxlRW1wbG95ZWVUb2dnbGUgPSAoZW1wbG95ZWVJZCkgPT4gewogICAgICAgIGlmICghc2VsZWN0ZWRKb2JJZCkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGNvbnN0IGpvYiA9IGpvYnMuZmluZChqID0+IGouaWQgPT09IHNlbGVjdGVkSm9iSWQpOwogICAgICAgIGlmICgham9iKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgc2V0QWN0aXZlV29yayhwcmV2V29yayA9PiB7CiAgICAgICAgICAgIGNvbnN0IG5ld1dvcmsgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHByZXZXb3JrKSk7CiAgICAgICAgICAgIGNvbnN0IGlzV29ya2luZ09uU2VsZWN0ZWRKb2IgPSBuZXdXb3JrW3NlbGVjdGVkSm9iSWRdPy5pbmNsdWRlcyhlbXBsb3llZUlkKTsKICAgICAgICAgICAgT2JqZWN0LmtleXMobmV3V29yaykuZm9yRWFjaChqb2JJZCA9PiB7CiAgICAgICAgICAgICAgICBuZXdXb3JrW2pvYklkXSA9IG5ld1dvcmtbam9iSWRdLmZpbHRlcigoaWQpID0+IGlkICE9PSBlbXBsb3llZUlkKTsKICAgICAgICAgICAgICAgIGlmIChuZXdXb3JrW2pvYklkXS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBkZWxldGUgbmV3V29ya1tqb2JJZF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoIWlzV29ya2luZ09uU2VsZWN0ZWRKb2IpIHsKICAgICAgICAgICAgICAgIGlmICghbmV3V29ya1tzZWxlY3RlZEpvYklkXSkgewogICAgICAgICAgICAgICAgICAgIG5ld1dvcmtbc2VsZWN0ZWRKb2JJZF0gPSBbXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG5ld1dvcmtbc2VsZWN0ZWRKb2JJZF0ucHVzaChlbXBsb3llZUlkKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbmV3V29yazsKICAgICAgICB9KTsKICAgICAgICBzZXRFbXBsb3llZXMocHJldiA9PiBwcmV2Lm1hcChlID0+IGUuaWQgPT09IGVtcGxveWVlSWQgPyB7IC4uLmUsIG9uUGF1c2U6IGZhbHNlIH0gOiBlKSk7CiAgICB9OwogICAgY29uc3QgaGFuZGxlRGVsZXRlSm9iID0gKGpvYklkKSA9PiB7CiAgICAgICAgc2V0Sm9icyhqb2JzLmZpbHRlcihqID0+IGouaWQgIT09IGpvYklkKSk7CiAgICAgICAgc2V0QWN0aXZlV29yayhwcmV2V29yayA9PiB7CiAgICAgICAgICAgIGNvbnN0IG5ld1dvcmsgPSB7IC4uLnByZXZXb3JrIH07CiAgICAgICAgICAgIGRlbGV0ZSBuZXdXb3JrW2pvYklkXTsKICAgICAgICAgICAgcmV0dXJuIG5ld1dvcms7CiAgICAgICAgfSk7CiAgICAgICAgc2V0V29ya0xvZyhwcmV2TG9nID0+IHsKICAgICAgICAgICAgY29uc3QgbmV3TG9nID0geyAuLi5wcmV2TG9nIH07CiAgICAgICAgICAgIGRlbGV0ZSBuZXdMb2dbam9iSWRdOwogICAgICAgICAgICByZXR1cm4gbmV3TG9nOwogICAgICAgIH0pOwogICAgICAgIHNldFBhdXNlTG9nKHByZXZMb2cgPT4gewogICAgICAgICAgICBjb25zdCBuZXdMb2cgPSB7IC4uLnByZXZMb2cgfTsKICAgICAgICAgICAgZGVsZXRlIG5ld0xvZ1tqb2JJZF07CiAgICAgICAgICAgIHJldHVybiBuZXdMb2c7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKHNlbGVjdGVkSm9iSWQgPT09IGpvYklkKSB7CiAgICAgICAgICAgIHNldFNlbGVjdGVkSm9iSWQobnVsbCk7CiAgICAgICAgfQogICAgfTsKICAgIGNvbnN0IGhhbmRsZUFyY2hpdmVKb2IgPSAoam9iKSA9PiB7CiAgICAgICAgc2V0Sm9iVG9Db25maXJtQXJjaGl2ZShqb2IpOwogICAgfTsKICAgIGNvbnN0IGhhbmRsZUNvbmZpcm1BcmNoaXZlID0gKCkgPT4gewogICAgICAgIGlmICgham9iVG9Db25maXJtQXJjaGl2ZSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGNvbnN0IGpvYlRvQXJjaGl2ZSA9IHsgLi4uam9iVG9Db25maXJtQXJjaGl2ZSwgYXJjaGl2ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH07CiAgICAgICAgY29uc3Qgd29ya2VkSG91cnMgPSBqb2JUb0FyY2hpdmUudG90YWxIb3VycyAtIGpvYlRvQ29uZmlybUFyY2hpdmUucmVtYWluaW5nSG91cnM7CiAgICAgICAgY29uc3QgbGFib3JCdWRnZXQgPSBqb2JUb0FyY2hpdmUudG90YWxWYWx1ZSAtIGpvYlRvQ29uZmlybUFyY2hpdmUubWF0ZXJpYWxDb3N0OwogICAgICAgIGNvbnN0IHNwZW50QnVkZ2V0ID0gd29ya2VkSG91cnMgKiBqb2JUb0FyY2hpdmUuaG91cmx5UmF0ZTsKICAgICAgICBjb25zdCByZW1haW5pbmdCdWRnZXQgPSBsYWJvckJ1ZGdldCAtIHNwZW50QnVkZ2V0OwogICAgICAgIGNvbnN0IGpvYldvcmtMb2cgPSB3b3JrTG9nW2pvYlRvQXJjaGl2ZS5pZF0gfHwge307CiAgICAgICAgY29uc3QgdG90YWxIb3Vyc09uSm9iID0gT2JqZWN0LnZhbHVlcyhqb2JXb3JrTG9nKS5yZWR1Y2UoKHN1bSwgaG91cnMpID0+IHN1bSArIGhvdXJzLCAwKTsKICAgICAgICBjb25zdCBib251c0Rpc3RyaWJ1dGlvbiA9IHt9OwogICAgICAgIGlmIChyZW1haW5pbmdCdWRnZXQgPiAwICYmIHRvdGFsSG91cnNPbkpvYiA+IDApIHsKICAgICAgICAgICAgY29uc3QgcmF0ZU51bSA9IHBhcnNlRmxvYXQoYm9udXNSYXRlKSB8fCAxOwogICAgICAgICAgICBmb3IgKGNvbnN0IGVtcGxveWVlSWQgaW4gam9iV29ya0xvZykgewogICAgICAgICAgICAgICAgY29uc3QgZW1wbG95ZWUgPSBlbXBsb3llZXMuZmluZChlID0+IGUuaWQgPT09IHBhcnNlSW50KGVtcGxveWVlSWQpKTsKICAgICAgICAgICAgICAgIGlmIChlbXBsb3llZSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtcGxveWVlSG91cnMgPSBqb2JXb3JrTG9nW2VtcGxveWVlSWRdOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtQcm9wb3J0aW9uID0gZW1wbG95ZWVIb3VycyAvIHRvdGFsSG91cnNPbkpvYjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBib251cyA9IHJlbWFpbmluZ0J1ZGdldCAqIHdvcmtQcm9wb3J0aW9uICogcmF0ZU51bTsKICAgICAgICAgICAgICAgICAgICBib251c0Rpc3RyaWJ1dGlvbltlbXBsb3llZS5uYW1lXSA9IGJvbnVzOwogICAgICAgICAgICAgICAgICAgIHNldEVtcGxveWVlQm9udXNlcyhwcmV2ID0+ICh7CiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByZXYsCiAgICAgICAgICAgICAgICAgICAgICAgIFtlbXBsb3llZUlkXTogKHByZXZbZW1wbG95ZWVJZF0gfHwgMCkgKyBib251cwogICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBzZXRMYXN0Qm9udXNEaXN0cmlidXRpb24oYm9udXNEaXN0cmlidXRpb24pOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc2V0TGFzdEJvbnVzRGlzdHJpYnV0aW9uKG51bGwpLCA1MDAwKTsKICAgICAgICBzZXRBcmNoaXZlZEpvYnMocHJldiA9PiBbLi4ucHJldiwgam9iVG9BcmNoaXZlXSk7CiAgICAgICAgaGFuZGxlRGVsZXRlSm9iKGpvYlRvQXJjaGl2ZS5pZCk7CiAgICAgICAgc2V0Sm9iVG9Db25maXJtQXJjaGl2ZShudWxsKTsKICAgICAgICBzZXRCb251c1JhdGUoJzEnKTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVFZGl0V29ya0xvZyA9IChqb2JJZCwgZW1wbG95ZWVJZCkgPT4gewogICAgICAgIGNvbnN0IGN1cnJlbnRIb3VycyA9IHdvcmtMb2dbU3RyaW5nKGpvYklkKV0/LltTdHJpbmcoZW1wbG95ZWVJZCldIHx8IDA7CiAgICAgICAgc2V0RWRpdGluZ1dvcmtMb2coeyBqb2JJZCwgZW1wbG95ZWVJZCwgaG91cnM6IGN1cnJlbnRIb3Vycy50b0ZpeGVkKDIpIH0pOwogICAgfTsKICAgIGNvbnN0IGhhbmRsZUNhbmNlbEVkaXRXb3JrTG9nID0gKCkgPT4gewogICAgICAgIHNldEVkaXRpbmdXb3JrTG9nKG51bGwpOwogICAgfTsKICAgIGNvbnN0IGhhbmRsZVNhdmVXb3JrTG9nID0gKCkgPT4gewogICAgICAgIGlmICghZWRpdGluZ1dvcmtMb2cpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBjb25zdCB7IGpvYklkLCBlbXBsb3llZUlkLCBob3VycyB9ID0gZWRpdGluZ1dvcmtMb2c7CiAgICAgICAgY29uc3QgbmV3SG91cnMgPSBwYXJzZUZsb2F0KGhvdXJzKTsKICAgICAgICBpZiAoaXNOYU4obmV3SG91cnMpIHx8IG5ld0hvdXJzIDwgMCkgewogICAgICAgICAgICBhbGVydCgiUHJvc8OtbSwgemFkZWp0ZSBwbGF0bsOpIG5lesOhcG9ybsOpIMSNw61zbG8gcHJvIGhvZGlueS4iKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjb25zdCBvbGRIb3VycyA9IHdvcmtMb2dbU3RyaW5nKGpvYklkKV0/LltTdHJpbmcoZW1wbG95ZWVJZCldIHx8IDA7CiAgICAgICAgY29uc3QgaG91ckRpZmZlcmVuY2UgPSBuZXdIb3VycyAtIG9sZEhvdXJzOwogICAgICAgIHNldFdvcmtMb2cocHJldkxvZyA9PiB7CiAgICAgICAgICAgIGNvbnN0IG5ld0xvZyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocHJldkxvZykpOwogICAgICAgICAgICBpZiAoIW5ld0xvZ1tTdHJpbmcoam9iSWQpXSkKICAgICAgICAgICAgICAgIG5ld0xvZ1tTdHJpbmcoam9iSWQpXSA9IHt9OwogICAgICAgICAgICBuZXdMb2dbU3RyaW5nKGpvYklkKV1bU3RyaW5nKGVtcGxveWVlSWQpXSA9IG5ld0hvdXJzOwogICAgICAgICAgICByZXR1cm4gbmV3TG9nOwogICAgICAgIH0pOwogICAgICAgIHNldEpvYnMocHJldkpvYnMgPT4gcHJldkpvYnMubWFwKGpvYiA9PiB7CiAgICAgICAgICAgIGlmIChqb2IuaWQgPT09IGpvYklkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5qb2IsIHJlbWFpbmluZ0hvdXJzOiBqb2IucmVtYWluaW5nSG91cnMgLSBob3VyRGlmZmVyZW5jZSB9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBqb2I7CiAgICAgICAgfSkpOwogICAgICAgIHNldEVkaXRpbmdXb3JrTG9nKG51bGwpOwogICAgfTsKICAgIGNvbnN0IGhhbmRsZVdhZ2VDaGFuZ2UgPSAoZW1wbG95ZWVJZCwgd2FnZSkgPT4gewogICAgICAgIGNvbnN0IG5ld1dhZ2UgPSBwYXJzZUZsb2F0KHdhZ2UpOwogICAgICAgIGlmICghaXNOYU4obmV3V2FnZSkgfHwgd2FnZSA9PT0gJycpIHsKICAgICAgICAgICAgc2V0RW1wbG95ZWVzKHByZXYgPT4gcHJldi5tYXAoZW1wID0+IGVtcC5pZCA9PT0gZW1wbG95ZWVJZCA/IHsgLi4uZW1wLCBob3VybHlXYWdlOiBpc05hTihuZXdXYWdlKSA/IDAgOiBuZXdXYWdlIH0gOiBlbXApKTsKICAgICAgICB9CiAgICB9OwogICAgY29uc3QgaGFuZGxlTGVhdmVFbnRpdGxlbWVudENoYW5nZSA9IChlbXBsb3llZUlkLCBlbnRpdGxlbWVudCkgPT4gewogICAgICAgIGNvbnN0IG5ld0VudGl0bGVtZW50ID0gcGFyc2VJbnQoZW50aXRsZW1lbnQsIDEwKTsKICAgICAgICBpZiAoIWlzTmFOKG5ld0VudGl0bGVtZW50KSB8fCBlbnRpdGxlbWVudCA9PT0gJycpIHsKICAgICAgICAgICAgc2V0RW1wbG95ZWVzKHByZXYgPT4gcHJldi5tYXAoZW1wID0+IGVtcC5pZCA9PT0gZW1wbG95ZWVJZCA/IHsgLi4uZW1wLCBhbm51YWxMZWF2ZUVudGl0bGVtZW50OiBpc05hTihuZXdFbnRpdGxlbWVudCkgPyAwIDogbmV3RW50aXRsZW1lbnQgfSA6IGVtcCkpOwogICAgICAgIH0KICAgIH07CiAgICBjb25zdCBoYW5kbGVTYXZlRW1wbG95ZWVOYW1lID0gKCkgPT4gewogICAgICAgIGlmICghZWRpdGluZ0VtcGxveWVlIHx8ICFlZGl0aW5nRW1wbG95ZWUubmFtZS50cmltKCkpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBzZXRFbXBsb3llZXMoZW1wbG95ZWVzLm1hcChlbXAgPT4gZW1wLmlkID09PSBlZGl0aW5nRW1wbG95ZWUuaWQgPyB7IC4uLmVtcCwgbmFtZTogZWRpdGluZ0VtcGxveWVlLm5hbWUudHJpbSgpIH0gOiBlbXApKTsKICAgICAgICBzZXRFZGl0aW5nRW1wbG95ZWUobnVsbCk7CiAgICB9OwogICAgY29uc3QgaGFuZGxlRmlsZVVwbG9hZCA9IChqb2JJZCwgZmlsZSwgaXNQcml2YXRlKSA9PiB7CiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICByZWFkZXIub25sb2FkID0gKGV2ZW50KSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBldmVudC50YXJnZXQ/LnJlc3VsdDsKICAgICAgICAgICAgaWYgKGNvbnRlbnQpIHsKICAgICAgICAgICAgICAgIGNvbnN0IG5ld0RvY3VtZW50ID0gewogICAgICAgICAgICAgICAgICAgIG5hbWU6IGZpbGUubmFtZSwKICAgICAgICAgICAgICAgICAgICBjb250ZW50LAogICAgICAgICAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBzZXRKb2JzKHByZXZKb2JzID0+IHByZXZKb2JzLm1hcChqb2IgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChqb2IuaWQgPT09IGpvYklkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1ByaXZhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmpvYiwgcHJpdmF0ZURvY3VtZW50czogWy4uLmpvYi5wcml2YXRlRG9jdW1lbnRzLCBuZXdEb2N1bWVudF0gfTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmpvYiwgcHVibGljRG9jdW1lbnRzOiBbLi4uam9iLnB1YmxpY0RvY3VtZW50cywgbmV3RG9jdW1lbnRdIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGpvYjsKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CiAgICB9OwogICAgY29uc3QgaGFuZGxlRmlsZUNsaWNrID0gKGRvYykgPT4gewogICAgICAgIGNvbnN0IGJ5dGVTdHJpbmcgPSBhdG9iKGRvYy5jb250ZW50LnNwbGl0KCcsJylbMV0pOwogICAgICAgIGNvbnN0IGFiID0gbmV3IEFycmF5QnVmZmVyKGJ5dGVTdHJpbmcubGVuZ3RoKTsKICAgICAgICBjb25zdCBpYSA9IG5ldyBVaW50OEFycmF5KGFiKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVTdHJpbmcubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWFbaV0gPSBieXRlU3RyaW5nLmNoYXJDb2RlQXQoaSk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbYWJdLCB7IHR5cGU6IGRvYy50eXBlIH0pOwogICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgd2luZG93Lm9wZW4odXJsLCAnX2JsYW5rJyk7CiAgICB9OwogICAgY29uc3QgaGFuZGxlRmlsZURlbGV0ZSA9IChqb2JJZCwgZG9jdW1lbnROYW1lLCBpc1ByaXZhdGUpID0+IHsKICAgICAgICBzZXRKb2JzKHByZXZKb2JzID0+IHByZXZKb2JzLm1hcChqb2IgPT4gewogICAgICAgICAgICBpZiAoam9iLmlkID09PSBqb2JJZCkgewogICAgICAgICAgICAgICAgaWYgKGlzUHJpdmF0ZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmpvYiwgcHJpdmF0ZURvY3VtZW50czogam9iLnByaXZhdGVEb2N1bWVudHMuZmlsdGVyKGRvYyA9PiBkb2MubmFtZSAhPT0gZG9jdW1lbnROYW1lKSB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uam9iLCBwdWJsaWNEb2N1bWVudHM6IGpvYi5wdWJsaWNEb2N1bWVudHMuZmlsdGVyKGRvYyA9PiBkb2MubmFtZSAhPT0gZG9jdW1lbnROYW1lKSB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBqb2I7CiAgICAgICAgfSkpOwogICAgfTsKICAgIGNvbnN0IGhhbmRsZUFkZEVtcGxveWVlID0gKCkgPT4gewogICAgICAgIGNvbnN0IG5ld0VtcGxveWVlID0gewogICAgICAgICAgICBpZDogRGF0ZS5ub3coKSwKICAgICAgICAgICAgbmFtZTogYFphbcSbc3RuYW5lYyAke2VtcGxveWVlcy5sZW5ndGggKyAxfWAsCiAgICAgICAgICAgIGhvdXJseVdhZ2U6IDIwMCwKICAgICAgICAgICAgYW5udWFsTGVhdmVFbnRpdGxlbWVudDogMjAsCiAgICAgICAgfTsKICAgICAgICBzZXRFbXBsb3llZXMocHJldiA9PiBbLi4ucHJldiwgbmV3RW1wbG95ZWVdKTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVQYXVzZVRvZ2dsZSA9IChlbXBsb3llZUlkKSA9PiB7CiAgICAgICAgc2V0RW1wbG95ZWVzKHByZXYgPT4gcHJldi5tYXAoZW1wID0+IGVtcC5pZCA9PT0gZW1wbG95ZWVJZCA/IHsgLi4uZW1wLCBvblBhdXNlOiAhZW1wLm9uUGF1c2UgfSA6IGVtcCkpOwogICAgfTsKICAgIGNvbnN0IGhhbmRsZUFkZExlYXZlID0gKGUpID0+IHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZS5jdXJyZW50VGFyZ2V0KTsKICAgICAgICBjb25zdCBlbXBsb3llZUlkID0gcGFyc2VJbnQoZm9ybURhdGEuZ2V0KCdlbXBsb3llZUlkJyksIDEwKTsKICAgICAgICBjb25zdCB0eXBlID0gZm9ybURhdGEuZ2V0KCd0eXBlJyk7CiAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gZm9ybURhdGEuZ2V0KCdzdGFydERhdGUnKTsKICAgICAgICBjb25zdCBlbmREYXRlID0gZm9ybURhdGEuZ2V0KCdlbmREYXRlJyk7CiAgICAgICAgaWYgKCFlbXBsb3llZUlkIHx8ICF0eXBlIHx8ICFzdGFydERhdGUgfHwgIWVuZERhdGUgfHwgbmV3IERhdGUoc3RhcnREYXRlKSA+IG5ldyBEYXRlKGVuZERhdGUpKSB7CiAgICAgICAgICAgIGFsZXJ0KCdQcm9zw61tLCB2eXBsxYh0ZSB2xaFlY2huYSBwb2xlIHNwcsOhdm7Emy4nKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjb25zdCBuZXdMZWF2ZSA9IHsKICAgICAgICAgICAgaWQ6IERhdGUubm93KCksCiAgICAgICAgICAgIGVtcGxveWVlSWQsCiAgICAgICAgICAgIHR5cGUsCiAgICAgICAgICAgIHN0YXJ0RGF0ZSwKICAgICAgICAgICAgZW5kRGF0ZSwKICAgICAgICB9OwogICAgICAgIHNldExlYXZlUmVjb3JkcyhwcmV2ID0+IFsuLi5wcmV2LCBuZXdMZWF2ZV0pOwogICAgICAgIGUuY3VycmVudFRhcmdldC5yZXNldCgpOwogICAgfTsKICAgIGNvbnN0IGhhbmRsZURlbGV0ZUxlYXZlID0gKGxlYXZlSWQpID0+IHsKICAgICAgICBzZXRMZWF2ZVJlY29yZHMocHJldiA9PiBwcmV2LmZpbHRlcihsID0+IGwuaWQgIT09IGxlYXZlSWQpKTsKICAgIH07CiAgICBjb25zdCBpc0VtcGxveWVlT25MZWF2ZSA9IChlbXBsb3llZUlkKSA9PiB7CiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOwogICAgICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApOwogICAgICAgIGNvbnN0IGlzT25MZWF2ZSA9IGxlYXZlUmVjb3Jkcy5maW5kKHJlY29yZCA9PiB7CiAgICAgICAgICAgIGlmIChyZWNvcmQuZW1wbG95ZWVJZCAhPT0gZW1wbG95ZWVJZCkKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUocmVjb3JkLnN0YXJ0RGF0ZSk7CiAgICAgICAgICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZShyZWNvcmQuZW5kRGF0ZSk7CiAgICAgICAgICAgIHN0YXJ0RGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTsKICAgICAgICAgICAgZW5kRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTsKICAgICAgICAgICAgcmV0dXJuIHRvZGF5ID49IHN0YXJ0RGF0ZSAmJiB0b2RheSA8PSBlbmREYXRlOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBpc09uTGVhdmUgPyB7IHR5cGU6IGlzT25MZWF2ZS50eXBlIH0gOiBudWxsOwogICAgfTsKICAgIGNvbnN0IGNhbGN1bGF0ZVJlbWFpbmluZ0xlYXZlID0gKGVtcGxveWVlKSA9PiB7CiAgICAgICAgY29uc3QgZW50aXRsZW1lbnQgPSBlbXBsb3llZS5hbm51YWxMZWF2ZUVudGl0bGVtZW50IHx8IDA7CiAgICAgICAgY29uc3QgdXNlZExlYXZlRGF5cyA9IGxlYXZlUmVjb3JkcwogICAgICAgICAgICAuZmlsdGVyKHIgPT4gci5lbXBsb3llZUlkID09PSBlbXBsb3llZS5pZCAmJiByLnR5cGUgPT09ICd2YWNhdGlvbicpCiAgICAgICAgICAgIC5yZWR1Y2UoKHRvdGFsLCByZWNvcmQpID0+IHRvdGFsICsgY2FsY3VsYXRlV29ya2luZ0RheXMocmVjb3JkLnN0YXJ0RGF0ZSwgcmVjb3JkLmVuZERhdGUpLCAwKTsKICAgICAgICByZXR1cm4gZW50aXRsZW1lbnQgLSB1c2VkTGVhdmVEYXlzOwogICAgfTsKICAgIGNvbnN0IHNob3dNb250aGx5UmVwb3J0ID0gKGVtcGxveWVlKSA9PiB7CiAgICAgICAgc2V0U2VsZWN0ZWRFbXBsb3llZUZvclJlcG9ydChlbXBsb3llZSk7CiAgICAgICAgc2V0SXNNb250aGx5T3ZlcnZpZXdWaXNpYmxlKHRydWUpOwogICAgfTsKICAgIGNvbnN0IGNoYW5nZVJlcG9ydE1vbnRoID0gKGFtb3VudCkgPT4gewogICAgICAgIHNldFJlcG9ydERhdGUocHJldkRhdGUgPT4gewogICAgICAgICAgICBjb25zdCBuZXdEYXRlID0gbmV3IERhdGUocHJldkRhdGUpOwogICAgICAgICAgICBuZXdEYXRlLnNldE1vbnRoKG5ld0RhdGUuZ2V0TW9udGgoKSArIGFtb3VudCk7CiAgICAgICAgICAgIHJldHVybiBuZXdEYXRlOwogICAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHNlbGVjdGVkSm9iID0gam9icy5maW5kKGogPT4gai5pZCA9PT0gc2VsZWN0ZWRKb2JJZCk7CiAgICBjb25zdCB0b3RhbEhvdXJzUGVyRW1wbG95ZWUgPSBPYmplY3QuZW50cmllcyh3b3JrTG9nKS5yZWR1Y2UoKGFjYywgW2pvYklkLCBqb2JMb2ddKSA9PiB7CiAgICAgICAgZm9yIChjb25zdCBlbXBsb3llZUlkIGluIGpvYkxvZykgewogICAgICAgICAgICBjb25zdCBlbXBJZE51bSA9IHBhcnNlSW50KGVtcGxveWVlSWQsIDEwKTsKICAgICAgICAgICAgaWYgKCFpc05hTihlbXBJZE51bSkpIHsKICAgICAgICAgICAgICAgIGFjY1tlbXBJZE51bV0gPSAoYWNjW2VtcElkTnVtXSB8fCAwKSArIGpvYkxvZ1tlbXBsb3llZUlkXTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gYWNjOwogICAgfSwge30pOwogICAgY29uc3QgcmVwb3J0WWVhciA9IHJlcG9ydERhdGUuZ2V0RnVsbFllYXIoKTsKICAgIGNvbnN0IHJlcG9ydE1vbnRoID0gcmVwb3J0RGF0ZS5nZXRNb250aCgpOwogICAgY29uc3QgZGF5c0luTW9udGggPSBuZXcgRGF0ZShyZXBvcnRZZWFyLCByZXBvcnRNb250aCArIDEsIDApLmdldERhdGUoKTsKICAgIGNvbnN0IG1vbnRobHlEYXRhID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogZGF5c0luTW9udGggfSwgKF8sIGkpID0+IGkgKyAxKS5tYXAoZGF5ID0+IHsKICAgICAgICBjb25zdCBkYXRlU3RyID0gYCR7cmVwb3J0WWVhcn0tJHtTdHJpbmcocmVwb3J0TW9udGggKyAxKS5wYWRTdGFydCgyLCAnMCcpfS0ke1N0cmluZyhkYXkpLnBhZFN0YXJ0KDIsICcwJyl9YDsKICAgICAgICBjb25zdCBkYWlseUxvZyA9IGRldGFpbGVkV29ya0xvZ1tkYXRlU3RyXT8uW1N0cmluZyhzZWxlY3RlZEVtcGxveWVlRm9yUmVwb3J0Py5pZCkgPz8gJy0xJ107CiAgICAgICAgcmV0dXJuIHsgZGF5LCBsb2c6IGRhaWx5TG9nIH07CiAgICB9KS5maWx0ZXIoZCA9PiBkLmxvZyk7CiAgICBjb25zdCBnZXRNb250aGx5Q2hhcnREYXRhID0gKGxvZywgc2VsZWN0ZWRFbXBsb3llZUlkLCBtb250aCwgeWVhcikgPT4gewogICAgICAgIGNvbnN0IGRhaWx5VG90YWxzID0ge307CiAgICAgICAgY29uc3Qgam9iVG90YWxzID0ge307CiAgICAgICAgZm9yIChjb25zdCBkYXRlU3RyIGluIGxvZykgewogICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cik7CiAgICAgICAgICAgIGlmIChkYXRlLmdldEZ1bGxZZWFyKCkgPT09IHllYXIgJiYgZGF0ZS5nZXRNb250aCgpID09PSBtb250aCkgewogICAgICAgICAgICAgICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCk7CiAgICAgICAgICAgICAgICBjb25zdCBkYXlMb2cgPSBsb2dbZGF0ZVN0cl1bU3RyaW5nKHNlbGVjdGVkRW1wbG95ZWVJZCldOwogICAgICAgICAgICAgICAgaWYgKGRheUxvZykgewogICAgICAgICAgICAgICAgICAgIGlmICghZGFpbHlUb3RhbHNbZGF5XSkKICAgICAgICAgICAgICAgICAgICAgICAgZGFpbHlUb3RhbHNbZGF5XSA9IHsgd29yazogMCwgcGF1c2U6IDAgfTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JrSG91cnMgPSBPYmplY3QudmFsdWVzKGRheUxvZy53b3JrIHx8IHt9KS5yZWR1Y2UoKHMsIGgpID0+IHMgKyBOdW1iZXIoaCksIDApOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdXNlSG91cnMgPSBPYmplY3QudmFsdWVzKGRheUxvZy5wYXVzZSB8fCB7fSkucmVkdWNlKChzLCBoKSA9PiBzICsgTnVtYmVyKGgpLCAwKTsKICAgICAgICAgICAgICAgICAgICBkYWlseVRvdGFsc1tkYXldLndvcmsgKz0gd29ya0hvdXJzOwogICAgICAgICAgICAgICAgICAgIGRhaWx5VG90YWxzW2RheV0ucGF1c2UgKz0gcGF1c2VIb3VyczsKICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGpvYlR5cGUgb2YgWyd3b3JrJywgJ3BhdXNlJ10pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRheUxvZ1tqb2JUeXBlXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBbam9iSWQsIGhvdXJzXSBvZiBPYmplY3QuZW50cmllcyhkYXlMb2dbam9iVHlwZV0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgam9iID0gam9icy5maW5kKGogPT4gai5pZCA9PT0gcGFyc2VJbnQoam9iSWQpKSB8fCBhcmNoaXZlZEpvYnMuZmluZChqID0+IGouaWQgPT09IHBhcnNlSW50KGpvYklkKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgam9iTmFtZSA9IGpvYj8ubmFtZSB8fCBgTmV6bsOhbcOhIHphay4gIyR7am9iSWR9YDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWpvYlRvdGFsc1tqb2JOYW1lXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgam9iVG90YWxzW2pvYk5hbWVdID0geyB3b3JrOiAwLCBwYXVzZTogMCB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvYlRvdGFsc1tqb2JOYW1lXVtqb2JUeXBlXSArPSBob3VyczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjb25zdCBkYWlseUNoYXJ0RGF0YSA9IE9iamVjdC5lbnRyaWVzKGRhaWx5VG90YWxzKS5tYXAoKFtkYXksIHsgd29yaywgcGF1c2UgfV0pID0+ICh7CiAgICAgICAgICAgIGxhYmVsOiBgJHtkYXl9LmAsCiAgICAgICAgICAgIHdvcmssCiAgICAgICAgICAgIHBhdXNlLAogICAgICAgIH0pKTsKICAgICAgICBjb25zdCBqb2JDaGFydERhdGEgPSBPYmplY3QuZW50cmllcyhqb2JUb3RhbHMpLm1hcCgoW2pvYk5hbWUsIHsgd29yaywgcGF1c2UgfV0pID0+ICh7CiAgICAgICAgICAgIGxhYmVsOiBqb2JOYW1lLAogICAgICAgICAgICB3b3JrLAogICAgICAgICAgICBwYXVzZSwKICAgICAgICB9KSk7CiAgICAgICAgcmV0dXJuIHsgZGFpbHlDaGFydERhdGEsIGpvYkNoYXJ0RGF0YSB9OwogICAgfTsKICAgIGNvbnN0IHsgZGFpbHlDaGFydERhdGE6IGVtcGxveWVlRGFpbHlDaGFydERhdGEsIGpvYkNoYXJ0RGF0YTogZW1wbG95ZWVKb2JzQ2hhcnREYXRhIH0gPSBnZXRNb250aGx5Q2hhcnREYXRhKGRldGFpbGVkV29ya0xvZywgc2VsZWN0ZWRFbXBsb3llZUZvclJlcG9ydD8uaWQgPz8gMCwgcmVwb3J0TW9udGgsIHJlcG9ydFllYXIpOwogICAgY29uc3QgZ2V0Q29tcGFueUNoYXJ0RGF0YUZvck1vbnRoID0gKHZpZXcpID0+IHsKICAgICAgICBjb25zdCB5ZWFyID0gcmVwb3J0RGF0ZS5nZXRGdWxsWWVhcigpOwogICAgICAgIGNvbnN0IG1vbnRoID0gcmVwb3J0RGF0ZS5nZXRNb250aCgpOwogICAgICAgIGNvbnN0IGVtcGxveWVlRGF0YSA9IHt9OwogICAgICAgIGNvbnN0IGpvYkRhdGEgPSB7fTsKICAgICAgICBPYmplY3QuZW50cmllcyhkZXRhaWxlZFdvcmtMb2cpCiAgICAgICAgICAgIC5maWx0ZXIoKFtkYXRlXSkgPT4gbmV3IERhdGUoZGF0ZSkuZ2V0TW9udGgoKSA9PT0gbW9udGggJiYgbmV3IERhdGUoZGF0ZSkuZ2V0RnVsbFllYXIoKSA9PT0geWVhcikKICAgICAgICAgICAgLmZvckVhY2goKFssIGRhaWx5TG9nXSkgPT4gewogICAgICAgICAgICBPYmplY3QuZW50cmllcyhkYWlseUxvZykuZm9yRWFjaCgoW2VtcGxveWVlSWRTdHIsIGVtcGxveWVlRGF5TG9nXSkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZW1wbG95ZWUgPSBlbXBsb3llZXMuZmluZChlID0+IGUuaWQgPT09IHBhcnNlSW50KGVtcGxveWVlSWRTdHIpKTsKICAgICAgICAgICAgICAgIGlmICghZW1wbG95ZWUpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgY29uc3QgdG90YWxXb3JrSG91cnMgPSBPYmplY3QudmFsdWVzKGVtcGxveWVlRGF5TG9nLndvcmsgfHwge30pLnJlZHVjZSgocywgaCkgPT4gcyArIE51bWJlcihoKSwgMCk7CiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbFBhdXNlSG91cnMgPSBPYmplY3QudmFsdWVzKGVtcGxveWVlRGF5TG9nLnBhdXNlIHx8IHt9KS5yZWR1Y2UoKHMsIGgpID0+IHMgKyBOdW1iZXIoaCksIDApOwogICAgICAgICAgICAgICAgaWYgKCFlbXBsb3llZURhdGFbZW1wbG95ZWUubmFtZV0pCiAgICAgICAgICAgICAgICAgICAgZW1wbG95ZWVEYXRhW2VtcGxveWVlLm5hbWVdID0geyB3b3JrOiAwLCBwYXVzZTogMCB9OwogICAgICAgICAgICAgICAgZW1wbG95ZWVEYXRhW2VtcGxveWVlLm5hbWVdLndvcmsgKz0gdmlldyA9PT0gJ2N6aycgPyB0b3RhbFdvcmtIb3VycyAqIGVtcGxveWVlLmhvdXJseVdhZ2UgOiB0b3RhbFdvcmtIb3VyczsKICAgICAgICAgICAgICAgIGVtcGxveWVlRGF0YVtlbXBsb3llZS5uYW1lXS5wYXVzZSArPSB2aWV3ID09PSAnY3prJyA/IDAgOiB0b3RhbFBhdXNlSG91cnM7CiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGpvYlR5cGUgb2YgWyd3b3JrJywgJ3BhdXNlJ10pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZW1wbG95ZWVEYXlMb2dbam9iVHlwZV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBbam9iSWRTdHIsIGhvdXJzXSBvZiBPYmplY3QuZW50cmllcyhlbXBsb3llZURheUxvZ1tqb2JUeXBlXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpvYiA9IGpvYnMuZmluZChqID0+IGouaWQgPT09IHBhcnNlSW50KGpvYklkU3RyKSkgfHwgYXJjaGl2ZWRKb2JzLmZpbmQoaiA9PiBqLmlkID09PSBwYXJzZUludChqb2JJZFN0cikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpvYikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgham9iRGF0YVtqb2IubmFtZV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvYkRhdGFbam9iLm5hbWVdID0geyB3b3JrOiAwLCBwYXVzZTogMCB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqb2JUeXBlID09PSAnd29yaycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgam9iRGF0YVtqb2IubmFtZV0ud29yayArPSB2aWV3ID09PSAnY3prJyA/IGhvdXJzICogZW1wbG95ZWUuaG91cmx5V2FnZSA6IGhvdXJzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2aWV3ICE9PSAnY3prJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb2JEYXRhW2pvYi5uYW1lXS5wYXVzZSArPSBob3VyczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGVtcGxveWVlUGVyZm9ybWFuY2U6IE9iamVjdC5lbnRyaWVzKGVtcGxveWVlRGF0YSkubWFwKChbbGFiZWwsIHsgd29yaywgcGF1c2UgfV0pID0+ICh7IGxhYmVsLCB3b3JrLCBwYXVzZSB9KSksCiAgICAgICAgICAgIGpvYldvcmtsb2FkOiBPYmplY3QuZW50cmllcyhqb2JEYXRhKS5tYXAoKFtsYWJlbCwgeyB3b3JrLCBwYXVzZSB9XSkgPT4gKHsgbGFiZWwsIHdvcmssIHBhdXNlIH0pKSwKICAgICAgICB9OwogICAgfTsKICAgIGNvbnN0IFtjaGFydFZpZXcsIHNldENoYXJ0Vmlld10gPSB1c2VTdGF0ZSgnaG91cnMnKTsKICAgIGNvbnN0IGNvbXBhbnlDaGFydERhdGEgPSBnZXRDb21wYW55Q2hhcnREYXRhRm9yTW9udGgoY2hhcnRWaWV3KTsKICAgIGNvbnN0IGdldENvbXBhbnlNb250aGx5U3VtbWFyeSA9ICgpID0+IHsKICAgICAgICBjb25zdCB5ZWFyID0gcmVwb3J0RGF0ZS5nZXRGdWxsWWVhcigpOwogICAgICAgIGNvbnN0IG1vbnRoID0gcmVwb3J0RGF0ZS5nZXRNb250aCgpOwogICAgICAgIGxldCB0b3RhbEhvdXJzID0gMDsKICAgICAgICBsZXQgdG90YWxXYWdlcyA9IDA7CiAgICAgICAgY29uc3QgZW1wbG95ZWVPdmVydGltZURheXMgPSB7fTsKICAgICAgICBPYmplY3QuZW50cmllcyhkZXRhaWxlZFdvcmtMb2cpCiAgICAgICAgICAgIC5maWx0ZXIoKFtkYXRlXSkgPT4gbmV3IERhdGUoZGF0ZSkuZ2V0TW9udGgoKSA9PT0gbW9udGggJiYgbmV3IERhdGUoZGF0ZSkuZ2V0RnVsbFllYXIoKSA9PT0geWVhcikKICAgICAgICAgICAgLmZvckVhY2goKFssIGRhaWx5TG9nXSkgPT4gewogICAgICAgICAgICBPYmplY3QuZW50cmllcyhkYWlseUxvZykuZm9yRWFjaCgoW2VtcElkLCBlbXBMb2ddKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBlbXBsb3llZSA9IGVtcGxveWVlcy5maW5kKGUgPT4gZS5pZCA9PT0gcGFyc2VJbnQoZW1wSWQpKTsKICAgICAgICAgICAgICAgIGlmIChlbXBsb3llZSAmJiBlbXBMb2cud29yaykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtcEhvdXJzID0gT2JqZWN0LnZhbHVlcyhlbXBMb2cud29yaykucmVkdWNlKChzLCBoKSA9PiBzICsgaCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdG90YWxIb3VycyArPSBlbXBIb3VyczsKICAgICAgICAgICAgICAgICAgICB0b3RhbFdhZ2VzICs9IGVtcEhvdXJzICogZW1wbG95ZWUuaG91cmx5V2FnZTsKICAgICAgICAgICAgICAgICAgICBpZiAoZW1wSG91cnMgPiA5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVtcGxveWVlT3ZlcnRpbWVEYXlzW2VtcElkXSA9IChlbXBsb3llZU92ZXJ0aW1lRGF5c1tlbXBJZF0gfHwgMCkgKyAxOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgY29tcGxldGVkSm9ic1RoaXNNb250aCA9IGFyY2hpdmVkSm9icy5maWx0ZXIoam9iID0+IGpvYi5hcmNoaXZlZEF0ICYmIG5ldyBEYXRlKGpvYi5hcmNoaXZlZEF0KS5nZXRNb250aCgpID09PSBtb250aCAmJiBuZXcgRGF0ZShqb2IuYXJjaGl2ZWRBdCkuZ2V0RnVsbFllYXIoKSA9PT0geWVhcik7CiAgICAgICAgY29uc3QgdG90YWxSZXZlbnVlID0gY29tcGxldGVkSm9ic1RoaXNNb250aC5yZWR1Y2UoKHN1bSwgam9iKSA9PiBzdW0gKyAoam9iLnRvdGFsVmFsdWUgLSBqb2IubWF0ZXJpYWxDb3N0KSwgMCk7CiAgICAgICAgY29uc3QgcHJvZml0ID0gdG90YWxSZXZlbnVlIC0gdG90YWxXYWdlczsKICAgICAgICByZXR1cm4geyB0b3RhbEhvdXJzLCB0b3RhbFdhZ2VzLCB0b3RhbFJldmVudWUsIHByb2ZpdCwgY29tcGxldGVkSm9ic1RoaXNNb250aCwgZW1wbG95ZWVPdmVydGltZURheXMgfTsKICAgIH07CiAgICBjb25zdCBjb21wYW55TW9udGhseVN1bW1hcnkgPSBnZXRDb21wYW55TW9udGhseVN1bW1hcnkoKTsKICAgIGNvbnN0IGhhbmRsZUNsb3NlUGF5cm9sbFBlcmlvZCA9ICgpID0+IHsKICAgICAgICBjb25zdCByZWNvcmRzID0gZW1wbG95ZWVzLm1hcChlbXAgPT4gewogICAgICAgICAgICBjb25zdCB0b3RhbEhvdXJzID0gdG90YWxIb3Vyc1BlckVtcGxveWVlW2VtcC5pZF0gfHwgMDsKICAgICAgICAgICAgY29uc3QgYXV0b0JvbnVzID0gZW1wbG95ZWVCb251c2VzW2VtcC5pZF0gfHwgMDsKICAgICAgICAgICAgY29uc3QgbWFudWFsQm9udXMgPSBtYW51YWxCb251c0FkanVzdG1lbnRzW2VtcC5pZF0gfHwgMDsKICAgICAgICAgICAgY29uc3Qgd2FnZSA9IGVtcC5ob3VybHlXYWdlIHx8IDA7CiAgICAgICAgICAgIGNvbnN0IHRvdGFsU2FsYXJ5ID0gKHRvdGFsSG91cnMgKiB3YWdlKSArIGF1dG9Cb251cyArIG1hbnVhbEJvbnVzOwogICAgICAgICAgICBjb25zdCByZW1haW5pbmdMZWF2ZSA9IGNhbGN1bGF0ZVJlbWFpbmluZ0xlYXZlKGVtcCk7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBlbXBsb3llZUlkOiBlbXAuaWQsCiAgICAgICAgICAgICAgICBlbXBsb3llZU5hbWU6IGVtcC5uYW1lLAogICAgICAgICAgICAgICAgdG90YWxIb3VycywKICAgICAgICAgICAgICAgIGhvdXJseVdhZ2U6IHdhZ2UsCiAgICAgICAgICAgICAgICBhdXRvQm9udXMsCiAgICAgICAgICAgICAgICBtYW51YWxCb251cywKICAgICAgICAgICAgICAgIHRvdGFsU2FsYXJ5LAogICAgICAgICAgICAgICAgYW5udWFsTGVhdmVFbnRpdGxlbWVudDogZW1wLmFubnVhbExlYXZlRW50aXRsZW1lbnQgfHwgMCwKICAgICAgICAgICAgICAgIHJlbWFpbmluZ0xlYXZlCiAgICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgdG90YWxXYWdlcyA9IHJlY29yZHMucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIHIudG90YWxTYWxhcnksIDApOwogICAgICAgIGNvbnN0IHRvdGFsSG91cnMgPSByZWNvcmRzLnJlZHVjZSgoc3VtLCByKSA9PiBzdW0gKyByLnRvdGFsSG91cnMsIDApOwogICAgICAgIHNldFNob3dQYXlyb2xsU3VtbWFyeSh7IHRvdGFsSG91cnMsIHRvdGFsV2FnZXMsIHJlY29yZHMgfSk7CiAgICB9OwogICAgY29uc3QgaGFuZGxlQ29uZmlybVBheXJvbGxDbG9zZSA9ICgpID0+IHsKICAgICAgICBpZiAoIXNob3dQYXlyb2xsU3VtbWFyeSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgICAgY29uc3QgcGVyaW9kSWQgPSBgJHtub3cuZ2V0RnVsbFllYXIoKX0tJHtTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfWA7CiAgICAgICAgY29uc3QgbmV3UGVyaW9kID0gewogICAgICAgICAgICBpZDogcGVyaW9kSWQsCiAgICAgICAgICAgIGVuZERhdGU6IG5vdy50b0lTT1N0cmluZygpLAogICAgICAgICAgICB0b3RhbEhvdXJzOiBzaG93UGF5cm9sbFN1bW1hcnkudG90YWxIb3VycywKICAgICAgICAgICAgdG90YWxXYWdlczogc2hvd1BheXJvbGxTdW1tYXJ5LnRvdGFsV2FnZXMsCiAgICAgICAgICAgIHJlY29yZHM6IHNob3dQYXlyb2xsU3VtbWFyeS5yZWNvcmRzLAogICAgICAgIH07CiAgICAgICAgc2V0UGF5cm9sbEhpc3RvcnkocHJldiA9PiBbLi4ucHJldiwgbmV3UGVyaW9kXSk7CiAgICAgICAgc2V0V29ya0xvZyh7fSk7CiAgICAgICAgc2V0UGF1c2VMb2coe30pOwogICAgICAgIHNldERldGFpbGVkV29ya0xvZyh7fSk7CiAgICAgICAgc2V0RW1wbG95ZWVCb251c2VzKHt9KTsKICAgICAgICBzZXRNYW51YWxCb251c0FkanVzdG1lbnRzKHt9KTsKICAgICAgICBzZXRTaG93UGF5cm9sbFN1bW1hcnkobnVsbCk7CiAgICAgICAgYWxlcnQoJ016ZG92w6kgb2Jkb2LDrSBieWxvIMO6c3DEm8WhbsSbIHV6YXbFmWVubyBhIGFyY2hpdm92w6Fuby4nKTsKICAgIH07CiAgICByZXR1cm4gKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogIm1pbi1oLXNjcmVlbiBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LXN0YXJ0IHAtNCBzbTpwLTYgbGc6cC04IGZvbnQtc2FucyIsIGNoaWxkcmVuOiBbX2pzeHMoImhlYWRlciIsIHsgY2xhc3NOYW1lOiAidGV4dC1jZW50ZXIgbWItOCBhbmltYXRlLWZhZGUtaW4gdy1mdWxsIG1heC13LTd4bCIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBmbGV4LWNvbCBzbTpmbGV4LXJvdyBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIGdhcC00IiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGp1c3RpZnktY2VudGVyIGl0ZW1zLWNlbnRlciBnYXAtNCIsIGNoaWxkcmVuOiBbX2pzeChCcmllZmNhc2VJY29uLCB7IGNsYXNzTmFtZTogInctMTIgaC0xMiB0ZXh0LWJyYW5kLXByaW1hcnkiIH0pLCBfanN4KCJoMSIsIHsgY2xhc3NOYW1lOiAidGV4dC00eGwgc206dGV4dC01eGwgZm9udC1leHRyYWJvbGQgdHJhY2tpbmctdGlnaHQiLCBjaGlsZHJlbjogIlNsZWRvdlx1MDBFMW5cdTAwRUQgWmFrXHUwMEUxemVrIiB9KV0gfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTQiLCBjaGlsZHJlbjogX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdGV4dC1sZyBmb250LW1vbm8gYmctZ3JheS04MDAgcHgtMyBweS0xIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ncmF5LTcwMCIsIGNoaWxkcmVuOiBbX2pzeChDbG9ja0ljb24sIHsgY2xhc3NOYW1lOiAidy01IGgtNSB0ZXh0LWJyYW5kLXRleHQtc2Vjb25kYXJ5IiB9KSwgX2pzeCgic3BhbiIsIHsgY2hpbGRyZW46IGN1cnJlbnRUaW1lLnRvTG9jYWxlVGltZVN0cmluZygnY3MtQ1onKSB9KV0gfSkgfSldIH0pLCBfanN4KCJwIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWxnIHRleHQtYnJhbmQtdGV4dC1zZWNvbmRhcnkgbXQtMiIsIGNoaWxkcmVuOiAiVnl0dlx1MDBFMVx1MDE1OWVqdGUgemFrXHUwMEUxemt5IGEgc2xlZHVqdGUgb2RwcmFjb3Zhblx1MDBGRCBcdTAxMERhcyB6YW1cdTAxMUJzdG5hbmNcdTAxNkYuIiB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInctZnVsbCBtYXgtdy03eGwgYmctYnJhbmQtc3VyZmFjZS81MCBiYWNrZHJvcC1ibHVyLXNtIHJvdW5kZWQteGwgc2hhZG93LTJ4bCBwLTYgc206cC04IGJvcmRlciBib3JkZXItZ3JheS03MDAgbWItOCBhbmltYXRlLXNsaWRlLWluIiwgY2hpbGRyZW46IFshaXNBdXRoZW50aWNhdGVkID8gKF9qc3hzKCJmb3JtIiwgeyBvblN1Ym1pdDogaGFuZGxlTG9naW4sIGNsYXNzTmFtZTogImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGdhcC00IiwgY2hpbGRyZW46IFtfanN4KCJoMiIsIHsgY2xhc3NOYW1lOiAidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtY2VudGVyIiwgY2hpbGRyZW46ICJQXHUwMTU5aWhsXHUwMEUxXHUwMTYxZW5cdTAwRUQgcHJvIHZlZG91Y1x1MDBFRGhvIiB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiLCBjaGlsZHJlbjogW19qc3goS2V5SWNvbiwgeyBjbGFzc05hbWU6ICJ3LTYgaC02IHRleHQtYnJhbmQtdGV4dC1zZWNvbmRhcnkiIH0pLCBfanN4KCJpbnB1dCIsIHsgdHlwZTogInBhc3N3b3JkIiwgdmFsdWU6IHBhc3N3b3JkLCBvbkNoYW5nZTogZSA9PiBzZXRQYXNzd29yZChlLnRhcmdldC52YWx1ZSksIHBsYWNlaG9sZGVyOiAiWmFkZWp0ZSBoZXNsbyIsIGNsYXNzTmFtZTogImJnLWdyYXktODAwIGJvcmRlciBib3JkZXItZ3JheS02MDAgcm91bmRlZC1tZCBzaGFkb3ctc20gcHktMiBweC0zIHRleHQtd2hpdGUgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctYnJhbmQtcHJpbWFyeSBmb2N1czpib3JkZXItYnJhbmQtcHJpbWFyeSIgfSksIF9qc3goImJ1dHRvbiIsIHsgdHlwZTogInN1Ym1pdCIsIGNsYXNzTmFtZTogImJnLWJyYW5kLXByaW1hcnkgdGV4dC13aGl0ZSBmb250LWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctYmx1ZS02MDAgdHJhbnNpdGlvbi1jb2xvcnMiLCBjaGlsZHJlbjogIlBcdTAxNTlpaGxcdTAwRTFzaXQiIH0pXSB9KSwgbG9naW5FcnJvciAmJiBfanN4KCJwIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXJlZC00MDAgdGV4dC1zbSIsIGNoaWxkcmVuOiBsb2dpbkVycm9yIH0pXSB9KSkgOiAoX2pzeCgiZGl2IiwgeyBjaGlsZHJlbjogaXNDaGFuZ2luZ1Bhc3N3b3JkID8gKF9qc3hzKCJmb3JtIiwgeyBvblN1Ym1pdDogaGFuZGxlUGFzc3dvcmRDaGFuZ2UsIGNsYXNzTmFtZTogInNwYWNlLXktNCIsIGNoaWxkcmVuOiBbX2pzeCgiaDMiLCB7IGNsYXNzTmFtZTogInRleHQteGwgZm9udC1ib2xkIiwgY2hpbGRyZW46ICJabVx1MDExQm5pdCBoZXNsbyIgfSksIF9qc3hzKCJkaXYiLCB7IGNoaWxkcmVuOiBbX2pzeCgibGFiZWwiLCB7IGNsYXNzTmFtZTogImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1icmFuZC10ZXh0LXNlY29uZGFyeSIsIGNoaWxkcmVuOiAiTm92XHUwMEU5IGhlc2xvIiB9KSwgX2pzeCgiaW5wdXQiLCB7IHR5cGU6ICJwYXNzd29yZCIsIHZhbHVlOiBuZXdQYXNzd29yZCwgb25DaGFuZ2U6IGUgPT4gc2V0TmV3UGFzc3dvcmQoZS50YXJnZXQudmFsdWUpLCBjbGFzc05hbWU6ICJtdC0xIGJsb2NrIHctZnVsbCBiZy1ncmF5LTgwMCBib3JkZXIgYm9yZGVyLWdyYXktNjAwIHJvdW5kZWQtbWQgcHktMiBweC0zIHRleHQtd2hpdGUiIH0pXSB9KSwgX2pzeHMoImRpdiIsIHsgY2hpbGRyZW46IFtfanN4KCJsYWJlbCIsIHsgY2xhc3NOYW1lOiAiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWJyYW5kLXRleHQtc2Vjb25kYXJ5IiwgY2hpbGRyZW46ICJQb3R2cmRpdCBub3ZcdTAwRTkgaGVzbG8iIH0pLCBfanN4KCJpbnB1dCIsIHsgdHlwZTogInBhc3N3b3JkIiwgdmFsdWU6IGNvbmZpcm1QYXNzd29yZCwgb25DaGFuZ2U6IGUgPT4gc2V0Q29uZmlybVBhc3N3b3JkKGUudGFyZ2V0LnZhbHVlKSwgY2xhc3NOYW1lOiAibXQtMSBibG9jayB3LWZ1bGwgYmctZ3JheS04MDAgYm9yZGVyIGJvcmRlci1ncmF5LTYwMCByb3VuZGVkLW1kIHB5LTIgcHgtMyB0ZXh0LXdoaXRlIiB9KV0gfSksIHBhc3N3b3JkRXJyb3IgJiYgX2pzeCgicCIsIHsgY2xhc3NOYW1lOiAidGV4dC1yZWQtNDAwIHRleHQtc20iLCBjaGlsZHJlbjogcGFzc3dvcmRFcnJvciB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBnYXAtNCIsIGNoaWxkcmVuOiBbX2pzeCgiYnV0dG9uIiwgeyB0eXBlOiAic3VibWl0IiwgY2xhc3NOYW1lOiAiYmctYnJhbmQtcHJpbWFyeSB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyIsIGNoaWxkcmVuOiAiVWxvXHUwMTdFaXQgaGVzbG8iIH0pLCBfanN4KCJidXR0b24iLCB7IHR5cGU6ICJidXR0b24iLCBvbkNsaWNrOiAoKSA9PiBzZXRJc0NoYW5naW5nUGFzc3dvcmQoZmFsc2UpLCBjbGFzc05hbWU6ICJiZy1ncmF5LTYwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyIsIGNoaWxkcmVuOiAiWnJ1XHUwMTYxaXQiIH0pXSB9KV0gfSkpIDogKF9qc3hzKF9GcmFnbWVudCwgeyBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi00IGZsZXgtd3JhcCBnYXAtMiIsIGNoaWxkcmVuOiBbX2pzeCgiaDIiLCB7IGNsYXNzTmFtZTogInRleHQtMnhsIGZvbnQtYm9sZCIsIGNoaWxkcmVuOiAiVnl0dm9cdTAxNTlpdCBub3ZvdSB6YWtcdTAwRTF6a3UiIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBmbGV4LXdyYXAganVzdGlmeS1lbmQiLCBjaGlsZHJlbjogW19qc3hzKCJidXR0b24iLCB7IG9uQ2xpY2s6IGhhbmRsZUV4cG9ydERhdGEsIGNsYXNzTmFtZTogImJnLWdyZWVuLTcwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmVlbi02MDAgdHJhbnNpdGlvbi1jb2xvcnMgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiLCBjaGlsZHJlbjogW19qc3goQXJyb3dVcFRyYXlJY29uLCB7IGNsYXNzTmFtZTogInctNSBoLTUiIH0pLCAiIEV4cG9ydG92YXQgZGF0YSJdIH0pLCBfanN4cygiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBpbXBvcnRGaWxlUmVmLmN1cnJlbnQ/LmNsaWNrKCksIGNsYXNzTmFtZTogImJnLWJsdWUtNzAwIHRleHQtd2hpdGUgZm9udC1ib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLWJsdWUtNjAwIHRyYW5zaXRpb24tY29sb3JzIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIiwgY2hpbGRyZW46IFtfanN4KEFycm93RG93blRyYXlJY29uLCB7IGNsYXNzTmFtZTogInctNSBoLTUiIH0pLCAiIEltcG9ydG92YXQgZGF0YSJdIH0pLCBfanN4KCJpbnB1dCIsIHsgdHlwZTogImZpbGUiLCByZWY6IGltcG9ydEZpbGVSZWYsIG9uQ2hhbmdlOiBoYW5kbGVJbXBvcnREYXRhLCBjbGFzc05hbWU6ICJoaWRkZW4iLCBhY2NlcHQ6ICIuanNvbiIgfSksIF9qc3hzKCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldElzTGVhdmVQbGFubmVyVmlzaWJsZSh0cnVlKSwgY2xhc3NOYW1lOiAiYmctcHVycGxlLTYwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1wdXJwbGUtNTAwIHRyYW5zaXRpb24tY29sb3JzIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIiwgY2hpbGRyZW46IFtfanN4KENhbGVuZGFyRGF5c0ljb24sIHsgY2xhc3NOYW1lOiAidy01IGgtNSIgfSksICIgUGxcdTAwRTFub3ZcdTAwRTFuXHUwMEVEIE5lcFx1MDE1OVx1MDBFRHRvbW5vc3RpIl0gfSksIF9qc3hzKCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldElzQ29tcGFueU92ZXJ2aWV3VmlzaWJsZSh0cnVlKSwgY2xhc3NOYW1lOiAiYmctY3lhbi02MDAgdGV4dC13aGl0ZSBmb250LWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctY3lhbi01MDAgdHJhbnNpdGlvbi1jb2xvcnMgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiLCBjaGlsZHJlbjogW19qc3goQnVpbGRpbmdPZmZpY2VJY29uLCB7IGNsYXNzTmFtZTogInctNSBoLTUiIH0pLCAiIE1cdTAxMUJzXHUwMEVEXHUwMTBEblx1MDBFRCBQXHUwMTU5ZWhsZWQgRmlybXkiXSB9KSwgX2pzeHMoImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gc2V0SXNDaGFydHNWaXNpYmxlKHRydWUpLCBjbGFzc05hbWU6ICJiZy10ZWFsLTYwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy10ZWFsLTUwMCB0cmFuc2l0aW9uLWNvbG9ycyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiIsIGNoaWxkcmVuOiBbX2pzeChQcmVzZW50YXRpb25DaGFydEJhckljb24sIHsgY2xhc3NOYW1lOiAidy01IGgtNSIgfSksICIgRmlyZW1uXHUwMEVEIEdyYWZ5Il0gfSksIF9qc3hzKCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldElzUGF5cm9sbFZpc2libGUodHJ1ZSksIGNsYXNzTmFtZTogImJnLWluZGlnby02MDAgdGV4dC13aGl0ZSBmb250LWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctaW5kaWdvLTUwMCB0cmFuc2l0aW9uLWNvbG9ycyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiIsIGNoaWxkcmVuOiBbX2pzeChDYWxjdWxhdG9ySWNvbiwgeyBjbGFzc05hbWU6ICJ3LTUgaC01IiB9KSwgIiBWXHUwMEZEcG9cdTAxMERldCBNemR5Il0gfSksIF9qc3hzKCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldElzT3ZlcnZpZXdWaXNpYmxlKHRydWUpLCBjbGFzc05hbWU6ICJiZy1ncmF5LTYwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmF5LTUwMCB0cmFuc2l0aW9uLWNvbG9ycyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiIsIGNoaWxkcmVuOiBbX2pzeChDaGFydEJhckljb24sIHsgY2xhc3NOYW1lOiAidy01IGgtNSIgfSksICIgUFx1MDE1OWVobGVkIFpha1x1MDBFMXplayJdIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSIsIGNoaWxkcmVuOiBbX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBzZXRJc0NoYW5naW5nUGFzc3dvcmQodHJ1ZSksIHRpdGxlOiAiWm1cdTAxMUJuaXQgaGVzbG8iLCBjbGFzc05hbWU6ICJiZy1ncmF5LTYwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBwLTIgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmF5LTUwMCB0cmFuc2l0aW9uLWNvbG9ycyIsIGNoaWxkcmVuOiBfanN4KENvZ0ljb24sIHsgY2xhc3NOYW1lOiAidy01IGgtNSIgfSkgfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogaGFuZGxlTG9nb3V0LCB0aXRsZTogIk9kaGxcdTAwRTFzaXQiLCBjbGFzc05hbWU6ICJiZy1yZWQtNjAwIHRleHQtd2hpdGUgZm9udC1ib2xkIHAtMiByb3VuZGVkLWxnIGhvdmVyOmJnLXJlZC01MDAgdHJhbnNpdGlvbi1jb2xvcnMiLCBjaGlsZHJlbjogX2pzeChMb2dvdXRJY29uLCB7IGNsYXNzTmFtZTogInctNSBoLTUiIH0pIH0pXSB9KV0gfSldIH0pLCBfanN4cygiZm9ybSIsIHsgb25TdWJtaXQ6IGhhbmRsZUNyZWF0ZUpvYiwgY2xhc3NOYW1lOiAic3BhY2UteS00IiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjaGlsZHJlbjogW19qc3goImxhYmVsIiwgeyBodG1sRm9yOiAiam9iTmFtZSIsIGNsYXNzTmFtZTogImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1icmFuZC10ZXh0LXNlY29uZGFyeSIsIGNoaWxkcmVuOiAiTlx1MDBFMXpldiB6YWtcdTAwRTF6a3kiIH0pLCBfanN4KCJpbnB1dCIsIHsgdHlwZTogInRleHQiLCBpZDogImpvYk5hbWUiLCB2YWx1ZTogam9iTmFtZSwgb25DaGFuZ2U6IGUgPT4gc2V0Sm9iTmFtZShlLnRhcmdldC52YWx1ZSksIGNsYXNzTmFtZTogIm10LTEgYmxvY2sgdy1mdWxsIGJnLWdyYXktODAwIGJvcmRlciBib3JkZXItZ3JheS02MDAgcm91bmRlZC1tZCBzaGFkb3ctc20gcHktMiBweC0zIHRleHQtd2hpdGUgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctYnJhbmQtcHJpbWFyeSBmb2N1czpib3JkZXItYnJhbmQtcHJpbWFyeSIgfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0zIGdhcC00IiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjaGlsZHJlbjogW19qc3goImxhYmVsIiwgeyBodG1sRm9yOiAiam9iVmFsdWUiLCBjbGFzc05hbWU6ICJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtYnJhbmQtdGV4dC1zZWNvbmRhcnkiLCBjaGlsZHJlbjogIkhvZG5vdGEgemFrXHUwMEUxemt5IChLXHUwMTBEKSIgfSksIF9qc3goImlucHV0IiwgeyB0eXBlOiAibnVtYmVyIiwgaWQ6ICJqb2JWYWx1ZSIsIHZhbHVlOiBqb2JWYWx1ZSwgb25DaGFuZ2U6IGUgPT4gc2V0Sm9iVmFsdWUoZS50YXJnZXQudmFsdWUpLCBjbGFzc05hbWU6ICJtdC0xIGJsb2NrIHctZnVsbCBiZy1ncmF5LTgwMCBib3JkZXIgYm9yZGVyLWdyYXktNjAwIHJvdW5kZWQtbWQgc2hhZG93LXNtIHB5LTIgcHgtMyB0ZXh0LXdoaXRlIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLWJyYW5kLXByaW1hcnkgZm9jdXM6Ym9yZGVyLWJyYW5kLXByaW1hcnkiLCBwbGFjZWhvbGRlcjogIjUwMDAwIiB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNoaWxkcmVuOiBbX2pzeCgibGFiZWwiLCB7IGh0bWxGb3I6ICJtYXRlcmlhbENvc3QiLCBjbGFzc05hbWU6ICJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtYnJhbmQtdGV4dC1zZWNvbmRhcnkiLCBjaGlsZHJlbjogIkhvZG5vdGEgbWF0ZXJpXHUwMEUxbHUgKEtcdTAxMEQpIiB9KSwgX2pzeCgiaW5wdXQiLCB7IHR5cGU6ICJudW1iZXIiLCBpZDogIm1hdGVyaWFsQ29zdCIsIHZhbHVlOiBtYXRlcmlhbENvc3QsIG9uQ2hhbmdlOiBlID0+IHNldE1hdGVyaWFsQ29zdChlLnRhcmdldC52YWx1ZSksIGNsYXNzTmFtZTogIm10LTEgYmxvY2sgdy1mdWxsIGJnLWdyYXktODAwIGJvcmRlciBib3JkZXItZ3JheS02MDAgcm91bmRlZC1tZCBzaGFkb3ctc20gcHktMiBweC0zIHRleHQtd2hpdGUgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctYnJhbmQtcHJpbWFyeSBmb2N1czpib3JkZXItYnJhbmQtcHJpbWFyeSIsIHBsYWNlaG9sZGVyOiAiNTAwMCIgfSldIH0pLCBfanN4cygiZGl2IiwgeyBjaGlsZHJlbjogW19qc3goImxhYmVsIiwgeyBodG1sRm9yOiAiaG91cmx5UmF0ZSIsIGNsYXNzTmFtZTogImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1icmFuZC10ZXh0LXNlY29uZGFyeSIsIGNoaWxkcmVuOiAiSG9kaW5vdlx1MDBFMSBzYXpiYSAoS1x1MDEwRC9ob2QpIiB9KSwgX2pzeCgiaW5wdXQiLCB7IHR5cGU6ICJudW1iZXIiLCBpZDogImhvdXJseVJhdGUiLCB2YWx1ZTogaG91cmx5UmF0ZSwgb25DaGFuZ2U6IGUgPT4gc2V0SG91cmx5UmF0ZShlLnRhcmdldC52YWx1ZSksIGNsYXNzTmFtZTogIm10LTEgYmxvY2sgdy1mdWxsIGJnLWdyYXktODAwIGJvcmRlciBib3JkZXItZ3JheS02MDAgcm91bmRlZC1tZCBzaGFkb3ctc20gcHktMiBweC0zIHRleHQtd2hpdGUgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctYnJhbmQtcHJpbWFyeSBmb2N1czpib3JkZXItYnJhbmQtcHJpbWFyeSIsIHBsYWNlaG9sZGVyOiAiNDUwIiB9KV0gfSldIH0pLCBlcnJvciAmJiBfanN4KCJwIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXJlZC00MDAgdGV4dC1zbSB0ZXh0LWNlbnRlciIsIGNoaWxkcmVuOiBlcnJvciB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWNlbnRlciBwdC0yIiwgY2hpbGRyZW46IF9qc3goImJ1dHRvbiIsIHsgdHlwZTogInN1Ym1pdCIsIGNsYXNzTmFtZTogImJnLWJyYW5kLXByaW1hcnkgdGV4dC13aGl0ZSBmb250LWJvbGQgcHktMiBweC02IHJvdW5kZWQtbGcgaG92ZXI6YmctYmx1ZS02MDAgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMzAwIiwgY2hpbGRyZW46ICJWeXR2b1x1MDE1OWl0IHpha1x1MDBFMXprdSIgfSkgfSldIH0pXSB9KSkgfSkpLCBsYXN0Qm9udXNEaXN0cmlidXRpb24gJiYgT2JqZWN0LmtleXMobGFzdEJvbnVzRGlzdHJpYnV0aW9uKS5sZW5ndGggPiAwICYmIChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmaXhlZCB0b3AtNSByaWdodC01IGJnLWdyZWVuLTYwMCB0ZXh0LXdoaXRlIHAtNCByb3VuZGVkLWxnIHNoYWRvdy1sZyB6LTUwIGFuaW1hdGUtZmFkZS1pbiBtYXgtdy1zbSIsIGNoaWxkcmVuOiBbX2pzeCgiaDQiLCB7IGNsYXNzTmFtZTogImZvbnQtYm9sZCBtYi0yIiwgY2hpbGRyZW46ICJCb251c3kgYnlseSByb3pkXHUwMTFCbGVueSEiIH0pLCBfanN4KCJ1bCIsIHsgY2xhc3NOYW1lOiAidGV4dC1zbSIsIGNoaWxkcmVuOiBPYmplY3QuZW50cmllcyhsYXN0Qm9udXNEaXN0cmlidXRpb24pLm1hcCgoW25hbWUsIGJvbnVzXSkgPT4gKF9qc3hzKCJsaSIsIHsgY2hpbGRyZW46IFtuYW1lLCAiOiAiLCBib251cy50b0xvY2FsZVN0cmluZygnY3MtQ1onLCB7IG1heGltdW1GcmFjdGlvbkRpZ2l0czogMiB9KSwgIiBLXHUwMTBEIl0gfSwgbmFtZSkpKSB9KV0gfSkpLCBfanN4cygibWFpbiIsIHsgY2xhc3NOYW1lOiAidy1mdWxsIG1heC13LTd4bCBncmlkIGdyaWQtY29scy0xIGxnOmdyaWQtY29scy0yIGdhcC04IiwgY2hpbGRyZW46IFtfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImJnLWJyYW5kLXN1cmZhY2UvNTAgYmFja2Ryb3AtYmx1ci1zbSByb3VuZGVkLXhsIHNoYWRvdy0yeGwgcC02IHNtOnAtOCBib3JkZXIgYm9yZGVyLWdyYXktNzAwIHNwYWNlLXktOCBhbmltYXRlLXNsaWRlLWluIiwgY2hpbGRyZW46IF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInNwYWNlLXktNCIsIGNoaWxkcmVuOiBbX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIiLCBjaGlsZHJlbjogX2pzeCgiaDMiLCB7IGNsYXNzTmFtZTogInRleHQteGwgZm9udC1ib2xkIiwgY2hpbGRyZW46ICJBa3Rpdm5cdTAwRUQgemFrXHUwMEUxemt5IiB9KSB9KSwgam9icy5sZW5ndGggPT09IDAgJiYgX2pzeCgicCIsIHsgY2xhc3NOYW1lOiAidGV4dC1jZW50ZXIgdGV4dC1icmFuZC10ZXh0LXNlY29uZGFyeSIsIGNoaWxkcmVuOiAiWmF0XHUwMEVEbSBuZWJ5bHkgdnl0dm9cdTAxNTllbnkgXHUwMTdFXHUwMEUxZG5cdTAwRTkgemFrXHUwMEUxemt5LiIgfSksIGpvYnMubWFwKGpvYiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNFZGl0aW5nSm9iID0gZWRpdGluZ0pvYklkID09PSBqb2IuaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRWRpdGluZ0pvYiAmJiBlZGl0aW5nSm9iRGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInAtNCByb3VuZGVkLWxnIGJvcmRlci0yIGJvcmRlci15ZWxsb3ctNTAwIGJnLXllbGxvdy05MDAvMjAiLCBjaGlsZHJlbjogW19qc3hzKCJoNCIsIHsgY2xhc3NOYW1lOiAiZm9udC1ib2xkIHRleHQtbGcgdGV4dC15ZWxsb3ctMzAwIG1iLTIiLCBjaGlsZHJlbjogWyJcdTAwREFwcmF2YSB6YWtcdTAwRTF6a3k6ICIsIGpvYi5uYW1lXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAic3BhY2UteS0yIiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjaGlsZHJlbjogW19qc3goImxhYmVsIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXhzIHRleHQteWVsbG93LTIwMCIsIGNoaWxkcmVuOiAiSG9kbm90YSB6YWtcdTAwRTF6a3kgKEtcdTAxMEQpIiB9KSwgX2pzeCgiaW5wdXQiLCB7IHR5cGU6ICJudW1iZXIiLCB2YWx1ZTogZWRpdGluZ0pvYkRhdGEudmFsdWUsIG9uQ2hhbmdlOiBlID0+IHNldEVkaXRpbmdKb2JEYXRhKGQgPT4gZCA/IHsgLi4uZCwgdmFsdWU6IGUudGFyZ2V0LnZhbHVlIH0gOiBudWxsKSwgY2xhc3NOYW1lOiAibXQtMSBibG9jayB3LWZ1bGwgYmctZ3JheS04MDAgYm9yZGVyIGJvcmRlci1ncmF5LTYwMCByb3VuZGVkLW1kIHB5LTEgcHgtMiB0ZXh0LXdoaXRlIiB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNoaWxkcmVuOiBbX2pzeCgibGFiZWwiLCB7IGNsYXNzTmFtZTogInRleHQteHMgdGV4dC15ZWxsb3ctMjAwIiwgY2hpbGRyZW46ICJIb2Rub3RhIG1hdGVyaVx1MDBFMWx1IChLXHUwMTBEKSIgfSksIF9qc3goImlucHV0IiwgeyB0eXBlOiAibnVtYmVyIiwgdmFsdWU6IGVkaXRpbmdKb2JEYXRhLm1hdGVyaWFsLCBvbkNoYW5nZTogZSA9PiBzZXRFZGl0aW5nSm9iRGF0YShkID0+IGQgPyB7IC4uLmQsIG1hdGVyaWFsOiBlLnRhcmdldC52YWx1ZSB9IDogbnVsbCksIGNsYXNzTmFtZTogIm10LTEgYmxvY2sgdy1mdWxsIGJnLWdyYXktODAwIGJvcmRlciBib3JkZXItZ3JheS02MDAgcm91bmRlZC1tZCBweS0xIHB4LTIgdGV4dC13aGl0ZSIgfSldIH0pLCBfanN4cygiZGl2IiwgeyBjaGlsZHJlbjogW19qc3goImxhYmVsIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXhzIHRleHQteWVsbG93LTIwMCIsIGNoaWxkcmVuOiAiSG9kaW5vdlx1MDBFMSBzYXpiYSAoS1x1MDEwRC9ob2QpIiB9KSwgX2pzeCgiaW5wdXQiLCB7IHR5cGU6ICJudW1iZXIiLCB2YWx1ZTogZWRpdGluZ0pvYkRhdGEucmF0ZSwgb25DaGFuZ2U6IGUgPT4gc2V0RWRpdGluZ0pvYkRhdGEoZCA9PiBkID8geyAuLi5kLCByYXRlOiBlLnRhcmdldC52YWx1ZSB9IDogbnVsbCksIGNsYXNzTmFtZTogIm10LTEgYmxvY2sgdy1mdWxsIGJnLWdyYXktODAwIGJvcmRlciBib3JkZXItZ3JheS02MDAgcm91bmRlZC1tZCBweS0xIHB4LTIgdGV4dC13aGl0ZSIgfSldIH0pXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBnYXAtMiBtdC00IiwgY2hpbGRyZW46IFtfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IGhhbmRsZVNhdmVKb2Ioam9iLmlkKSwgY2xhc3NOYW1lOiAiZmxleC0xIGJnLWdyZWVuLTYwMCBob3ZlcjpiZy1ncmVlbi01MDAgdGV4dC13aGl0ZSBmb250LWJvbGQgcHktMS41IHB4LTMgcm91bmRlZC1sZyIsIGNoaWxkcmVuOiAiVWxvXHUwMTdFaXQiIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6IGhhbmRsZUNhbmNlbEVkaXRKb2IsIGNsYXNzTmFtZTogImZsZXgtMSBiZy1ncmF5LTYwMCBob3ZlcjpiZy1ncmF5LTUwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS0xLjUgcHgtMyByb3VuZGVkLWxnIiwgY2hpbGRyZW46ICJacnVcdTAxNjFpdCIgfSldIH0pXSB9LCBqb2IuaWQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBqb2IudG90YWxIb3VycyA+IDAgPyAoMSAtIChNYXRoLm1heCgwLCBqb2IucmVtYWluaW5nSG91cnMpIC8gam9iLnRvdGFsSG91cnMpKSAqIDEwMCA6IDEwMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JrZXJzT25Kb2IgPSBlbXBsb3llZXMuZmlsdGVyKGVtcCA9PiBhY3RpdmVXb3JrW2pvYi5pZF0/LmluY2x1ZGVzKGVtcC5pZCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtlZEhvdXJzID0gam9iLnRvdGFsSG91cnMgLSBqb2IucmVtYWluaW5nSG91cnM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFib3JCdWRnZXQgPSBqb2IudG90YWxWYWx1ZSAtIGpvYi5tYXRlcmlhbENvc3Q7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlbnRCdWRnZXQgPSB3b3JrZWRIb3VycyAqIGpvYi5ob3VybHlSYXRlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ0J1ZGdldCA9IGxhYm9yQnVkZ2V0IC0gc3BlbnRCdWRnZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNPdmVyQnVkZ2V0ID0gcmVtYWluaW5nQnVkZ2V0IDwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqb2JXb3JrTG9nID0gd29ya0xvZ1tTdHJpbmcoam9iLmlkKV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNBY3RpdmUgPSBhY3RpdmVXb3JrW2pvYi5pZF0gJiYgYWN0aXZlV29ya1tqb2IuaWRdLmxlbmd0aCA+IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6IGBwLTQgcm91bmRlZC1sZyBib3JkZXItMiB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0yMDAgJHtzZWxlY3RlZEpvYklkID09PSBqb2IuaWQgPyAnYm9yZGVyLWJyYW5kLXByaW1hcnkgYmctYmx1ZS05MDAvMjAnIDogJ2JvcmRlci1ncmF5LTYwMCBiZy1icmFuZC1zdXJmYWNlJ31gLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLXN0YXJ0IiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIiwgY2hpbGRyZW46IFtfanN4KCJoNCIsIHsgY2xhc3NOYW1lOiAiZm9udC1ib2xkIHRleHQtbGcgdGV4dC1icmFuZC10ZXh0LXByaW1hcnkiLCBjaGlsZHJlbjogam9iLm5hbWUgfSksIF9qc3goInNwYW4iLCB7IGNsYXNzTmFtZTogYHB4LTIgcHktMC41IHRleHQteHMgZm9udC1ib2xkIHJvdW5kZWQtZnVsbCAke2lzQWN0aXZlID8gJ2JnLWdyZWVuLTgwMCB0ZXh0LWdyZWVuLTIwMCcgOiAnYmcteWVsbG93LTgwMCB0ZXh0LXllbGxvdy0yMDAnfWAsIGNoaWxkcmVuOiBpc0FjdGl2ZSA/ICdQcm9iw61ow6EnIDogJ1BvemFzdGF2ZW5vJyB9KV0gfSksIGlzQXV0aGVudGljYXRlZCAmJiAoX2pzeChfRnJhZ21lbnQsIHsgY2hpbGRyZW46IF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInRleHQteHMgdGV4dC1ncmF5LTQwMCBtYi0yIHNwYWNlLXgtMiIsIGNoaWxkcmVuOiBbX2pzeHMoInNwYW4iLCB7IGNoaWxkcmVuOiBbIkNlbGtlbTogIiwgX2pzeHMoInN0cm9uZyIsIHsgY2hpbGRyZW46IFtqb2IudG90YWxWYWx1ZS50b0xvY2FsZVN0cmluZygnY3MtQ1onKSwgIiBLXHUwMTBEIl0gfSldIH0pLCBfanN4KCJzcGFuIiwgeyBjaGlsZHJlbjogInwiIH0pLCBfanN4cygic3BhbiIsIHsgY2hpbGRyZW46IFsiTWF0ZXJpXHUwMEUxbDogIiwgX2pzeHMoInN0cm9uZyIsIHsgY2hpbGRyZW46IFtqb2IubWF0ZXJpYWxDb3N0LnRvTG9jYWxlU3RyaW5nKCdjcy1DWicpLCAiIEtcdTAxMEQiXSB9KV0gfSldIH0pIH0pKSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTQgZmxleC13cmFwIiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6IGBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMS41IHRleHQtc20gZm9udC1tZWRpdW0gJHtqb2IucmVtYWluaW5nSG91cnMgPCAwID8gJ3RleHQtcmVkLTQwMCcgOiAndGV4dC1icmFuZC10ZXh0LXNlY29uZGFyeSd9YCwgY2hpbGRyZW46IFtfanN4KENsb2NrSWNvbiwgeyBjbGFzc05hbWU6ICJ3LTQgaC00IiB9KSwgX2pzeHMoInNwYW4iLCB7IGNoaWxkcmVuOiBbIlpiXHUwMEZEdlx1MDBFMTogIiwgam9iLnJlbWFpbmluZ0hvdXJzLnRvRml4ZWQoMiksICIgLyAiLCBqb2IudG90YWxIb3Vycy50b0ZpeGVkKDIpLCAiIGgiXSB9KV0gfSksIGlzQXV0aGVudGljYXRlZCAmJiAoX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiBgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEuNSB0ZXh0LXNtIGZvbnQtbWVkaXVtICR7aXNPdmVyQnVkZ2V0ID8gJ3RleHQtcmVkLTQwMCcgOiAndGV4dC1icmFuZC10ZXh0LXNlY29uZGFyeSd9YCwgY2hpbGRyZW46IFtpc092ZXJCdWRnZXQgJiYgX2pzeChBbGVydFRyaWFuZ2xlSWNvbiwgeyBjbGFzc05hbWU6ICJ3LTQgaC00IiB9KSwgX2pzeChDYXNoSWNvbiwgeyBjbGFzc05hbWU6ICJ3LTQgaC00IiB9KSwgX2pzeCgic3BhbiIsIHsgY2hpbGRyZW46IGlzT3ZlckJ1ZGdldAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYFDFmWVrcm/EjWVubyBvOiAke01hdGguYWJzKHJlbWFpbmluZ0J1ZGdldCkudG9Mb2NhbGVTdHJpbmcoJ2NzLUNaJywgeyBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDAgfSl9IEvEjWAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGBaYnl0ZWsgcm96cG/EjXR1OiAke3JlbWFpbmluZ0J1ZGdldC50b0xvY2FsZVN0cmluZygnY3MtQ1onLCB7IG1heGltdW1GcmFjdGlvbkRpZ2l0czogMCB9KX0gS8SNYCB9KV0gfSkpXSB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIiwgY2hpbGRyZW46IFtfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldFNlbGVjdGVkSm9iSWQoam9iLmlkKSwgY2xhc3NOYW1lOiBgcHgtMyBweS0xIHRleHQtc20gZm9udC1zZW1pYm9sZCByb3VuZGVkLW1kIHRyYW5zaXRpb24tY29sb3JzICR7c2VsZWN0ZWRKb2JJZCA9PT0gam9iLmlkID8gJ2JnLWJsdWUtNjAwIHRleHQtd2hpdGUgY3Vyc29yLWRlZmF1bHQnIDogJ2JnLWdyYXktNjAwIGhvdmVyOmJnLWdyYXktNTAwIHRleHQtd2hpdGUnfWAsIGNoaWxkcmVuOiBzZWxlY3RlZEpvYklkID09PSBqb2IuaWQgPyAnVnlicsOhbm8nIDogJ1Z5YnJhdCcgfSksIGlzQXV0aGVudGljYXRlZCAmJiAoX2pzeHMoX0ZyYWdtZW50LCB7IGNoaWxkcmVuOiBbX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBoYW5kbGVFZGl0Sm9iKGpvYiksIHRpdGxlOiAiVXByYXZpdCB6YWtcdTAwRTF6a3UiLCBjbGFzc05hbWU6ICJwLTEuNSB0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQteWVsbG93LTQwMCB0cmFuc2l0aW9uLWNvbG9ycyIsIGNoaWxkcmVuOiBfanN4KFBlbmNpbEljb24sIHsgY2xhc3NOYW1lOiAidy01IGgtNSIgfSkgfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gaGFuZGxlQXJjaGl2ZUpvYihqb2IpLCB0aXRsZTogIkFyY2hpdm92YXQgemFrXHUwMEUxemt1IiwgY2xhc3NOYW1lOiAicC0xLjUgdGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LXllbGxvdy00MDAgdHJhbnNpdGlvbi1jb2xvcnMiLCBjaGlsZHJlbjogX2pzeChBcmNoaXZlQm94SWNvbiwgeyBjbGFzc05hbWU6ICJ3LTUgaC01IiB9KSB9KSwgX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBoYW5kbGVEZWxldGVKb2Ioam9iLmlkKSwgdGl0bGU6ICJTbWF6YXQgemFrXHUwMEUxemt1IiwgY2xhc3NOYW1lOiAicC0xLjUgdGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LXJlZC00MDAgdHJhbnNpdGlvbi1jb2xvcnMiLCBjaGlsZHJlbjogX2pzeChUcmFzaEljb24sIHsgY2xhc3NOYW1lOiAidy01IGgtNSIgfSkgfSldIH0pKV0gfSldIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogInctZnVsbCBiZy1ncmF5LTcwMCByb3VuZGVkLWZ1bGwgaC0yLjUgbXQtMiIsIGNoaWxkcmVuOiBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImJnLWdyZWVuLTUwMCBoLTIuNSByb3VuZGVkLWZ1bGwgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tNTAwIiwgc3R5bGU6IHsgd2lkdGg6IGAke3Byb2dyZXNzfSVgIH0gfSkgfSksIHdvcmtlcnNPbkpvYi5sZW5ndGggPiAwICYmIChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogIm10LTMgcHQtMyBib3JkZXItdCBib3JkZXItZ3JheS03MDAvNTAiLCBjaGlsZHJlbjogX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGZsZXgtd3JhcCBnYXAtMiIsIGNoaWxkcmVuOiB3b3JrZXJzT25Kb2IubWFwKGVtcGxveWVlID0+IChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6IGBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMS41IHRleHQteHMgZm9udC1tZWRpdW0gcHgtMiBweS0xIHJvdW5kZWQtZnVsbCAke2VtcGxveWVlLm9uUGF1c2UgPyAnYmctb3JhbmdlLTkwMC81MCB0ZXh0LW9yYW5nZS0zMDAnIDogJ2JnLWdyZWVuLTkwMC81MCB0ZXh0LWdyZWVuLTMwMCd9YCwgY2hpbGRyZW46IFtlbXBsb3llZS5vblBhdXNlID8gX2pzeChQYXVzZUljb24sIHsgY2xhc3NOYW1lOiAidy0zIGgtMyIgfSkgOiBfanN4KENsb2NrSWNvbiwgeyBjbGFzc05hbWU6ICJ3LTMgaC0zIiB9KSwgX2pzeHMoInNwYW4iLCB7IGNoaWxkcmVuOiBbZW1wbG95ZWUubmFtZSwgIiAiLCBlbXBsb3llZS5vblBhdXNlID8gJyhQYXV6YSknIDogJyddIH0pXSB9LCBlbXBsb3llZS5pZCkpKSB9KSB9KSksIGlzQXV0aGVudGljYXRlZCAmJiBqb2JXb3JrTG9nICYmIE9iamVjdC5rZXlzKGpvYldvcmtMb2cpLmxlbmd0aCA+IDAgJiYgKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogIm10LTMgcHQtMyBib3JkZXItdCBib3JkZXItZ3JheS03MDAvNTAiLCBjaGlsZHJlbjogW19qc3goImg1IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC1icmFuZC10ZXh0LXNlY29uZGFyeSBtYi0yIiwgY2hpbGRyZW46ICJQXHUwMTU5ZWhsZWQgb2RwcmFjb3Zhblx1MDBFOWhvIFx1MDEwRGFzdSIgfSksIF9qc3goInVsIiwgeyBjbGFzc05hbWU6ICJzcGFjZS15LTEgdGV4dC14cyB0ZXh0LWdyYXktMzAwIiwgY2hpbGRyZW46IE9iamVjdC5lbnRyaWVzKGpvYldvcmtMb2cpLm1hcCgoW2VtcGxveWVlSWQsIGhvdXJzXSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtcGxveWVlID0gZW1wbG95ZWVzLmZpbmQoZSA9PiBlLmlkID09PSBwYXJzZUludChlbXBsb3llZUlkKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNFZGl0aW5nVGhpc0xvZyA9IGVkaXRpbmdXb3JrTG9nPy5qb2JJZCA9PT0gam9iLmlkICYmIGVkaXRpbmdXb3JrTG9nPy5lbXBsb3llZUlkID09PSBwYXJzZUludChlbXBsb3llZUlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKF9qc3hzKCJsaSIsIHsgY2xhc3NOYW1lOiAiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIHAtMSByb3VuZGVkLW1kIGhvdmVyOmJnLWdyYXktNzAwLzUwIiwgY2hpbGRyZW46IFtfanN4KCJzcGFuIiwgeyBjaGlsZHJlbjogZW1wbG95ZWU/Lm5hbWUgfHwgJ05lem7DoW3DvSB6YW3Em3N0bmFuZWMnIH0pLCBpc0VkaXRpbmdUaGlzTG9nID8gKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIiwgY2hpbGRyZW46IFtfanN4KCJpbnB1dCIsIHsgdHlwZTogIm51bWJlciIsIHN0ZXA6ICIwLjAxIiwgdmFsdWU6IGVkaXRpbmdXb3JrTG9nLmhvdXJzLCBvbkNoYW5nZTogKGUpID0+IHNldEVkaXRpbmdXb3JrTG9nKHsgLi4uZWRpdGluZ1dvcmtMb2csIGhvdXJzOiBlLnRhcmdldC52YWx1ZSB9KSwgY2xhc3NOYW1lOiAiYmctZ3JheS05MDAgYm9yZGVyIGJvcmRlci1ncmF5LTYwMCByb3VuZGVkLW1kIHB5LTAuNSBweC0xLjUgdGV4dC13aGl0ZSB3LTIwIHRleHQtcmlnaHQgZm9udC1tb25vIiwgYXV0b0ZvY3VzOiB0cnVlIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6IGhhbmRsZVNhdmVXb3JrTG9nLCBjbGFzc05hbWU6ICJwLTEgdGV4dC1ncmVlbi00MDAgaG92ZXI6dGV4dC1ncmVlbi0zMDAiLCBjaGlsZHJlbjogX2pzeChDaGVja0NpcmNsZUljb24sIHsgY2xhc3NOYW1lOiAidy01IGgtNSIgfSkgfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogaGFuZGxlQ2FuY2VsRWRpdFdvcmtMb2csIGNsYXNzTmFtZTogInAtMSB0ZXh0LXJlZC00MDAgaG92ZXI6dGV4dC1yZWQtMzAwIiwgY2hpbGRyZW46IF9qc3goWE1hcmtJY29uLCB7IGNsYXNzTmFtZTogInctNSBoLTUiIH0pIH0pXSB9KSkgOiAoX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiLCBjaGlsZHJlbjogW19qc3hzKCJzcGFuIiwgeyBjbGFzc05hbWU6ICJmb250LW1vbm8gYmctZ3JheS03MDAgcHgtMS41IHB5LTAuNSByb3VuZGVkIiwgY2hpbGRyZW46IFt0eXBlb2YgaG91cnMgPT09ICdudW1iZXInID8gaG91cnMudG9GaXhlZCgyKSA6ICcwLjAwJywgIiBoIl0gfSksIGlzQXV0aGVudGljYXRlZCAmJiAoX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBoYW5kbGVFZGl0V29ya0xvZyhqb2IuaWQsIHBhcnNlSW50KGVtcGxveWVlSWQpKSwgY2xhc3NOYW1lOiAicC0xIHRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC15ZWxsb3ctNDAwIiwgY2hpbGRyZW46IF9qc3goUGVuY2lsSWNvbiwgeyBjbGFzc05hbWU6ICJ3LTQgaC00IiB9KSB9KSldIH0pKV0gfSwgZW1wbG95ZWVJZCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgfSldIH0pKSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAibXQtNCBwdC00IGJvcmRlci10IGJvcmRlci1ncmF5LTcwMC81MCBzcGFjZS15LTQiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNoaWxkcmVuOiBbX2pzeHMoImg1IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC1icmFuZC10ZXh0LXNlY29uZGFyeSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtYi0yIiwgY2hpbGRyZW46IFtfanN4KEZvbGRlckljb24sIHsgY2xhc3NOYW1lOiAidy01IGgtNSIgfSksICJWZVx1MDE1OWVqblx1MDBFOSBkb2t1bWVudHkiXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAic3BhY2UteS0yIiwgY2hpbGRyZW46IFtqb2IucHVibGljRG9jdW1lbnRzLm1hcChkb2MgPT4gKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBiZy1ncmF5LTcwMC81MCBwLTIgcm91bmRlZCIsIGNoaWxkcmVuOiBbX2pzeHMoImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gaGFuZGxlRmlsZUNsaWNrKGRvYyksIGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHRleHQtc20gdGV4dC1ibHVlLTMwMCBob3Zlcjp1bmRlcmxpbmUiLCBjaGlsZHJlbjogW19qc3goRG9jdW1lbnRUZXh0SWNvbiwgeyBjbGFzc05hbWU6ICJ3LTQgaC00IiB9KSwgZG9jLm5hbWVdIH0pLCBpc0F1dGhlbnRpY2F0ZWQgJiYgKF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gaGFuZGxlRmlsZURlbGV0ZShqb2IuaWQsIGRvYy5uYW1lLCBmYWxzZSksIGNsYXNzTmFtZTogInRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC1yZWQtNDAwIiwgY2hpbGRyZW46IF9qc3goVHJhc2hJY29uLCB7IGNsYXNzTmFtZTogInctNCBoLTQiIH0pIH0pKV0gfSwgZG9jLm5hbWUpKSksIGpvYi5wdWJsaWNEb2N1bWVudHMubGVuZ3RoID09PSAwICYmIF9qc3goInAiLCB7IGNsYXNzTmFtZTogInRleHQteHMgdGV4dC1ncmF5LTUwMCBweC0yIiwgY2hpbGRyZW46ICJcdTAxN0RcdTAwRTFkblx1MDBFOSB2ZVx1MDE1OWVqblx1MDBFOSBkb2t1bWVudHkuIiB9KV0gfSksIGlzQXV0aGVudGljYXRlZCAmJiAoX2pzeHMoImxhYmVsIiwgeyBjbGFzc05hbWU6ICJtdC0yIHRleHQtc20gaW5saW5lLWJsb2NrIGN1cnNvci1wb2ludGVyIGJnLWJsdWUtNjAwLzUwIGhvdmVyOmJnLWJsdWUtNjAwLzgwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0xIHB4LTMgcm91bmRlZCIsIGNoaWxkcmVuOiBbIk5haHJcdTAwRTF0IHZlXHUwMTU5ZWpuXHUwMEZEIHNvdWJvciIsIF9qc3goImlucHV0IiwgeyB0eXBlOiAiZmlsZSIsIGNsYXNzTmFtZTogImhpZGRlbiIsIG9uQ2hhbmdlOiAoZSkgPT4gZS50YXJnZXQuZmlsZXMgJiYgaGFuZGxlRmlsZVVwbG9hZChqb2IuaWQsIGUudGFyZ2V0LmZpbGVzWzBdLCBmYWxzZSkgfSldIH0pKV0gfSksIGlzQXV0aGVudGljYXRlZCAmJiAoX2pzeHMoImRpdiIsIHsgY2hpbGRyZW46IFtfanN4cygiaDUiLCB7IGNsYXNzTmFtZTogInRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWJyYW5kLXRleHQtc2Vjb25kYXJ5IGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIG1iLTIiLCBjaGlsZHJlbjogW19qc3goRm9sZGVySWNvbiwgeyBjbGFzc05hbWU6ICJ3LTUgaC01IHRleHQteWVsbG93LTQwMCIgfSksICJTa3J5dFx1MDBFOSBkb2t1bWVudHkgKHBvdXplIHBybyB2ZWRvdWNcdTAwRURobykiXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAic3BhY2UteS0yIiwgY2hpbGRyZW46IFtqb2IucHJpdmF0ZURvY3VtZW50cy5tYXAoZG9jID0+IChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gYmctZ3JheS03MDAvNTAgcC0yIHJvdW5kZWQiLCBjaGlsZHJlbjogW19qc3hzKCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IGhhbmRsZUZpbGVDbGljayhkb2MpLCBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB0ZXh0LXNtIHRleHQteWVsbG93LTMwMCBob3Zlcjp1bmRlcmxpbmUiLCBjaGlsZHJlbjogW19qc3goRG9jdW1lbnRUZXh0SWNvbiwgeyBjbGFzc05hbWU6ICJ3LTQgaC00IiB9KSwgZG9jLm5hbWVdIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IGhhbmRsZUZpbGVEZWxldGUoam9iLmlkLCBkb2MubmFtZSwgdHJ1ZSksIGNsYXNzTmFtZTogInRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC1yZWQtNDAwIiwgY2hpbGRyZW46IF9qc3goVHJhc2hJY29uLCB7IGNsYXNzTmFtZTogInctNCBoLTQiIH0pIH0pXSB9LCBkb2MubmFtZSkpKSwgam9iLnByaXZhdGVEb2N1bWVudHMubGVuZ3RoID09PSAwICYmIF9qc3goInAiLCB7IGNsYXNzTmFtZTogInRleHQteHMgdGV4dC1ncmF5LTUwMCBweC0yIiwgY2hpbGRyZW46ICJcdTAxN0RcdTAwRTFkblx1MDBFOSBza3J5dFx1MDBFOSBkb2t1bWVudHkuIiB9KV0gfSksIF9qc3hzKCJsYWJlbCIsIHsgY2xhc3NOYW1lOiAibXQtMiB0ZXh0LXNtIGlubGluZS1ibG9jayBjdXJzb3ItcG9pbnRlciBiZy15ZWxsb3ctNjAwLzUwIGhvdmVyOmJnLXllbGxvdy02MDAvODAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTEgcHgtMyByb3VuZGVkIiwgY2hpbGRyZW46IFsiTmFoclx1MDBFMXQgc2tyeXRcdTAwRkQgc291Ym9yIiwgX2pzeCgiaW5wdXQiLCB7IHR5cGU6ICJmaWxlIiwgY2xhc3NOYW1lOiAiaGlkZGVuIiwgb25DaGFuZ2U6IChlKSA9PiBlLnRhcmdldC5maWxlcyAmJiBoYW5kbGVGaWxlVXBsb2FkKGpvYi5pZCwgZS50YXJnZXQuZmlsZXNbMF0sIHRydWUpIH0pXSB9KV0gfSkpXSB9KV0gfSwgam9iLmlkKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV0gfSkgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogYGJnLWJyYW5kLXN1cmZhY2UvNTAgYmFja2Ryb3AtYmx1ci1zbSByb3VuZGVkLXhsIHNoYWRvdy0yeGwgcC02IHNtOnAtOCBib3JkZXIgYm9yZGVyLWdyYXktNzAwIHNwYWNlLXktNCB0cmFuc2l0aW9uLW9wYWNpdHkgZHVyYXRpb24tNTAwIGFuaW1hdGUtc2xpZGUtaW5gLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi00IiwgY2hpbGRyZW46IFtfanN4KCJoMyIsIHsgY2xhc3NOYW1lOiAidGV4dC14bCBmb250LWJvbGQiLCBjaGlsZHJlbjogc2VsZWN0ZWRKb2IgPyBgWmFtxJtzdG5hbmNpIHBybzogJHtzZWxlY3RlZEpvYi5uYW1lfWAgOiAnWmFtxJtzdG5hbmNpJyB9KSwgaXNBdXRoZW50aWNhdGVkICYmIChfanN4cygiYnV0dG9uIiwgeyBvbkNsaWNrOiBoYW5kbGVBZGRFbXBsb3llZSwgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgYmctZ3JlZW4tNjAwIGhvdmVyOmJnLWdyZWVuLTUwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS0xLjUgcHgtMyByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIiwgY2hpbGRyZW46IFtfanN4KFVzZXJQbHVzSWNvbiwgeyBjbGFzc05hbWU6ICJ3LTUgaC01IiB9KSwgIlBcdTAxNTlpZGF0IHphbVx1MDExQnN0bmFuY2UiXSB9KSldIH0pLCAhaXNBdXRoZW50aWNhdGVkICYmICFzZWxlY3RlZEpvYklkICYmIChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJyZWxhdGl2ZSBoLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIiLCBjaGlsZHJlbjogW19qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgaW5zZXQtMCBiZy1icmFuZC1zdXJmYWNlLzcwIGJhY2tkcm9wLWJsdXItc20gcm91bmRlZC1sZyB6LTEwIiB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAicmVsYXRpdmUgei0yMCBiZy1ibHVlLTkwMC8zMCBib3JkZXIgYm9yZGVyLWJsdWUtNzAwIHRleHQtYmx1ZS0yMDAgcHgtNiBweS00IHJvdW5kZWQtbGcgdGV4dC1jZW50ZXIgYW5pbWF0ZS1mYWRlLWluIiwgY2hpbGRyZW46IFtfanN4KCJwIiwgeyBjbGFzc05hbWU6ICJmb250LXNlbWlib2xkIHRleHQtbGciLCBjaGlsZHJlbjogIk5lanBydmUgdnliZXJ0ZSB6YWtcdTAwRTF6a3UuIiB9KSwgX2pzeCgicCIsIHsgY2xhc3NOYW1lOiAidGV4dC1zbSBtdC0xIiwgY2hpbGRyZW46ICJQcm8gem9icmF6ZW5cdTAwRUQgbW9cdTAxN0Vub3N0XHUwMEVEIGEgcFx1MDE1OWlobFx1MDBFMVx1MDE2MWVuXHUwMEVEIGsgcHJcdTAwRTFjaSwgcHJvc1x1MDBFRG0sIGtsaWtuXHUwMTFCdGUgbmEgdGxhXHUwMTBEXHUwMEVEdGtvICdWeWJyYXQnIHUgamVkblx1MDBFOSB6ZSB6YWtcdTAwRTF6ZWsgdiBsZXZcdTAwRTltIHBhbmVsdS4iIH0pXSB9KV0gfSkpLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogYHNwYWNlLXktMyAkeyFpc0F1dGhlbnRpY2F0ZWQgJiYgIXNlbGVjdGVkSm9iSWQgPyAnb3BhY2l0eS0yMCBwb2ludGVyLWV2ZW50cy1ub25lJyA6ICcnfWAsIGNoaWxkcmVuOiBlbXBsb3llZXMubWFwKGVtcGxveWVlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1dvcmtpbmcgPSBPYmplY3QudmFsdWVzKGFjdGl2ZVdvcmspLmZsYXQoKS5pbmNsdWRlcyhlbXBsb3llZS5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNXb3JraW5nT25TZWxlY3RlZCA9IHNlbGVjdGVkSm9iSWQgPyBhY3RpdmVXb3JrW3NlbGVjdGVkSm9iSWRdPy5pbmNsdWRlcyhlbXBsb3llZS5pZCkgOiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0VkaXRpbmcgPSBlZGl0aW5nRW1wbG95ZWU/LmlkID09PSBlbXBsb3llZS5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBib251cyA9IGVtcGxveWVlQm9udXNlc1tlbXBsb3llZS5pZF0gfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZWF2ZVN0YXR1cyA9IGlzRW1wbG95ZWVPbkxlYXZlKGVtcGxveWVlLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0Rpc2FibGVkID0gISFsZWF2ZVN0YXR1czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogYHAtMyByb3VuZGVkLWxnIGJvcmRlci0yIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gJHtlbXBsb3llZS5vblBhdXNlID8gJ2JvcmRlci1vcmFuZ2UtNTAwIGJnLW9yYW5nZS05MDAvMzAnIDogaXNXb3JraW5nID8gJ2JvcmRlci1ncmVlbi01MDAgYmctZ3JlZW4tOTAwLzMwJyA6ICdib3JkZXItZ3JheS02MDAgYmctYnJhbmQtc3VyZmFjZSd9ICR7aXNEaXNhYmxlZCA/ICdvcGFjaXR5LTUwJyA6ICcnfWAsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgZmxleC1ncm93IiwgY2hpbGRyZW46IFtfanN4KFVzZXJJY29uLCB7IGNsYXNzTmFtZTogYHctNiBoLTYgJHtpc1dvcmtpbmcgPyAndGV4dC1ncmVlbi00MDAnIDogJ3RleHQtYnJhbmQtdGV4dC1zZWNvbmRhcnknfWAgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXgtZ3JvdyIsIGNoaWxkcmVuOiBbaXNFZGl0aW5nICYmIGlzQXV0aGVudGljYXRlZCA/IChfanN4KCJpbnB1dCIsIHsgdHlwZTogInRleHQiLCB2YWx1ZTogZWRpdGluZ0VtcGxveWVlLm5hbWUsIG9uQ2hhbmdlOiAoZSkgPT4gc2V0RWRpdGluZ0VtcGxveWVlKHsgLi4uZWRpdGluZ0VtcGxveWVlLCBuYW1lOiBlLnRhcmdldC52YWx1ZSB9KSwgb25CbHVyOiBoYW5kbGVTYXZlRW1wbG95ZWVOYW1lLCBvbktleURvd246IChlKSA9PiBlLmtleSA9PT0gJ0VudGVyJyAmJiBoYW5kbGVTYXZlRW1wbG95ZWVOYW1lKCksIGNsYXNzTmFtZTogImJnLWdyYXktNzAwIGJvcmRlciBib3JkZXItZ3JheS01MDAgcm91bmRlZC1tZCBweS0xIHB4LTIgdGV4dC13aGl0ZSB3LWZ1bGwiLCBhdXRvRm9jdXM6IHRydWUgfSkpIDogKF9qc3goImg0IiwgeyBjbGFzc05hbWU6ICJmb250LWJvbGQgdGV4dC1tZCB0ZXh0LWJyYW5kLXRleHQtcHJpbWFyeSIsIGNoaWxkcmVuOiBlbXBsb3llZS5uYW1lIH0pKSwgYm9udXMgPiAwICYmIChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXhzIHRleHQteWVsbG93LTQwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSIsIGNoaWxkcmVuOiBbX2pzeChHaWZ0SWNvbiwgeyBjbGFzc05hbWU6ICJ3LTQgaC00IiB9KSwgIkJvbnVzOiAiLCBib251cy50b0xvY2FsZVN0cmluZygnY3MtQ1onLCB7IG1heGltdW1GcmFjdGlvbkRpZ2l0czogMCB9KSwgIiBLXHUwMTBEIl0gfSkpLCBsZWF2ZVN0YXR1cyAmJiAoX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAidGV4dC14cyB0ZXh0LWN5YW4tNDAwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xIGZvbnQtc2VtaWJvbGQiLCBjaGlsZHJlbjogW2xlYXZlU3RhdHVzLnR5cGUgPT09ICd2YWNhdGlvbicgPyBfanN4KFN1bkljb24sIHsgY2xhc3NOYW1lOiAidy00IGgtNCIgfSkgOiBfanN4KEZhY2VGcm93bkljb24sIHsgY2xhc3NOYW1lOiAidy00IGgtNCIgfSksIGxlYXZlU3RhdHVzLnR5cGUgPT09ICd2YWNhdGlvbicgPyAnTmEgZG92b2xlbsOpJyA6ICdOZW1vYyddIH0pKV0gfSldIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIiwgY2hpbGRyZW46IGlzRWRpdGluZyAmJiBpc0F1dGhlbnRpY2F0ZWQgPyAoX2pzeChfRnJhZ21lbnQsIHsgY2hpbGRyZW46IF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogaGFuZGxlU2F2ZUVtcGxveWVlTmFtZSwgY2xhc3NOYW1lOiAicC0xLjUgdGV4dC1ncmF5LTMwMCBob3Zlcjp0ZXh0LWdyZWVuLTQwMCIsIGNoaWxkcmVuOiBfanN4KENoZWNrQ2lyY2xlSWNvbiwgeyBjbGFzc05hbWU6ICJ3LTYgaC02IiB9KSB9KSB9KSkgOiAoX2pzeHMoX0ZyYWdtZW50LCB7IGNoaWxkcmVuOiBbaXNBdXRoZW50aWNhdGVkICYmIChfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldEVkaXRpbmdFbXBsb3llZSh7IGlkOiBlbXBsb3llZS5pZCwgbmFtZTogZW1wbG95ZWUubmFtZSB9KSwgY2xhc3NOYW1lOiAicC0xLjUgdGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LXllbGxvdy00MDAiLCBjaGlsZHJlbjogX2pzeChQZW5jaWxJY29uLCB7IGNsYXNzTmFtZTogInctNSBoLTUiIH0pIH0pKSwgaXNXb3JraW5nICYmIChfanN4cygiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBoYW5kbGVQYXVzZVRvZ2dsZShlbXBsb3llZS5pZCksIGNsYXNzTmFtZTogYHctMzIgdGV4dC1zbSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMS41IGZvbnQtYm9sZCBweS0yIHB4LTMgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0zMDAgJHtlbXBsb3llZS5vblBhdXNlID8gJ2JnLWJsdWUtNjAwIGhvdmVyOmJnLWJsdWUtNTAwJyA6ICdiZy1ncmF5LTYwMCBob3ZlcjpiZy1ncmF5LTUwMCd9YCwgY2hpbGRyZW46IFtlbXBsb3llZS5vblBhdXNlID8gX2pzeChQbGF5SWNvbiwgeyBjbGFzc05hbWU6ICJ3LTQgaC00IiB9KSA6IF9qc3goUGF1c2VJY29uLCB7IGNsYXNzTmFtZTogInctNCBoLTQiIH0pLCBlbXBsb3llZS5vblBhdXNlID8gJ1Bva3JhxI1vdmF0JyA6ICdQYXV6YSddIH0pKSwgX2pzeHMoImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gaGFuZGxlRW1wbG95ZWVUb2dnbGUoZW1wbG95ZWUuaWQpLCBkaXNhYmxlZDogIXNlbGVjdGVkSm9iSWQgfHwgaXNEaXNhYmxlZCwgY2xhc3NOYW1lOiBgdy0zMiB0ZXh0LXNtIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0xLjUgZm9udC1ib2xkIHB5LTIgcHgtMyByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTMwMCBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZCAke2lzV29ya2luZ09uU2VsZWN0ZWQgPyAnYmctcmVkLTYwMCBob3ZlcjpiZy1yZWQtNTAwJyA6ICdiZy1ncmVlbi02MDAgaG92ZXI6YmctZ3JlZW4tNTAwJ31gLCBjaGlsZHJlbjogW19qc3goQ2xvY2tJY29uLCB7IGNsYXNzTmFtZTogInctNCBoLTQiIH0pLCBpc1dvcmtpbmdPblNlbGVjdGVkID8gJ09kaGzDoXNpdCcgOiAnUMWZaWhsw6FzaXQnXSB9KV0gfSkpIH0pXSB9LCBlbXBsb3llZS5pZCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgfSldIH0pXSB9KSwgam9iVG9Db25maXJtQXJjaGl2ZSAmJiAoX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJmaXhlZCBpbnNldC0wIGJnLWJsYWNrLzYwIGJhY2tkcm9wLWJsdXItc20gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00IHotNTAgYW5pbWF0ZS1mYWRlLWluIiwgY2hpbGRyZW46IF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImJnLWJyYW5kLXN1cmZhY2Ugdy1mdWxsIG1heC13LWxnIHJvdW5kZWQteGwgc2hhZG93LTJ4bCBib3JkZXIgYm9yZGVyLWdyYXktNzAwIiwgY2hpbGRyZW46IFtfanN4KCJoZWFkZXIiLCB7IGNsYXNzTmFtZTogInAtNCBib3JkZXItYiBib3JkZXItZ3JheS03MDAiLCBjaGlsZHJlbjogX2pzeCgiaDIiLCB7IGNsYXNzTmFtZTogInRleHQteGwgZm9udC1ib2xkIiwgY2hpbGRyZW46ICJQb3R2cmRpdCBhcmNoaXZhY2kgemFrXHUwMEUxemt5IiB9KSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAicC02IHNwYWNlLXktNCIsIGNoaWxkcmVuOiBbX2pzeHMoInAiLCB7IGNoaWxkcmVuOiBbIk9wcmF2ZHUgY2hjZXRlIGFyY2hpdm92YXQgemFrXHUwMEUxemt1ICIsIF9qc3hzKCJzdHJvbmciLCB7IGNoaWxkcmVuOiBbIlwiIiwgam9iVG9Db25maXJtQXJjaGl2ZS5uYW1lLCAiXCIiXSB9KSwgIj8iXSB9KSwgX2pzeCgicCIsIHsgY2xhc3NOYW1lOiAidGV4dC1zbSB0ZXh0LWdyYXktNDAwIiwgY2hpbGRyZW46ICJQb2t1ZCB6Ylx1MDBGRHZcdTAwRTEgdiByb3pwb1x1MDEwRHR1IG5hIHByXHUwMEUxY2ksIG1cdTAxNkZcdTAxN0VldGUgcm96ZFx1MDExQmxpdCBib251c3kuIFYgb3BhXHUwMTBEblx1MDBFOW0gcFx1MDE1OVx1MDBFRHBhZFx1MDExQiBidWRlIHpha1x1MDBFMXprYSBwb3V6ZSBhcmNoaXZvdlx1MDBFMW5hLiIgfSksIF9qc3hzKCJkaXYiLCB7IGNoaWxkcmVuOiBbX2pzeCgibGFiZWwiLCB7IGh0bWxGb3I6ICJib251c1JhdGUiLCBjbGFzc05hbWU6ICJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtYnJhbmQtdGV4dC1zZWNvbmRhcnkiLCBjaGlsZHJlbjogIkt1cnogcHJvIGJvbnVzIChuZXBvdmlublx1MDBFOSkiIH0pLCBfanN4KCJpbnB1dCIsIHsgdHlwZTogIm51bWJlciIsIGlkOiAiYm9udXNSYXRlIiwgdmFsdWU6IGJvbnVzUmF0ZSwgb25DaGFuZ2U6IGUgPT4gc2V0Qm9udXNSYXRlKGUudGFyZ2V0LnZhbHVlKSwgY2xhc3NOYW1lOiAibXQtMSBibG9jayB3LWZ1bGwgYmctZ3JheS04MDAgYm9yZGVyIGJvcmRlci1ncmF5LTYwMCByb3VuZGVkLW1kIHNoYWRvdy1zbSBweS0yIHB4LTMgdGV4dC13aGl0ZSIsIHBsYWNlaG9sZGVyOiAiMSIgfSldIH0pXSB9KSwgX2pzeHMoImZvb3RlciIsIHsgY2xhc3NOYW1lOiAicC00IGZsZXgganVzdGlmeS1lbmQgZ2FwLTQgYmctZ3JheS04MDAvNTAgcm91bmRlZC1iLXhsIiwgY2hpbGRyZW46IFtfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldEpvYlRvQ29uZmlybUFyY2hpdmUobnVsbCksIGNsYXNzTmFtZTogImJnLWdyYXktNjAwIHRleHQtd2hpdGUgZm9udC1ib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIiwgY2hpbGRyZW46ICJacnVcdTAxNjFpdCIgfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogaGFuZGxlQ29uZmlybUFyY2hpdmUsIGNsYXNzTmFtZTogImJnLXllbGxvdy02MDAgdGV4dC13aGl0ZSBmb250LWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGciLCBjaGlsZHJlbjogIlBvdHZyZGl0IGFyY2hpdmFjaSIgfSldIH0pXSB9KSB9KSksIGlzT3ZlcnZpZXdWaXNpYmxlICYmIGlzQXV0aGVudGljYXRlZCAmJiAoX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJmaXhlZCBpbnNldC0wIGJnLWJsYWNrLzYwIGJhY2tkcm9wLWJsdXItc20gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00IHotNTAgYW5pbWF0ZS1mYWRlLWluIiwgY2hpbGRyZW46IF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImJnLWJyYW5kLXN1cmZhY2Ugdy1mdWxsIG1heC13LTZ4bCByb3VuZGVkLXhsIHNoYWRvdy0yeGwgYm9yZGVyIGJvcmRlci1ncmF5LTcwMCBtYXgtaC1bOTB2aF0gZmxleCBmbGV4LWNvbCIsIGNoaWxkcmVuOiBbX2pzeHMoImhlYWRlciIsIHsgY2xhc3NOYW1lOiAicC00IGJvcmRlci1iIGJvcmRlci1ncmF5LTcwMCBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIiLCBjaGlsZHJlbjogW19qc3goImgyIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LTJ4bCBmb250LWJvbGQiLCBjaGlsZHJlbjogIkNlbGtvdlx1MDBGRCBwXHUwMTU5ZWhsZWQgemFrXHUwMEUxemVrIiB9KSwgX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBzZXRJc092ZXJ2aWV3VmlzaWJsZShmYWxzZSksIGNsYXNzTmFtZTogInRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC13aGl0ZSB0ZXh0LTN4bCBsZWFkaW5nLW5vbmUiLCBjaGlsZHJlbjogIlx1MDBENyIgfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJwLTQgc206cC02IG92ZXJmbG93LXktYXV0byIsIGNoaWxkcmVuOiBbX2pzeCgiaDMiLCB7IGNsYXNzTmFtZTogInRleHQtbGcgZm9udC1zZW1pYm9sZCBtYi0zIiwgY2hpbGRyZW46ICJBa3Rpdm5cdTAwRUQgemFrXHUwMEUxemt5IiB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJvdmVyZmxvdy14LWF1dG8gYm9yZGVyIGJvcmRlci1ncmF5LTcwMCByb3VuZGVkLWxnIiwgY2hpbGRyZW46IF9qc3hzKCJ0YWJsZSIsIHsgY2xhc3NOYW1lOiAidy1mdWxsIHRleHQtbGVmdCB0ZXh0LXNtIiwgY2hpbGRyZW46IFtfanN4KCJ0aGVhZCIsIHsgY2xhc3NOYW1lOiAiYmctZ3JheS04MDAgdGV4dC1icmFuZC10ZXh0LXNlY29uZGFyeSB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIiLCBjaGlsZHJlbjogX2pzeHMoInRyIiwgeyBjaGlsZHJlbjogW19qc3goInRoIiwgeyBjbGFzc05hbWU6ICJwLTMiLCBjaGlsZHJlbjogIk5cdTAwRTF6ZXYiIH0pLCBfanN4KCJ0aCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46ICJSb3pwb1x1MDEwRGV0IHByXHUwMEUxY2UiIH0pLCBfanN4KCJ0aCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46ICJPZHByYWNvdlx1MDBFMW5vIC8gWmJcdTAwRkR2XHUwMEUxIChoKSIgfSksIF9qc3goInRoIiwgeyBjbGFzc05hbWU6ICJwLTMiLCBjaGlsZHJlbjogIlpieXRlayByb3pwb1x1MDEwRHR1IiB9KSwgX2pzeCgidGgiLCB7IGNsYXNzTmFtZTogInAtMyIsIGNoaWxkcmVuOiAiU3RhdiIgfSksIF9qc3goInRoIiwgeyBjbGFzc05hbWU6ICJwLTMiLCBjaGlsZHJlbjogIkFrY2UiIH0pXSB9KSB9KSwgX2pzeHMoInRib2R5IiwgeyBjbGFzc05hbWU6ICJkaXZpZGUteSBkaXZpZGUtZ3JheS03MDAiLCBjaGlsZHJlbjogW2pvYnMubWFwKGpvYiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JrZWRIb3VycyA9IGpvYi50b3RhbEhvdXJzIC0gam9iLnJlbWFpbmluZ0hvdXJzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFib3JCdWRnZXQgPSBqb2IudG90YWxWYWx1ZSAtIGpvYi5tYXRlcmlhbENvc3Q7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGVudEJ1ZGdldCA9IHdvcmtlZEhvdXJzICogam9iLmhvdXJseVJhdGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdCdWRnZXQgPSBsYWJvckJ1ZGdldCAtIHNwZW50QnVkZ2V0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNBY3RpdmUgPSBhY3RpdmVXb3JrW2pvYi5pZF0gJiYgYWN0aXZlV29ya1tqb2IuaWRdLmxlbmd0aCA+IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc092ZXJCdWRnZXQgPSByZW1haW5pbmdCdWRnZXQgPCAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChfanN4cygidHIiLCB7IGNsYXNzTmFtZTogImhvdmVyOmJnLWJyYW5kLXN1cmZhY2UvNTAiLCBjaGlsZHJlbjogW19qc3goInRkIiwgeyBjbGFzc05hbWU6ICJwLTMgZm9udC1zZW1pYm9sZCIsIGNoaWxkcmVuOiBqb2IubmFtZSB9KSwgX2pzeHMoInRkIiwgeyBjbGFzc05hbWU6ICJwLTMiLCBjaGlsZHJlbjogW2xhYm9yQnVkZ2V0LnRvTG9jYWxlU3RyaW5nKCdjcy1DWicpLCAiIEtcdTAxMEQiXSB9KSwgX2pzeHMoInRkIiwgeyBjbGFzc05hbWU6ICJwLTMiLCBjaGlsZHJlbjogW3dvcmtlZEhvdXJzLnRvRml4ZWQoMiksICIgLyAiLCBqb2IucmVtYWluaW5nSG91cnMudG9GaXhlZCgyKV0gfSksIF9qc3hzKCJ0ZCIsIHsgY2xhc3NOYW1lOiBgcC0zIGZvbnQtYm9sZCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSAke2lzT3ZlckJ1ZGdldCA/ICd0ZXh0LXJlZC00MDAnIDogJyd9YCwgY2hpbGRyZW46IFtpc092ZXJCdWRnZXQgJiYgX2pzeChBbGVydFRyaWFuZ2xlSWNvbiwgeyBjbGFzc05hbWU6ICJ3LTQgaC00IiB9KSwgcmVtYWluaW5nQnVkZ2V0LnRvTG9jYWxlU3RyaW5nKCdjcy1DWicsIHsgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwIH0pLCAiIEtcdTAxMEQiXSB9KSwgX2pzeCgidGQiLCB7IGNsYXNzTmFtZTogInAtMyIsIGNoaWxkcmVuOiBfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6IGBweC0yIHB5LTEgdGV4dC14cyBmb250LWJvbGQgcm91bmRlZC1mdWxsICR7aXNBY3RpdmUgPyAnYmctZ3JlZW4tODAwIHRleHQtZ3JlZW4tMjAwJyA6ICdiZy15ZWxsb3ctODAwIHRleHQteWVsbG93LTIwMCd9YCwgY2hpbGRyZW46IGlzQWN0aXZlID8gJ1Byb2LDrWjDoScgOiAnUG96YXN0YXZlbm8nIH0pIH0pLCBfanN4KCJ0ZCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46IF9qc3hzKCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IGhhbmRsZUFyY2hpdmVKb2Ioam9iKSwgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEuNSB0ZXh0LXhzIGJnLXllbGxvdy02MDAgaG92ZXI6YmcteWVsbG93LTUwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHgtMiBweS0xIHJvdW5kZWQiLCBjaGlsZHJlbjogW19qc3goQXJjaGl2ZUJveEljb24sIHsgY2xhc3NOYW1lOiAidy00IGgtNCIgfSksICJBcmNoaXZvdmF0Il0gfSkgfSldIH0sIGpvYi5pZCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgam9icy5sZW5ndGggPT09IDAgJiYgKF9qc3goInRyIiwgeyBjaGlsZHJlbjogX2pzeCgidGQiLCB7IGNvbFNwYW46IDYsIGNsYXNzTmFtZTogInRleHQtY2VudGVyIHAtNCB0ZXh0LWJyYW5kLXRleHQtc2Vjb25kYXJ5IiwgY2hpbGRyZW46ICJcdTAxN0RcdTAwRTFkblx1MDBFOSBha3Rpdm5cdTAwRUQgemFrXHUwMEUxemt5LiIgfSkgfSkpXSB9KV0gfSkgfSksIF9qc3goImgzIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgbXQtOCBtYi0zIiwgY2hpbGRyZW46ICJBcmNoaXZvdmFuXHUwMEU5IHpha1x1MDBFMXpreSIgfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAib3ZlcmZsb3cteC1hdXRvIGJvcmRlciBib3JkZXItZ3JheS03MDAgcm91bmRlZC1sZyIsIGNoaWxkcmVuOiBfanN4cygidGFibGUiLCB7IGNsYXNzTmFtZTogInctZnVsbCB0ZXh0LWxlZnQgdGV4dC1zbSIsIGNoaWxkcmVuOiBbX2pzeCgidGhlYWQiLCB7IGNsYXNzTmFtZTogImJnLWdyYXktODAwIHRleHQtYnJhbmQtdGV4dC1zZWNvbmRhcnkgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyIiwgY2hpbGRyZW46IF9qc3hzKCJ0ciIsIHsgY2hpbGRyZW46IFtfanN4KCJ0aCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46ICJOXHUwMEUxemV2IiB9KSwgX2pzeCgidGgiLCB7IGNsYXNzTmFtZTogInAtMyIsIGNoaWxkcmVuOiAiUm96cG9cdTAxMERldCBwclx1MDBFMWNlIiB9KSwgX2pzeCgidGgiLCB7IGNsYXNzTmFtZTogInAtMyIsIGNoaWxkcmVuOiAiT2RwcmFjb3ZcdTAwRTFubyAvIENlbGtlbSAoaCkiIH0pLCBfanN4KCJ0aCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46ICJaYnl0ZWsgcm96cG9cdTAxMER0dSIgfSksIF9qc3goInRoIiwgeyBjbGFzc05hbWU6ICJwLTMiLCBjaGlsZHJlbjogIlN0YXYiIH0pXSB9KSB9KSwgX2pzeHMoInRib2R5IiwgeyBjbGFzc05hbWU6ICJkaXZpZGUteSBkaXZpZGUtZ3JheS03MDAiLCBjaGlsZHJlbjogW2FyY2hpdmVkSm9icy5tYXAoam9iID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtlZEhvdXJzID0gam9iLnRvdGFsSG91cnMgLSBqb2IucmVtYWluaW5nSG91cnM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYWJvckJ1ZGdldCA9IGpvYi50b3RhbFZhbHVlIC0gam9iLm1hdGVyaWFsQ29zdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZW50QnVkZ2V0ID0gd29ya2VkSG91cnMgKiBqb2IuaG91cmx5UmF0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ0J1ZGdldCA9IGxhYm9yQnVkZ2V0IC0gc3BlbnRCdWRnZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKF9qc3hzKCJ0ciIsIHsgY2xhc3NOYW1lOiAiaG92ZXI6YmctYnJhbmQtc3VyZmFjZS81MCBvcGFjaXR5LTYwIiwgY2hpbGRyZW46IFtfanN4KCJ0ZCIsIHsgY2xhc3NOYW1lOiAicC0zIGZvbnQtc2VtaWJvbGQiLCBjaGlsZHJlbjogam9iLm5hbWUgfSksIF9qc3hzKCJ0ZCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46IFtsYWJvckJ1ZGdldC50b0xvY2FsZVN0cmluZygnY3MtQ1onKSwgIiBLXHUwMTBEIl0gfSksIF9qc3hzKCJ0ZCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46IFt3b3JrZWRIb3Vycy50b0ZpeGVkKDIpLCAiIC8gIiwgam9iLnRvdGFsSG91cnMudG9GaXhlZCgyKV0gfSksIF9qc3hzKCJ0ZCIsIHsgY2xhc3NOYW1lOiAicC0zIGZvbnQtYm9sZCIsIGNoaWxkcmVuOiBbcmVtYWluaW5nQnVkZ2V0LnRvTG9jYWxlU3RyaW5nKCdjcy1DWicsIHsgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwIH0pLCAiIEtcdTAxMEQiXSB9KSwgX2pzeCgidGQiLCB7IGNsYXNzTmFtZTogInAtMyIsIGNoaWxkcmVuOiBfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJweC0yIHB5LTEgdGV4dC14cyBmb250LWJvbGQgcm91bmRlZC1mdWxsIGJnLWdyYXktNjAwIHRleHQtZ3JheS0yMDAiLCBjaGlsZHJlbjogIkFyY2hpdm92XHUwMEUxbm8iIH0pIH0pXSB9LCBqb2IuaWQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGFyY2hpdmVkSm9icy5sZW5ndGggPT09IDAgJiYgKF9qc3goInRyIiwgeyBjaGlsZHJlbjogX2pzeCgidGQiLCB7IGNvbFNwYW46IDUsIGNsYXNzTmFtZTogInRleHQtY2VudGVyIHAtNCB0ZXh0LWJyYW5kLXRleHQtc2Vjb25kYXJ5IiwgY2hpbGRyZW46ICJcdTAxN0RcdTAwRTFkblx1MDBFOSBhcmNoaXZvdmFuXHUwMEU5IHpha1x1MDBFMXpreS4iIH0pIH0pKV0gfSldIH0pIH0pXSB9KSwgX2pzeCgiZm9vdGVyIiwgeyBjbGFzc05hbWU6ICJwLTQgYm9yZGVyLXQgYm9yZGVyLWdyYXktNzAwIHRleHQtcmlnaHQiLCBjaGlsZHJlbjogX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBzZXRJc092ZXJ2aWV3VmlzaWJsZShmYWxzZSksIGNsYXNzTmFtZTogImJnLWJyYW5kLXByaW1hcnkgdGV4dC13aGl0ZSBmb250LWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctYmx1ZS02MDAgdHJhbnNpdGlvbi1jb2xvcnMiLCBjaGlsZHJlbjogIlphdlx1MDE1OVx1MDBFRHQiIH0pIH0pXSB9KSB9KSksIGlzUGF5cm9sbFZpc2libGUgJiYgaXNBdXRoZW50aWNhdGVkICYmIChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImZpeGVkIGluc2V0LTAgYmctYmxhY2svNjAgYmFja2Ryb3AtYmx1ci1zbSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQgei01MCBhbmltYXRlLWZhZGUtaW4iLCBjaGlsZHJlbjogX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYmctYnJhbmQtc3VyZmFjZSB3LWZ1bGwgbWF4LXctN3hsIHJvdW5kZWQteGwgc2hhZG93LTJ4bCBib3JkZXIgYm9yZGVyLWdyYXktNzAwIG1heC1oLVs5MHZoXSBmbGV4IGZsZXgtY29sIiwgY2hpbGRyZW46IFtfanN4cygiaGVhZGVyIiwgeyBjbGFzc05hbWU6ICJwLTQgYm9yZGVyLWIgYm9yZGVyLWdyYXktNzAwIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2hpbGRyZW46IFtfanN4KCJoMiIsIHsgY2xhc3NOYW1lOiAidGV4dC0yeGwgZm9udC1ib2xkIiwgY2hpbGRyZW46ICJWXHUwMEZEcG9cdTAxMERldCBhIEV2aWRlbmNlIE16ZHkiIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtdC0yIiwgY2hpbGRyZW46IFtfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldFBheXJvbGxWaWV3KCdjdXJyZW50JyksIGNsYXNzTmFtZTogYHB4LTMgcHktMSB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgcm91bmRlZC1tZCAke3BheXJvbGxWaWV3ID09PSAnY3VycmVudCcgPyAnYmctYnJhbmQtcHJpbWFyeSB0ZXh0LXdoaXRlJyA6ICdiZy1ncmF5LTYwMCBob3ZlcjpiZy1ncmF5LTUwMCd9YCwgY2hpbGRyZW46ICJBa3R1XHUwMEUxbG5cdTAwRUQgT2Jkb2JcdTAwRUQiIH0pLCBfanN4cygiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiB7IHNldFBheXJvbGxWaWV3KCdoaXN0b3J5Jyk7IHNldERldGFpbGVkUGF5cm9sbEhpc3RvcnlWaWV3KG51bGwpOyB9LCBjbGFzc05hbWU6IGBweC0zIHB5LTEgdGV4dC1zbSBmb250LXNlbWlib2xkIHJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgJHtwYXlyb2xsVmlldyA9PT0gJ2hpc3RvcnknID8gJ2JnLWJyYW5kLXByaW1hcnkgdGV4dC13aGl0ZScgOiAnYmctZ3JheS02MDAgaG92ZXI6YmctZ3JheS01MDAnfWAsIGNoaWxkcmVuOiBbX2pzeChCb29rT3Blbkljb24sIHsgY2xhc3NOYW1lOiAidy00IGgtNCIgfSksICIgSGlzdG9yaWUgdXpcdTAwRTF2XHUwMTFCcmVrIl0gfSldIH0pXSB9KSwgX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBzZXRJc1BheXJvbGxWaXNpYmxlKGZhbHNlKSwgY2xhc3NOYW1lOiAidGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LXdoaXRlIHRleHQtM3hsIGxlYWRpbmctbm9uZSIsIGNoaWxkcmVuOiAiXHUwMEQ3IiB9KV0gfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAicC00IHNtOnAtNiBvdmVyZmxvdy15LWF1dG8iLCBjaGlsZHJlbjogcGF5cm9sbFZpZXcgPT09ICdjdXJyZW50JyA/IChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogIm92ZXJmbG93LXgtYXV0byBib3JkZXIgYm9yZGVyLWdyYXktNzAwIHJvdW5kZWQtbGciLCBjaGlsZHJlbjogX2pzeHMoInRhYmxlIiwgeyBjbGFzc05hbWU6ICJ3LWZ1bGwgdGV4dC1sZWZ0IHRleHQtc20iLCBjaGlsZHJlbjogW19qc3goInRoZWFkIiwgeyBjbGFzc05hbWU6ICJiZy1ncmF5LTgwMCB0ZXh0LWJyYW5kLXRleHQtc2Vjb25kYXJ5IHVwcGVyY2FzZSB0cmFja2luZy13aWRlciIsIGNoaWxkcmVuOiBfanN4cygidHIiLCB7IGNoaWxkcmVuOiBbX2pzeCgidGgiLCB7IGNsYXNzTmFtZTogInAtMyIsIGNoaWxkcmVuOiAiSm1cdTAwRTlubyBaYW1cdTAxMUJzdG5hbmNlIiB9KSwgX2pzeCgidGgiLCB7IGNsYXNzTmFtZTogInAtMyIsIGNoaWxkcmVuOiAiT2RwcmFjb3ZcdTAwRTFubyAoaCkiIH0pLCBfanN4KCJ0aCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46ICJIb2Rpbm92XHUwMEUxIE16ZGEiIH0pLCBfanN4KCJ0aCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46ICJOXHUwMEUxcm9rIGRvdi4gKGRueSkiIH0pLCBfanN4KCJ0aCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46ICJaYlx1MDBGRHZcdTAwRTEgZG92LiAoZG55KSIgfSksIF9qc3goInRoIiwgeyBjbGFzc05hbWU6ICJwLTMiLCBjaGlsZHJlbjogIkF1dG8uIEJvbnVzeSIgfSksIF9qc3goInRoIiwgeyBjbGFzc05hbWU6ICJwLTMiLCBjaGlsZHJlbjogIk1hbi4gXHUwMEZBcHJhdmEiIH0pLCBfanN4KCJ0aCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46ICJDZWxrb3ZcdTAwRTEgTXpkYSIgfSksIF9qc3goInRoIiwgeyBjbGFzc05hbWU6ICJwLTMiLCBjaGlsZHJlbjogIkFrY2UiIH0pXSB9KSB9KSwgX2pzeCgidGJvZHkiLCB7IGNsYXNzTmFtZTogImRpdmlkZS15IGRpdmlkZS1ncmF5LTcwMCIsIGNoaWxkcmVuOiBlbXBsb3llZXMubWFwKGVtcCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG90YWxIb3VycyA9IHRvdGFsSG91cnNQZXJFbXBsb3llZVtlbXAuaWRdIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYm9udXMgPSBlbXBsb3llZUJvbnVzZXNbZW1wLmlkXSB8fCAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hbnVhbEFkanVzdG1lbnQgPSBtYW51YWxCb251c0FkanVzdG1lbnRzW2VtcC5pZF0gfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3YWdlID0gZW1wLmhvdXJseVdhZ2UgfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b3RhbFNhbGFyeSA9ICh0b3RhbEhvdXJzICogd2FnZSkgKyBib251cyArIG1hbnVhbEFkanVzdG1lbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nTGVhdmUgPSBjYWxjdWxhdGVSZW1haW5pbmdMZWF2ZShlbXApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoX2pzeHMoInRyIiwgeyBjbGFzc05hbWU6ICJob3ZlcjpiZy1icmFuZC1zdXJmYWNlLzUwIiwgY2hpbGRyZW46IFtfanN4KCJ0ZCIsIHsgY2xhc3NOYW1lOiAicC0zIGZvbnQtc2VtaWJvbGQiLCBjaGlsZHJlbjogZW1wLm5hbWUgfSksIF9qc3goInRkIiwgeyBjbGFzc05hbWU6ICJwLTMgdGV4dC1jZW50ZXIiLCBjaGlsZHJlbjogdG90YWxIb3Vycy50b0ZpeGVkKDIpIH0pLCBfanN4KCJ0ZCIsIHsgY2xhc3NOYW1lOiAicC0yIiwgY2hpbGRyZW46IF9qc3goImlucHV0IiwgeyB0eXBlOiAibnVtYmVyIiwgdmFsdWU6IGVtcC5ob3VybHlXYWdlIHx8ICcnLCBvbkNoYW5nZTogZSA9PiBoYW5kbGVXYWdlQ2hhbmdlKGVtcC5pZCwgZS50YXJnZXQudmFsdWUpLCBjbGFzc05hbWU6ICJiZy1ncmF5LTkwMCBib3JkZXIgYm9yZGVyLWdyYXktNjAwIHJvdW5kZWQtbWQgcHktMSBweC0yIHRleHQtd2hpdGUgdy0yNCIgfSkgfSksIF9qc3goInRkIiwgeyBjbGFzc05hbWU6ICJwLTIiLCBjaGlsZHJlbjogX2pzeCgiaW5wdXQiLCB7IHR5cGU6ICJudW1iZXIiLCB2YWx1ZTogZW1wLmFubnVhbExlYXZlRW50aXRsZW1lbnQgfHwgJycsIG9uQ2hhbmdlOiBlID0+IGhhbmRsZUxlYXZlRW50aXRsZW1lbnRDaGFuZ2UoZW1wLmlkLCBlLnRhcmdldC52YWx1ZSksIGNsYXNzTmFtZTogImJnLWdyYXktOTAwIGJvcmRlciBib3JkZXItZ3JheS02MDAgcm91bmRlZC1tZCBweS0xIHB4LTIgdGV4dC13aGl0ZSB3LTI0IiB9KSB9KSwgX2pzeCgidGQiLCB7IGNsYXNzTmFtZTogInAtMyBmb250LWJvbGQgdGV4dC1jZW50ZXIiLCBjaGlsZHJlbjogcmVtYWluaW5nTGVhdmUgfSksIF9qc3hzKCJ0ZCIsIHsgY2xhc3NOYW1lOiAicC0zIHRleHQtY2VudGVyIiwgY2hpbGRyZW46IFtib251cy50b0xvY2FsZVN0cmluZygnY3MtQ1onKSwgIiBLXHUwMTBEIl0gfSksIF9qc3goInRkIiwgeyBjbGFzc05hbWU6ICJwLTIiLCBjaGlsZHJlbjogX2pzeCgiaW5wdXQiLCB7IHR5cGU6ICJudW1iZXIiLCB2YWx1ZTogbWFudWFsQWRqdXN0bWVudCB8fCAnJywgb25DaGFuZ2U6IGUgPT4geyBjb25zdCB2ID0gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpOyBzZXRNYW51YWxCb251c0FkanVzdG1lbnRzKHAgPT4gKHsgLi4ucCwgW2VtcC5pZF06IGlzTmFOKHYpID8gMCA6IHYgfSkpOyB9LCBjbGFzc05hbWU6ICJiZy1ncmF5LTkwMCBib3JkZXIgYm9yZGVyLWdyYXktNjAwIHJvdW5kZWQtbWQgcHktMSBweC0yIHRleHQtd2hpdGUgdy0yOCIgfSkgfSksIF9qc3hzKCJ0ZCIsIHsgY2xhc3NOYW1lOiAicC0zIGZvbnQtYm9sZCB0ZXh0LWxnIHRleHQtZ3JlZW4tNDAwIiwgY2hpbGRyZW46IFt0b3RhbFNhbGFyeS50b0xvY2FsZVN0cmluZygnY3MtQ1onKSwgIiBLXHUwMTBEIl0gfSksIF9qc3goInRkIiwgeyBjbGFzc05hbWU6ICJwLTMiLCBjaGlsZHJlbjogX2pzeHMoImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gc2hvd01vbnRobHlSZXBvcnQoZW1wKSwgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEuNSB0ZXh0LXhzIGJnLWN5YW4tNjAwIGhvdmVyOmJnLWN5YW4tNTAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweC0yIHB5LTEgcm91bmRlZCIsIGNoaWxkcmVuOiBbX2pzeChDYWxlbmRhckRheXNJY29uLCB7IGNsYXNzTmFtZTogInctNCBoLTQiIH0pLCAiIE1cdTAxMUJzXHUwMEVEXHUwMTBEblx1MDBFRCBwXHUwMTU5ZWhsZWQiXSB9KSB9KV0gfSwgZW1wLmlkKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSB9KV0gfSkgfSkpIDogKF9qc3goImRpdiIsIHsgY2hpbGRyZW46IGRldGFpbGVkUGF5cm9sbEhpc3RvcnlWaWV3ID8gKF9qc3hzKCJkaXYiLCB7IGNoaWxkcmVuOiBbX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBzZXREZXRhaWxlZFBheXJvbGxIaXN0b3J5VmlldyhudWxsKSwgY2xhc3NOYW1lOiAibWItNCBiZy1ncmF5LTYwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyIsIGNoaWxkcmVuOiAiXHUyMTkwIFpwXHUwMTFCdCBuYSBoaXN0b3JpaSIgfSksIF9qc3hzKCJoMyIsIHsgY2xhc3NOYW1lOiAidGV4dC14bCBmb250LWJvbGQgbWItMiIsIGNoaWxkcmVuOiBbIkRldGFpbCB1elx1MDBFMXZcdTAxMUJya3kgLSAiLCBuZXcgRGF0ZShkZXRhaWxlZFBheXJvbGxIaXN0b3J5Vmlldy5lbmREYXRlKS50b0xvY2FsZVN0cmluZygnY3MtQ1onLCB7IG1vbnRoOiAnbG9uZycsIHllYXI6ICdudW1lcmljJyB9KV0gfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAib3ZlcmZsb3cteC1hdXRvIGJvcmRlciBib3JkZXItZ3JheS03MDAgcm91bmRlZC1sZyIsIGNoaWxkcmVuOiBfanN4cygidGFibGUiLCB7IGNsYXNzTmFtZTogInctZnVsbCB0ZXh0LWxlZnQgdGV4dC1zbSIsIGNoaWxkcmVuOiBbX2pzeCgidGhlYWQiLCB7IGNsYXNzTmFtZTogImJnLWdyYXktODAwIHRleHQtYnJhbmQtdGV4dC1zZWNvbmRhcnkgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyIiwgY2hpbGRyZW46IF9qc3hzKCJ0ciIsIHsgY2hpbGRyZW46IFtfanN4KCJ0aCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46ICJKbVx1MDBFOW5vIiB9KSwgX2pzeCgidGgiLCB7IGNsYXNzTmFtZTogInAtMyIsIGNoaWxkcmVuOiAiSG9kaW4iIH0pLCBfanN4KCJ0aCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46ICJTYXpiYSIgfSksIF9qc3goInRoIiwgeyBjbGFzc05hbWU6ICJwLTMiLCBjaGlsZHJlbjogIlpiXHUwMEZEdlx1MDBFMSBkb3YuIiB9KSwgX2pzeCgidGgiLCB7IGNsYXNzTmFtZTogInAtMyIsIGNoaWxkcmVuOiAiQm9udXN5IiB9KSwgX2pzeCgidGgiLCB7IGNsYXNzTmFtZTogInAtMyIsIGNoaWxkcmVuOiAiXHUwMERBcHJhdnkiIH0pLCBfanN4KCJ0aCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46ICJDZWxrZW0iIH0pXSB9KSB9KSwgX2pzeCgidGJvZHkiLCB7IGNoaWxkcmVuOiBkZXRhaWxlZFBheXJvbGxIaXN0b3J5Vmlldy5yZWNvcmRzLm1hcChyZWMgPT4gKF9qc3hzKCJ0ciIsIHsgY2hpbGRyZW46IFtfanN4KCJ0ZCIsIHsgY2xhc3NOYW1lOiAicC0zIGZvbnQtc2VtaWJvbGQiLCBjaGlsZHJlbjogcmVjLmVtcGxveWVlTmFtZSB9KSwgX2pzeCgidGQiLCB7IGNsYXNzTmFtZTogInAtMyIsIGNoaWxkcmVuOiByZWMudG90YWxIb3Vycy50b0ZpeGVkKDIpIH0pLCBfanN4cygidGQiLCB7IGNsYXNzTmFtZTogInAtMyIsIGNoaWxkcmVuOiBbcmVjLmhvdXJseVdhZ2UudG9Mb2NhbGVTdHJpbmcoKSwgIiBLXHUwMTBEIl0gfSksIF9qc3hzKCJ0ZCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46IFtyZWMucmVtYWluaW5nTGVhdmUsICIgZCJdIH0pLCBfanN4cygidGQiLCB7IGNsYXNzTmFtZTogInAtMyIsIGNoaWxkcmVuOiBbcmVjLmF1dG9Cb251cy50b0xvY2FsZVN0cmluZygpLCAiIEtcdTAxMEQiXSB9KSwgX2pzeHMoInRkIiwgeyBjbGFzc05hbWU6ICJwLTMiLCBjaGlsZHJlbjogW3JlYy5tYW51YWxCb251cy50b0xvY2FsZVN0cmluZygpLCAiIEtcdTAxMEQiXSB9KSwgX2pzeHMoInRkIiwgeyBjbGFzc05hbWU6ICJwLTMgZm9udC1ib2xkIiwgY2hpbGRyZW46IFtyZWMudG90YWxTYWxhcnkudG9Mb2NhbGVTdHJpbmcoKSwgIiBLXHUwMTBEIl0gfSldIH0sIHJlYy5lbXBsb3llZUlkKSkpIH0pXSB9KSB9KV0gfSkpIDogKF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAic3BhY2UteS0zIiwgY2hpbGRyZW46IHBheXJvbGxIaXN0b3J5Lmxlbmd0aCA9PT0gMCA/IChfanN4KCJwIiwgeyBjaGlsZHJlbjogIlx1MDE3RFx1MDBFMWRuXHUwMEU5IGhpc3Rvcmlja1x1MDBFOSB6XHUwMEUxem5hbXkuIiB9KSkgOiAocGF5cm9sbEhpc3RvcnkubWFwKHBlcmlvZCA9PiAoX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYmctZ3JheS04MDAgcC0zIHJvdW5kZWQtbGcgZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjaGlsZHJlbjogW19qc3hzKCJwIiwgeyBjbGFzc05hbWU6ICJmb250LWJvbGQiLCBjaGlsZHJlbjogWyJVelx1MDBFMXZcdTAxMUJya2EgemEgIiwgbmV3IERhdGUocGVyaW9kLmVuZERhdGUpLnRvTG9jYWxlU3RyaW5nKCdjcy1DWicsIHsgbW9udGg6ICdsb25nJywgeWVhcjogJ251bWVyaWMnIH0pXSB9KSwgX2pzeHMoInAiLCB7IGNsYXNzTmFtZTogInRleHQteHMgdGV4dC1ncmF5LTQwMCIsIGNoaWxkcmVuOiBbIkhvZGlueTogIiwgcGVyaW9kLnRvdGFsSG91cnMudG9GaXhlZCgyKSwgIiB8IE16ZHk6ICIsIHBlcmlvZC50b3RhbFdhZ2VzLnRvTG9jYWxlU3RyaW5nKCdjcy1DWicpLCAiIEtcdTAxMEQiXSB9KV0gfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gc2V0RGV0YWlsZWRQYXlyb2xsSGlzdG9yeVZpZXcocGVyaW9kKSwgY2xhc3NOYW1lOiAiYmctYmx1ZS02MDAgdGV4dC13aGl0ZSBmb250LWJvbGQgcHktMSBweC0zIHJvdW5kZWQtbGciLCBjaGlsZHJlbjogIlpvYnJheml0IGRldGFpbCIgfSldIH0sIHBlcmlvZC5pZCkpKSkgfSkpIH0pKSB9KSwgcGF5cm9sbFZpZXcgPT09ICdjdXJyZW50JyAmJiAoX2pzeHMoImZvb3RlciIsIHsgY2xhc3NOYW1lOiAicC00IGJvcmRlci10IGJvcmRlci1ncmF5LTcwMCBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIiLCBjaGlsZHJlbjogW19qc3goImJ1dHRvbiIsIHsgb25DbGljazogaGFuZGxlQ2xvc2VQYXlyb2xsUGVyaW9kLCBjbGFzc05hbWU6ICJiZy1yZWQtNzAwIHRleHQtd2hpdGUgZm9udC1ib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLXJlZC02MDAgdHJhbnNpdGlvbi1jb2xvcnMiLCBjaGlsZHJlbjogIlV6YXZcdTAxNTlcdTAwRUR0IGEgYXJjaGl2b3ZhdCBvYmRvYlx1MDBFRCIgfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gc2V0SXNQYXlyb2xsVmlzaWJsZShmYWxzZSksIGNsYXNzTmFtZTogImJnLWJyYW5kLXByaW1hcnkgdGV4dC13aGl0ZSBmb250LWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctYmx1ZS02MDAgdHJhbnNpdGlvbi1jb2xvcnMiLCBjaGlsZHJlbjogIlphdlx1MDE1OVx1MDBFRHQiIH0pXSB9KSldIH0pIH0pKSwgc2hvd1BheXJvbGxTdW1tYXJ5ICYmIChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImZpeGVkIGluc2V0LTAgYmctYmxhY2svNjAgYmFja2Ryb3AtYmx1ci1zbSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQgei1bNzBdIiwgY2hpbGRyZW46IF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImJnLWJyYW5kLXN1cmZhY2Ugdy1mdWxsIG1heC13LTJ4bCByb3VuZGVkLXhsIHNoYWRvdy0yeGwgYm9yZGVyIGJvcmRlci1ncmF5LTcwMCIsIGNoaWxkcmVuOiBbX2pzeCgiaGVhZGVyIiwgeyBjbGFzc05hbWU6ICJwLTQgYm9yZGVyLWIgYm9yZGVyLWdyYXktNzAwIiwgY2hpbGRyZW46IF9qc3goImgyIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXhsIGZvbnQtYm9sZCIsIGNoaWxkcmVuOiAiU291aHJuIHV6YXZcdTAwRURyYW5cdTAwRTlobyBvYmRvYlx1MDBFRCIgfSkgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInAtNiBzcGFjZS15LTQiLCBjaGlsZHJlbjogW19qc3goInAiLCB7IGNoaWxkcmVuOiAiQ2h5c3RcdTAwRTF0ZSBzZSB1emF2XHUwMTU5XHUwMEVEdCBtemRvdlx1MDBFOSBvYmRvYlx1MDBFRC4gUG8gcG90dnJ6ZW5cdTAwRUQgYnVkb3UgZGF0YSBhcmNoaXZvdlx1MDBFMW5hIGEgdnludWxvdlx1MDBFMW5hIHBybyBkYWxcdTAxNjFcdTAwRUQgb2Jkb2JcdTAwRUQuIiB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYmctZ3JheS04MDAgcC00IHJvdW5kZWQtbGcgdGV4dC1jZW50ZXIiLCBjaGlsZHJlbjogW19qc3goInAiLCB7IGNsYXNzTmFtZTogInRleHQtYnJhbmQtdGV4dC1zZWNvbmRhcnkiLCBjaGlsZHJlbjogIkNlbGtlbSBvZHByYWNvdmFuXHUwMEU5IGhvZGlueSIgfSksIF9qc3goInAiLCB7IGNsYXNzTmFtZTogInRleHQtM3hsIGZvbnQtYm9sZCIsIGNoaWxkcmVuOiBzaG93UGF5cm9sbFN1bW1hcnkudG90YWxIb3Vycy50b0ZpeGVkKDIpIH0pLCBfanN4KCJwIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWJyYW5kLXRleHQtc2Vjb25kYXJ5IG10LTIiLCBjaGlsZHJlbjogIkNlbGtvdlx1MDBFOSBtemRvdlx1MDBFOSBuXHUwMEUxa2xhZHkiIH0pLCBfanN4cygicCIsIHsgY2xhc3NOYW1lOiAidGV4dC0zeGwgZm9udC1ib2xkIHRleHQtZ3JlZW4tNDAwIiwgY2hpbGRyZW46IFtzaG93UGF5cm9sbFN1bW1hcnkudG90YWxXYWdlcy50b0xvY2FsZVN0cmluZygnY3MtQ1onKSwgIiBLXHUwMTBEIl0gfSldIH0pXSB9KSwgX2pzeHMoImZvb3RlciIsIHsgY2xhc3NOYW1lOiAicC00IGZsZXgganVzdGlmeS1lbmQgZ2FwLTQgYmctZ3JheS04MDAvNTAgcm91bmRlZC1iLXhsIiwgY2hpbGRyZW46IFtfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldFNob3dQYXlyb2xsU3VtbWFyeShudWxsKSwgY2xhc3NOYW1lOiAiYmctZ3JheS02MDAgdGV4dC13aGl0ZSBmb250LWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGciLCBjaGlsZHJlbjogIlpydVx1MDE2MWl0IiB9KSwgX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiBoYW5kbGVDb25maXJtUGF5cm9sbENsb3NlLCBjbGFzc05hbWU6ICJiZy1yZWQtNjAwIHRleHQtd2hpdGUgZm9udC1ib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIiwgY2hpbGRyZW46ICJQb3R2cmRpdCBhIHV6YXZcdTAxNTlcdTAwRUR0IiB9KV0gfSldIH0pIH0pKSwgaXNNb250aGx5T3ZlcnZpZXdWaXNpYmxlICYmIHNlbGVjdGVkRW1wbG95ZWVGb3JSZXBvcnQgJiYgKF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiZml4ZWQgaW5zZXQtMCBiZy1ibGFjay82MCBiYWNrZHJvcC1ibHVyLXNtIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNCB6LVs2MF0gYW5pbWF0ZS1mYWRlLWluIiwgY2hpbGRyZW46IF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImJnLWJyYW5kLXN1cmZhY2Ugdy1mdWxsIG1heC13LTZ4bCByb3VuZGVkLXhsIHNoYWRvdy0yeGwgYm9yZGVyIGJvcmRlci1ncmF5LTcwMCBtYXgtaC1bOTB2aF0gZmxleCBmbGV4LWNvbCIsIGNoaWxkcmVuOiBbX2pzeHMoImhlYWRlciIsIHsgY2xhc3NOYW1lOiAicC00IGJvcmRlci1iIGJvcmRlci1ncmF5LTcwMCBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNoaWxkcmVuOiBbX2pzeCgiaDIiLCB7IGNsYXNzTmFtZTogInRleHQtMnhsIGZvbnQtYm9sZCIsIGNoaWxkcmVuOiAiTVx1MDExQnNcdTAwRURcdTAxMERuXHUwMEVEIHBcdTAxNTllaGxlZCBwclx1MDBFMWNlIiB9KSwgX2pzeCgicCIsIHsgY2xhc3NOYW1lOiAidGV4dC1icmFuZC10ZXh0LXNlY29uZGFyeSIsIGNoaWxkcmVuOiBzZWxlY3RlZEVtcGxveWVlRm9yUmVwb3J0Lm5hbWUgfSldIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldElzTW9udGhseU92ZXJ2aWV3VmlzaWJsZShmYWxzZSksIGNsYXNzTmFtZTogInRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC13aGl0ZSB0ZXh0LTN4bCBsZWFkaW5nLW5vbmUiLCBjaGlsZHJlbjogIlx1MDBENyIgfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJwLTQgc206cC02IG92ZXJmbG93LXktYXV0byBzcGFjZS15LTYiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBiZy1ncmF5LTgwMCBwLTIgcm91bmRlZC1sZyIsIGNoaWxkcmVuOiBbX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBjaGFuZ2VSZXBvcnRNb250aCgtMSksIGNsYXNzTmFtZTogInB4LTMgcHktMSBiZy1ncmF5LTYwMCByb3VuZGVkIiwgY2hpbGRyZW46ICI8IiB9KSwgX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAiZm9udC1ib2xkIHRleHQtbGciLCBjaGlsZHJlbjogcmVwb3J0RGF0ZS50b0xvY2FsZVN0cmluZygnY3MtQ1onLCB7IG1vbnRoOiAnbG9uZycsIHllYXI6ICdudW1lcmljJyB9KSB9KSwgX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBjaGFuZ2VSZXBvcnRNb250aCgxKSwgY2xhc3NOYW1lOiAicHgtMyBweS0xIGJnLWdyYXktNjAwIHJvdW5kZWQiLCBjaGlsZHJlbjogIj4iIH0pXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBnYXAtNiIsIGNoaWxkcmVuOiBbX2pzeChCYXJDaGFydCwgeyBzdGFja2VkRGF0YTogZW1wbG95ZWVEYWlseUNoYXJ0RGF0YSwgdGl0bGU6ICJEZW5uXHUwMEVEIG9kcHJhY292YW5cdTAwRTkgaG9kaW55IGEgcGF1enkiIH0pLCBfanN4KEJhckNoYXJ0LCB7IHN0YWNrZWREYXRhOiBlbXBsb3llZUpvYnNDaGFydERhdGEsIHRpdGxlOiAiUm96bG9cdTAxN0Vlblx1MDBFRCBwclx1MDBFMWNlIGEgcGF1eiBuYSB6YWtcdTAwRTF6a1x1MDBFMWNoIiB9KV0gfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAib3ZlcmZsb3cteC1hdXRvIGJvcmRlciBib3JkZXItZ3JheS03MDAgcm91bmRlZC1sZyIsIGNoaWxkcmVuOiBfanN4cygidGFibGUiLCB7IGNsYXNzTmFtZTogInctZnVsbCB0ZXh0LWxlZnQgdGV4dC1zbSIsIGNoaWxkcmVuOiBbX2pzeCgidGhlYWQiLCB7IGNsYXNzTmFtZTogImJnLWdyYXktODAwIHRleHQtYnJhbmQtdGV4dC1zZWNvbmRhcnkgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyIiwgY2hpbGRyZW46IF9qc3hzKCJ0ciIsIHsgY2hpbGRyZW46IFtfanN4KCJ0aCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46ICJEYXR1bSIgfSksIF9qc3goInRoIiwgeyBjbGFzc05hbWU6ICJwLTMiLCBjaGlsZHJlbjogIlpha1x1MDBFMXpreSIgfSksIF9qc3goInRoIiwgeyBjbGFzc05hbWU6ICJwLTMgdGV4dC1yaWdodCIsIGNoaWxkcmVuOiAiQ2Vsa2VtIGhvZGluIChiZXogcGF1eikiIH0pXSB9KSB9KSwgX2pzeHMoInRib2R5IiwgeyBjbGFzc05hbWU6ICJkaXZpZGUteSBkaXZpZGUtZ3JheS03MDAiLCBjaGlsZHJlbjogW21vbnRobHlEYXRhLm1hcCgoeyBkYXksIGxvZyB9KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b3RhbERhaWx5SG91cnMgPSBPYmplY3QudmFsdWVzKGxvZz8ud29yayB8fCB7fSkucmVkdWNlKChzdW0sIGgpID0+IHN1bSArIGgsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNPdmVydGltZSA9IHRvdGFsRGFpbHlIb3VycyA+IDk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKF9qc3hzKCJ0ciIsIHsgY2xhc3NOYW1lOiBgaG92ZXI6YmctYnJhbmQtc3VyZmFjZS81MCAke2lzT3ZlcnRpbWUgPyAnYmctcmVkLTkwMC8zMCcgOiAnJ31gLCBjaGlsZHJlbjogW19qc3hzKCJ0ZCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46IFtkYXksICIuICIsIHJlcG9ydERhdGUudG9Mb2NhbGVTdHJpbmcoJ2NzLUNaJywgeyBtb250aDogJ2xvbmcnLCB5ZWFyOiAnbnVtZXJpYycgfSldIH0pLCBfanN4KCJ0ZCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46IF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBmbGV4LWNvbCBnYXAtMSIsIGNoaWxkcmVuOiBPYmplY3QuZW50cmllcyhsb2c/LndvcmsgfHwge30pLm1hcCgoW2pvYklkLCBob3Vyc10pID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgam9iID0gam9icy5maW5kKGogPT4gai5pZCA9PT0gcGFyc2VJbnQoam9iSWQpKSB8fCBhcmNoaXZlZEpvYnMuZmluZChqID0+IGouaWQgPT09IHBhcnNlSW50KGpvYklkKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfanN4cygic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC14cyIsIGNoaWxkcmVuOiBbam9iPy5uYW1lIHx8ICdOZXpuw6Ftw6EgemFrw6F6a2EnLCAiOiAiLCBob3Vycy50b0ZpeGVkKDIpLCAiaCJdIH0sIGpvYklkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSB9KSB9KSwgX2pzeCgidGQiLCB7IGNsYXNzTmFtZTogYHAtMyB0ZXh0LXJpZ2h0IGZvbnQtYm9sZCAke2lzT3ZlcnRpbWUgPyAndGV4dC1yZWQtNDAwJyA6ICcnfWAsIGNoaWxkcmVuOiBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGp1c3RpZnktZW5kIGl0ZW1zLWNlbnRlciBnYXAtMiIsIGNoaWxkcmVuOiBbaXNPdmVydGltZSAmJiBfanN4KEFsZXJ0VHJpYW5nbGVJY29uLCB7IGNsYXNzTmFtZTogInctNCBoLTQiIH0pLCBfanN4KCJzcGFuIiwgeyBjaGlsZHJlbjogdG90YWxEYWlseUhvdXJzLnRvRml4ZWQoMikgfSldIH0pIH0pXSB9LCBkYXkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIG1vbnRobHlEYXRhLmxlbmd0aCA9PT0gMCAmJiAoX2pzeCgidHIiLCB7IGNoaWxkcmVuOiBfanN4KCJ0ZCIsIHsgY29sU3BhbjogMywgY2xhc3NOYW1lOiAidGV4dC1jZW50ZXIgcC00IHRleHQtYnJhbmQtdGV4dC1zZWNvbmRhcnkiLCBjaGlsZHJlbjogIlx1MDE3RFx1MDBFMWRuXHUwMEU5IHpcdTAwRTF6bmFteSBwcm8gdGVudG8gbVx1MDExQnNcdTAwRURjLiIgfSkgfSkpXSB9KSwgX2pzeCgidGZvb3QiLCB7IGNsYXNzTmFtZTogImJnLWdyYXktODAwIGZvbnQtYm9sZCIsIGNoaWxkcmVuOiBfanN4cygidHIiLCB7IGNoaWxkcmVuOiBbX2pzeCgidGQiLCB7IGNvbFNwYW46IDIsIGNsYXNzTmFtZTogInAtMyB0ZXh0LXJpZ2h0IiwgY2hpbGRyZW46ICJDZWxrZW0gemEgbVx1MDExQnNcdTAwRURjOiIgfSksIF9qc3goInRkIiwgeyBjbGFzc05hbWU6ICJwLTMgdGV4dC1yaWdodCB0ZXh0LWxnIiwgY2hpbGRyZW46IG1vbnRobHlEYXRhLnJlZHVjZSgoc3VtLCBkYXkpID0+IHN1bSArIE9iamVjdC52YWx1ZXMoZGF5LmxvZz8ud29yayB8fCB7fSkucmVkdWNlKChzLCBoKSA9PiBzICsgaCwgMCksIDApLnRvRml4ZWQoMikgfSldIH0pIH0pXSB9KSB9KV0gfSldIH0pIH0pKSwgaXNDaGFydHNWaXNpYmxlICYmIGlzQXV0aGVudGljYXRlZCAmJiAoX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJmaXhlZCBpbnNldC0wIGJnLWJsYWNrLzYwIGJhY2tkcm9wLWJsdXItc20gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00IHotWzYwXSBhbmltYXRlLWZhZGUtaW4iLCBjaGlsZHJlbjogX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYmctYnJhbmQtc3VyZmFjZSB3LWZ1bGwgbWF4LXctNnhsIHJvdW5kZWQteGwgc2hhZG93LTJ4bCBib3JkZXIgYm9yZGVyLWdyYXktNzAwIG1heC1oLVs5MHZoXSBmbGV4IGZsZXgtY29sIiwgY2hpbGRyZW46IFtfanN4cygiaGVhZGVyIiwgeyBjbGFzc05hbWU6ICJwLTQgYm9yZGVyLWIgYm9yZGVyLWdyYXktNzAwIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2hpbGRyZW46IFtfanN4KCJoMiIsIHsgY2xhc3NOYW1lOiAidGV4dC0yeGwgZm9udC1ib2xkIiwgY2hpbGRyZW46ICJGaXJlbW5cdTAwRUQgR3JhZnkiIH0pLCBfanN4KCJwIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWJyYW5kLXRleHQtc2Vjb25kYXJ5IiwgY2hpbGRyZW46ICJQXHUwMTU5ZWhsZWQgdlx1MDBGRGtvbnUgYSB2eXRcdTAwRURcdTAxN0Vlblx1MDBFRCIgfSldIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldElzQ2hhcnRzVmlzaWJsZShmYWxzZSksIGNsYXNzTmFtZTogInRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC13aGl0ZSB0ZXh0LTN4bCBsZWFkaW5nLW5vbmUiLCBjaGlsZHJlbjogIlx1MDBENyIgfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJwLTQgc206cC02IG92ZXJmbG93LXktYXV0byBzcGFjZS15LTYiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi00IGJnLWdyYXktODAwIHAtMiByb3VuZGVkLWxnIGZsZXgtd3JhcCBnYXAtMiIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiLCBjaGlsZHJlbjogW19qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gY2hhbmdlUmVwb3J0TW9udGgoLTEpLCBjbGFzc05hbWU6ICJweC0zIHB5LTEgYmctZ3JheS02MDAgcm91bmRlZCIsIGNoaWxkcmVuOiAiPCIgfSksIF9qc3goInNwYW4iLCB7IGNsYXNzTmFtZTogImZvbnQtYm9sZCB0ZXh0LWxnIiwgY2hpbGRyZW46IHJlcG9ydERhdGUudG9Mb2NhbGVTdHJpbmcoJ2NzLUNaJywgeyBtb250aDogJ2xvbmcnLCB5ZWFyOiAnbnVtZXJpYycgfSkgfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gY2hhbmdlUmVwb3J0TW9udGgoMSksIGNsYXNzTmFtZTogInB4LTMgcHktMSBiZy1ncmF5LTYwMCByb3VuZGVkIiwgY2hpbGRyZW46ICI+IiB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGJnLWJyYW5kLXN1cmZhY2UgcC0xIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ncmF5LTcwMCIsIGNoaWxkcmVuOiBbX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBzZXRDaGFydFZpZXcoJ2hvdXJzJyksIGNsYXNzTmFtZTogYHB4LTMgcHktMS41IHRleHQtc20gZm9udC1zZW1pYm9sZCByb3VuZGVkLW1kIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHRyYW5zaXRpb24tY29sb3JzICR7Y2hhcnRWaWV3ID09PSAnaG91cnMnID8gJ2JnLWJyYW5kLXByaW1hcnkgdGV4dC13aGl0ZScgOiAnaG92ZXI6YmctZ3JheS03MDAnfWAsIGNoaWxkcmVuOiAiSG9kaW55IiB9KSwgX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBzZXRDaGFydFZpZXcoJ2N6aycpLCBjbGFzc05hbWU6IGBweC0zIHB5LTEuNSB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgcm91bmRlZC1tZCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB0cmFuc2l0aW9uLWNvbG9ycyAke2NoYXJ0VmlldyA9PT0gJ2N6aycgPyAnYmctYnJhbmQtcHJpbWFyeSB0ZXh0LXdoaXRlJyA6ICdob3ZlcjpiZy1ncmF5LTcwMCd9YCwgY2hpbGRyZW46ICJLb3J1bnkiIH0pXSB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTYiLCBjaGlsZHJlbjogW19qc3goQmFyQ2hhcnQsIHsgc3RhY2tlZERhdGE6IGNvbXBhbnlDaGFydERhdGEuZW1wbG95ZWVQZXJmb3JtYW5jZSwgdGl0bGU6IGBWw71rb24gemFtxJtzdG5hbmPFryAoJHtjaGFydFZpZXcgPT09ICdjemsnID8gJ0vEjScgOiAnaG9kaW55J30pYCwgdW5pdDogY2hhcnRWaWV3ID09PSAnY3prJyA/ICdLxI0nIDogJ2gnIH0pLCBfanN4KEJhckNoYXJ0LCB7IHN0YWNrZWREYXRhOiBjb21wYW55Q2hhcnREYXRhLmpvYldvcmtsb2FkLCB0aXRsZTogYFZ5dMOtxb5lbsOtIHpha8OhemVrICgke2NoYXJ0VmlldyA9PT0gJ2N6aycgPyAnS8SNJyA6ICdob2RpbnknfSlgLCB1bml0OiBjaGFydFZpZXcgPT09ICdjemsnID8gJ0vEjScgOiAnaCcgfSldIH0pXSB9KV0gfSkgfSkpLCBpc0xlYXZlUGxhbm5lclZpc2libGUgJiYgaXNBdXRoZW50aWNhdGVkICYmIChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImZpeGVkIGluc2V0LTAgYmctYmxhY2svNjAgYmFja2Ryb3AtYmx1ci1zbSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQgei1bNjBdIGFuaW1hdGUtZmFkZS1pbiIsIGNoaWxkcmVuOiBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJiZy1icmFuZC1zdXJmYWNlIHctZnVsbCBtYXgtdy00eGwgcm91bmRlZC14bCBzaGFkb3ctMnhsIGJvcmRlciBib3JkZXItZ3JheS03MDAgbWF4LWgtWzkwdmhdIGZsZXggZmxleC1jb2wiLCBjaGlsZHJlbjogW19qc3hzKCJoZWFkZXIiLCB7IGNsYXNzTmFtZTogInAtNCBib3JkZXItYiBib3JkZXItZ3JheS03MDAgZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIiwgY2hpbGRyZW46IFtfanN4KCJoMiIsIHsgY2xhc3NOYW1lOiAidGV4dC0yeGwgZm9udC1ib2xkIiwgY2hpbGRyZW46ICJQbFx1MDBFMW5vdlx1MDBFMW5cdTAwRUQgTmVwXHUwMTU5XHUwMEVEdG9tbm9zdGkiIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldElzTGVhdmVQbGFubmVyVmlzaWJsZShmYWxzZSksIGNsYXNzTmFtZTogInRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC13aGl0ZSB0ZXh0LTN4bCBsZWFkaW5nLW5vbmUiLCBjaGlsZHJlbjogIlx1MDBENyIgfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJwLTQgc206cC02IG92ZXJmbG93LXktYXV0byBzcGFjZS15LTYiLCBjaGlsZHJlbjogW19qc3hzKCJmb3JtIiwgeyBvblN1Ym1pdDogaGFuZGxlQWRkTGVhdmUsIGNsYXNzTmFtZTogImJnLWdyYXktODAwIHAtNCByb3VuZGVkLWxnIHNwYWNlLXktNCIsIGNoaWxkcmVuOiBbX2pzeCgiaDMiLCB7IGNsYXNzTmFtZTogInRleHQtbGcgZm9udC1zZW1pYm9sZCIsIGNoaWxkcmVuOiAiUFx1MDE1OWlkYXQgbm92XHUwMEZEIHpcdTAwRTF6bmFtIiB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNCBnYXAtNCIsIGNoaWxkcmVuOiBbX2pzeHMoInNlbGVjdCIsIHsgbmFtZTogImVtcGxveWVlSWQiLCByZXF1aXJlZDogdHJ1ZSwgY2xhc3NOYW1lOiAiYmctZ3JheS03MDAgYm9yZGVyIGJvcmRlci1ncmF5LTYwMCByb3VuZGVkLW1kIHB5LTIgcHgtMyB0ZXh0LXdoaXRlIiwgY2hpbGRyZW46IFtfanN4KCJvcHRpb24iLCB7IHZhbHVlOiAiIiwgY2hpbGRyZW46ICJWeWJlcnRlIHphbVx1MDExQnN0bmFuY2UiIH0pLCBlbXBsb3llZXMubWFwKGUgPT4gX2pzeCgib3B0aW9uIiwgeyB2YWx1ZTogZS5pZCwgY2hpbGRyZW46IGUubmFtZSB9LCBlLmlkKSldIH0pLCBfanN4cygic2VsZWN0IiwgeyBuYW1lOiAidHlwZSIsIHJlcXVpcmVkOiB0cnVlLCBjbGFzc05hbWU6ICJiZy1ncmF5LTcwMCBib3JkZXIgYm9yZGVyLWdyYXktNjAwIHJvdW5kZWQtbWQgcHktMiBweC0zIHRleHQtd2hpdGUiLCBjaGlsZHJlbjogW19qc3goIm9wdGlvbiIsIHsgdmFsdWU6ICJ2YWNhdGlvbiIsIGNoaWxkcmVuOiAiRG92b2xlblx1MDBFMSIgfSksIF9qc3goIm9wdGlvbiIsIHsgdmFsdWU6ICJzaWNrIiwgY2hpbGRyZW46ICJOZW1vYyIgfSldIH0pLCBfanN4KCJpbnB1dCIsIHsgdHlwZTogImRhdGUiLCBuYW1lOiAic3RhcnREYXRlIiwgcmVxdWlyZWQ6IHRydWUsIGNsYXNzTmFtZTogImJnLWdyYXktNzAwIGJvcmRlciBib3JkZXItZ3JheS02MDAgcm91bmRlZC1tZCBweS0yIHB4LTMgdGV4dC13aGl0ZSIgfSksIF9qc3goImlucHV0IiwgeyB0eXBlOiAiZGF0ZSIsIG5hbWU6ICJlbmREYXRlIiwgcmVxdWlyZWQ6IHRydWUsIGNsYXNzTmFtZTogImJnLWdyYXktNzAwIGJvcmRlciBib3JkZXItZ3JheS02MDAgcm91bmRlZC1tZCBweS0yIHB4LTMgdGV4dC13aGl0ZSIgfSldIH0pLCBfanN4KCJidXR0b24iLCB7IHR5cGU6ICJzdWJtaXQiLCBjbGFzc05hbWU6ICJiZy1icmFuZC1wcmltYXJ5IHRleHQtd2hpdGUgZm9udC1ib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIiwgY2hpbGRyZW46ICJQXHUwMTU5aWRhdCB6XHUwMEUxem5hbSIgfSldIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogIm92ZXJmbG93LXgtYXV0byBib3JkZXIgYm9yZGVyLWdyYXktNzAwIHJvdW5kZWQtbGciLCBjaGlsZHJlbjogX2pzeHMoInRhYmxlIiwgeyBjbGFzc05hbWU6ICJ3LWZ1bGwgdGV4dC1sZWZ0IHRleHQtc20iLCBjaGlsZHJlbjogW19qc3goInRoZWFkIiwgeyBjbGFzc05hbWU6ICJiZy1ncmF5LTgwMCB0ZXh0LWJyYW5kLXRleHQtc2Vjb25kYXJ5IHVwcGVyY2FzZSB0cmFja2luZy13aWRlciIsIGNoaWxkcmVuOiBfanN4cygidHIiLCB7IGNoaWxkcmVuOiBbX2pzeCgidGgiLCB7IGNsYXNzTmFtZTogInAtMyIsIGNoaWxkcmVuOiAiWmFtXHUwMTFCc3RuYW5lYyIgfSksIF9qc3goInRoIiwgeyBjbGFzc05hbWU6ICJwLTMiLCBjaGlsZHJlbjogIlR5cCIgfSksIF9qc3goInRoIiwgeyBjbGFzc05hbWU6ICJwLTMiLCBjaGlsZHJlbjogIk9kIiB9KSwgX2pzeCgidGgiLCB7IGNsYXNzTmFtZTogInAtMyIsIGNoaWxkcmVuOiAiRG8iIH0pLCBfanN4KCJ0aCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46ICJBa2NlIiB9KV0gfSkgfSksIF9qc3hzKCJ0Ym9keSIsIHsgY2xhc3NOYW1lOiAiZGl2aWRlLXkgZGl2aWRlLWdyYXktNzAwIiwgY2hpbGRyZW46IFtsZWF2ZVJlY29yZHMubWFwKHJlY29yZCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbXBsb3llZSA9IGVtcGxveWVlcy5maW5kKGUgPT4gZS5pZCA9PT0gcmVjb3JkLmVtcGxveWVlSWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChfanN4cygidHIiLCB7IGNoaWxkcmVuOiBbX2pzeCgidGQiLCB7IGNsYXNzTmFtZTogInAtMyIsIGNoaWxkcmVuOiBlbXBsb3llZT8ubmFtZSB8fCAnTmV6bsOhbcO9JyB9KSwgX2pzeCgidGQiLCB7IGNsYXNzTmFtZTogInAtMyIsIGNoaWxkcmVuOiBfanN4cygic3BhbiIsIHsgY2xhc3NOYW1lOiBgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdGV4dC14cyBmb250LXNlbWlib2xkICR7cmVjb3JkLnR5cGUgPT09ICd2YWNhdGlvbicgPyAndGV4dC1jeWFuLTMwMCcgOiAndGV4dC1vcmFuZ2UtMzAwJ31gLCBjaGlsZHJlbjogW3JlY29yZC50eXBlID09PSAndmFjYXRpb24nID8gX2pzeChTdW5JY29uLCB7IGNsYXNzTmFtZTogInctNCBoLTQiIH0pIDogX2pzeChGYWNlRnJvd25JY29uLCB7IGNsYXNzTmFtZTogInctNCBoLTQiIH0pLCByZWNvcmQudHlwZSA9PT0gJ3ZhY2F0aW9uJyA/ICdEb3ZvbGVuw6EnIDogJ05lbW9jJ10gfSkgfSksIF9qc3goInRkIiwgeyBjbGFzc05hbWU6ICJwLTMiLCBjaGlsZHJlbjogbmV3IERhdGUocmVjb3JkLnN0YXJ0RGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdjcy1DWicpIH0pLCBfanN4KCJ0ZCIsIHsgY2xhc3NOYW1lOiAicC0zIiwgY2hpbGRyZW46IG5ldyBEYXRlKHJlY29yZC5lbmREYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoJ2NzLUNaJykgfSksIF9qc3goInRkIiwgeyBjbGFzc05hbWU6ICJwLTMiLCBjaGlsZHJlbjogX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBoYW5kbGVEZWxldGVMZWF2ZShyZWNvcmQuaWQpLCBjbGFzc05hbWU6ICJ0ZXh0LXJlZC00MDAgaG92ZXI6dGV4dC1yZWQtMzAwIiwgY2hpbGRyZW46IF9qc3goVHJhc2hJY29uLCB7IGNsYXNzTmFtZTogInctNSBoLTUiIH0pIH0pIH0pXSB9LCByZWNvcmQuaWQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGxlYXZlUmVjb3Jkcy5sZW5ndGggPT09IDAgJiYgKF9qc3goInRyIiwgeyBjaGlsZHJlbjogX2pzeCgidGQiLCB7IGNvbFNwYW46IDUsIGNsYXNzTmFtZTogInRleHQtY2VudGVyIHAtNCB0ZXh0LWJyYW5kLXRleHQtc2Vjb25kYXJ5IiwgY2hpbGRyZW46ICJcdTAxN0RcdTAwRTFkblx1MDBFOSBuYXBsXHUwMEUxbm92YW5cdTAwRTkgbmVwXHUwMTU5XHUwMEVEdG9tbm9zdGkuIiB9KSB9KSldIH0pXSB9KSB9KV0gfSldIH0pIH0pKSwgaXNDb21wYW55T3ZlcnZpZXdWaXNpYmxlICYmIGlzQXV0aGVudGljYXRlZCAmJiAoX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJmaXhlZCBpbnNldC0wIGJnLWJsYWNrLzYwIGJhY2tkcm9wLWJsdXItc20gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00IHotWzYwXSBhbmltYXRlLWZhZGUtaW4iLCBjaGlsZHJlbjogX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYmctYnJhbmQtc3VyZmFjZSB3LWZ1bGwgbWF4LXctNHhsIHJvdW5kZWQteGwgc2hhZG93LTJ4bCBib3JkZXIgYm9yZGVyLWdyYXktNzAwIG1heC1oLVs5MHZoXSBmbGV4IGZsZXgtY29sIiwgY2hpbGRyZW46IFtfanN4cygiaGVhZGVyIiwgeyBjbGFzc05hbWU6ICJwLTQgYm9yZGVyLWIgYm9yZGVyLWdyYXktNzAwIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciIsIGNoaWxkcmVuOiBbX2pzeCgiZGl2IiwgeyBjaGlsZHJlbjogX2pzeCgiaDIiLCB7IGNsYXNzTmFtZTogInRleHQtMnhsIGZvbnQtYm9sZCIsIGNoaWxkcmVuOiAiTVx1MDExQnNcdTAwRURcdTAxMERuXHUwMEVEIFBcdTAxNTllaGxlZCBGaXJteSIgfSkgfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gc2V0SXNDb21wYW55T3ZlcnZpZXdWaXNpYmxlKGZhbHNlKSwgY2xhc3NOYW1lOiAidGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LXdoaXRlIHRleHQtM3hsIGxlYWRpbmctbm9uZSIsIGNoaWxkcmVuOiAiXHUwMEQ3IiB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInAtNCBzbTpwLTYgb3ZlcmZsb3cteS1hdXRvIHNwYWNlLXktNiIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIGJnLWdyYXktODAwIHAtMiByb3VuZGVkLWxnIiwgY2hpbGRyZW46IFtfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IGNoYW5nZVJlcG9ydE1vbnRoKC0xKSwgY2xhc3NOYW1lOiAicHgtMyBweS0xIGJnLWdyYXktNjAwIHJvdW5kZWQiLCBjaGlsZHJlbjogIjwiIH0pLCBfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJmb250LWJvbGQgdGV4dC1sZyIsIGNoaWxkcmVuOiByZXBvcnREYXRlLnRvTG9jYWxlU3RyaW5nKCdjcy1DWicsIHsgbW9udGg6ICdsb25nJywgeWVhcjogJ251bWVyaWMnIH0pIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IGNoYW5nZVJlcG9ydE1vbnRoKDEpLCBjbGFzc05hbWU6ICJweC0zIHB5LTEgYmctZ3JheS02MDAgcm91bmRlZCIsIGNoaWxkcmVuOiAiPiIgfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGxnOmdyaWQtY29scy00IGdhcC00IHRleHQtY2VudGVyIiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJiZy1ncmF5LTgwMCBwLTQgcm91bmRlZC1sZyIsIGNoaWxkcmVuOiBbX2pzeCgicCIsIHsgY2xhc3NOYW1lOiAidGV4dC1zbSB0ZXh0LWJyYW5kLXRleHQtc2Vjb25kYXJ5IiwgY2hpbGRyZW46ICJPZHByYWNvdmFuXHUwMEU5IGhvZGlueSIgfSksIF9qc3goInAiLCB7IGNsYXNzTmFtZTogInRleHQtMnhsIGZvbnQtYm9sZCIsIGNoaWxkcmVuOiBjb21wYW55TW9udGhseVN1bW1hcnkudG90YWxIb3Vycy50b0ZpeGVkKDIpIH0pXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYmctZ3JheS04MDAgcC00IHJvdW5kZWQtbGciLCBjaGlsZHJlbjogW19qc3goInAiLCB7IGNsYXNzTmFtZTogInRleHQtc20gdGV4dC1icmFuZC10ZXh0LXNlY29uZGFyeSIsIGNoaWxkcmVuOiAiTlx1MDBFMWtsYWR5IG5hIG16ZHkiIH0pLCBfanN4cygicCIsIHsgY2xhc3NOYW1lOiAidGV4dC0yeGwgZm9udC1ib2xkIiwgY2hpbGRyZW46IFtjb21wYW55TW9udGhseVN1bW1hcnkudG90YWxXYWdlcy50b0xvY2FsZVN0cmluZygnY3MtQ1onLCB7IG1heGltdW1GcmFjdGlvbkRpZ2l0czogMCB9KSwgIiBLXHUwMTBEIl0gfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJiZy1ncmF5LTgwMCBwLTQgcm91bmRlZC1sZyIsIGNoaWxkcmVuOiBbX2pzeCgicCIsIHsgY2xhc3NOYW1lOiAidGV4dC1zbSB0ZXh0LWJyYW5kLXRleHQtc2Vjb25kYXJ5IiwgY2hpbGRyZW46ICJUclx1MDE3RWJ5ICh6IGRva29uXHUwMTBEZW5cdTAwRkRjaCkiIH0pLCBfanN4cygicCIsIHsgY2xhc3NOYW1lOiAidGV4dC0yeGwgZm9udC1ib2xkIiwgY2hpbGRyZW46IFtjb21wYW55TW9udGhseVN1bW1hcnkudG90YWxSZXZlbnVlLnRvTG9jYWxlU3RyaW5nKCdjcy1DWicsIHsgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwIH0pLCAiIEtcdTAxMEQiXSB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogYGJnLWdyYXktODAwIHAtNCByb3VuZGVkLWxnICR7Y29tcGFueU1vbnRobHlTdW1tYXJ5LnByb2ZpdCA+PSAwID8gJ3RleHQtZ3JlZW4tNDAwJyA6ICd0ZXh0LXJlZC00MDAnfWAsIGNoaWxkcmVuOiBbX2pzeCgicCIsIHsgY2xhc3NOYW1lOiAidGV4dC1zbSB0ZXh0LWJyYW5kLXRleHQtc2Vjb25kYXJ5IiwgY2hpbGRyZW46ICJNXHUwMTFCc1x1MDBFRFx1MDEwRG5cdTAwRUQgemlzayIgfSksIF9qc3hzKCJwIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LTJ4bCBmb250LWJvbGQiLCBjaGlsZHJlbjogW2NvbXBhbnlNb250aGx5U3VtbWFyeS5wcm9maXQudG9Mb2NhbGVTdHJpbmcoJ2NzLUNaJywgeyBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDAgfSksICIgS1x1MDEwRCJdIH0pXSB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNoaWxkcmVuOiBbX2pzeCgiaDMiLCB7IGNsYXNzTmFtZTogInRleHQtbGcgZm9udC1zZW1pYm9sZCBtYi0yIiwgY2hpbGRyZW46ICJQXHUwMTU5ZWhsZWQgaG9kaW4gemFtXHUwMTFCc3RuYW5jXHUwMTZGIiB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJvdmVyZmxvdy14LWF1dG8gYm9yZGVyIGJvcmRlci1ncmF5LTcwMCByb3VuZGVkLWxnIiwgY2hpbGRyZW46IF9qc3hzKCJ0YWJsZSIsIHsgY2xhc3NOYW1lOiAidy1mdWxsIHRleHQtbGVmdCB0ZXh0LXNtIiwgY2hpbGRyZW46IFtfanN4KCJ0aGVhZCIsIHsgY2xhc3NOYW1lOiAiYmctZ3JheS04MDAgdGV4dC1icmFuZC10ZXh0LXNlY29uZGFyeSB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIiLCBjaGlsZHJlbjogX2pzeHMoInRyIiwgeyBjaGlsZHJlbjogW19qc3goInRoIiwgeyBjbGFzc05hbWU6ICJwLTMiLCBjaGlsZHJlbjogIkptXHUwMEU5bm8iIH0pLCBfanN4KCJ0aCIsIHsgY2xhc3NOYW1lOiAicC0zIHRleHQtY2VudGVyIiwgY2hpbGRyZW46ICJDZWxrZW0gaG9kaW4iIH0pLCBfanN4KCJ0aCIsIHsgY2xhc3NOYW1lOiAicC0zIHRleHQtY2VudGVyIiwgY2hpbGRyZW46ICJEbnkgcyBwXHUwMTU5ZXNcdTAxMERhc2VtICg+OWgpIiB9KV0gfSkgfSksIF9qc3goInRib2R5IiwgeyBjbGFzc05hbWU6ICJkaXZpZGUteSBkaXZpZGUtZ3JheS03MDAiLCBjaGlsZHJlbjogZW1wbG95ZWVzLm1hcChlbXAgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsSG91cnMgPSBPYmplY3QudmFsdWVzKGRldGFpbGVkV29ya0xvZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihsb2cgPT4gbmV3IERhdGUoT2JqZWN0LmtleXMobG9nKVswXSkuZ2V0TW9udGgoKSA9PT0gcmVwb3J0TW9udGggJiYgbmV3IERhdGUoT2JqZWN0LmtleXMobG9nKVswXSkuZ2V0RnVsbFllYXIoKSA9PT0gcmVwb3J0WWVhcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlZHVjZSgoc3VtLCBkYXlMb2cpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW1wRGF5TG9nID0gZGF5TG9nW2VtcC5pZF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbXBEYXlMb2cgJiYgZW1wRGF5TG9nLndvcmspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdW0gKyBPYmplY3QudmFsdWVzKGVtcERheUxvZy53b3JrKS5yZWR1Y2UoKHMsIGgpID0+IHMgKyBOdW1iZXIoaCksIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3ZlcnRpbWVEYXlzID0gY29tcGFueU1vbnRobHlTdW1tYXJ5LmVtcGxveWVlT3ZlcnRpbWVEYXlzW2VtcC5pZF0gfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXNPdmVydGltZSA9IG92ZXJ0aW1lRGF5cyA+IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChfanN4cygidHIiLCB7IGNsYXNzTmFtZTogYCR7aGFzT3ZlcnRpbWUgPyAnYmctcmVkLTkwMC8yMCcgOiAnJ30gaG92ZXI6YmctYnJhbmQtc3VyZmFjZS81MGAsIGNoaWxkcmVuOiBbX2pzeCgidGQiLCB7IGNsYXNzTmFtZTogInAtMyBmb250LXNlbWlib2xkIiwgY2hpbGRyZW46IGVtcC5uYW1lIH0pLCBfanN4KCJ0ZCIsIHsgY2xhc3NOYW1lOiAicC0zIHRleHQtY2VudGVyIGZvbnQtbW9ubyIsIGNoaWxkcmVuOiB0b3RhbEhvdXJzLnRvRml4ZWQoMikgfSksIF9qc3goInRkIiwgeyBjbGFzc05hbWU6IGBwLTMgdGV4dC1jZW50ZXIgZm9udC1ib2xkICR7aGFzT3ZlcnRpbWUgPyAndGV4dC1yZWQtNDAwJyA6ICcnfWAsIGNoaWxkcmVuOiBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGp1c3RpZnktY2VudGVyIGl0ZW1zLWNlbnRlciBnYXAtMiIsIGNoaWxkcmVuOiBbaGFzT3ZlcnRpbWUgJiYgX2pzeChBbGVydFRyaWFuZ2xlSWNvbiwgeyBjbGFzc05hbWU6ICJ3LTQgaC00IiB9KSwgb3ZlcnRpbWVEYXlzXSB9KSB9KV0gfSwgZW1wLmlkKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSB9KV0gfSkgfSldIH0pLCBfanN4cygiZGl2IiwgeyBjaGlsZHJlbjogW19qc3goImgzIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgbWItMiBtdC00IiwgY2hpbGRyZW46ICJEb2tvblx1MDEwRGVuXHUwMEU5IHpha1x1MDBFMXpreSB2IHRvbXRvIG1cdTAxMUJzXHUwMEVEY2kiIH0pLCBjb21wYW55TW9udGhseVN1bW1hcnkuY29tcGxldGVkSm9ic1RoaXNNb250aC5sZW5ndGggPiAwID8gKF9qc3goInVsIiwgeyBjbGFzc05hbWU6ICJzcGFjZS15LTIiLCBjaGlsZHJlbjogY29tcGFueU1vbnRobHlTdW1tYXJ5LmNvbXBsZXRlZEpvYnNUaGlzTW9udGgubWFwKGpvYiA9PiAoX2pzeHMoImxpIiwgeyBjbGFzc05hbWU6ICJiZy1ncmF5LTgwMCBwLTIgcm91bmRlZC1sZyB0ZXh0LXNtIGZsZXgganVzdGlmeS1iZXR3ZWVuIiwgY2hpbGRyZW46IFtfanN4KCJzcGFuIiwgeyBjaGlsZHJlbjogam9iLm5hbWUgfSksIF9qc3hzKCJzcGFuIiwgeyBjbGFzc05hbWU6ICJmb250LXNlbWlib2xkIiwgY2hpbGRyZW46IFsiVHJcdTAxN0ViYTogIiwgKGpvYi50b3RhbFZhbHVlIC0gam9iLm1hdGVyaWFsQ29zdCkudG9Mb2NhbGVTdHJpbmcoJ2NzLUNaJyksICIgS1x1MDEwRCJdIH0pXSB9LCBqb2IuaWQpKSkgfSkpIDogKF9qc3goInAiLCB7IGNsYXNzTmFtZTogInRleHQtYnJhbmQtdGV4dC1zZWNvbmRhcnkgdGV4dC1zbSIsIGNoaWxkcmVuOiAiViB0b210byBtXHUwMTFCc1x1MDBFRGNpIG5lYnlseSBkb2tvblx1MDEwRGVueSBcdTAxN0VcdTAwRTFkblx1MDBFOSB6YWtcdTAwRTF6a3kuIiB9KSldIH0pXSB9KV0gfSkgfSkpLCBfanN4KCJmb290ZXIiLCB7IGNsYXNzTmFtZTogInRleHQtY2VudGVyIG10LTggdGV4dC1icmFuZC10ZXh0LXNlY29uZGFyeSB0ZXh0LXNtIiwgY2hpbGRyZW46IF9qc3goInAiLCB7IGNoaWxkcmVuOiAiVnlsZXBcdTAxNjFlblx1MDBFMSBhcGxpa2FjZSBwcm8gZXZpZGVuY2kgcHJcdTAwRTFjZS4iIH0pIH0pXSB9KSwgIik7IH0iXSB9KSk7Cn0K","@/types":"data:application/javascript;base64,ZXhwb3J0IHt9Owo=","@/constants":"data:application/javascript;base64,ZXhwb3J0IGNvbnN0IEVNUExPWUVFUyA9IFsKICAgIHsgaWQ6IDEsIG5hbWU6ICdKYW4gTm92w6FrJywgaG91cmx5V2FnZTogMjUwLCBhbm51YWxMZWF2ZUVudGl0bGVtZW50OiAyMCB9LAogICAgeyBpZDogMiwgbmFtZTogJ1BldHJhIER2b8WZw6Frb3bDoScsIGhvdXJseVdhZ2U6IDI4MCwgYW5udWFsTGVhdmVFbnRpdGxlbWVudDogMjAgfSwKICAgIHsgaWQ6IDMsIG5hbWU6ICdNYXJ0aW4gU3ZvYm9kYScsIGhvdXJseVdhZ2U6IDI2MCwgYW5udWFsTGVhdmVFbnRpdGxlbWVudDogMjAgfSwKICAgIHsgaWQ6IDQsIG5hbWU6ICdLYXRlxZlpbmEgxIxlcm7DoScsIGhvdXJseVdhZ2U6IDMwMCwgYW5udWFsTGVhdmVFbnRpdGxlbWVudDogMjAgfSwKICAgIHsgaWQ6IDUsIG5hbWU6ICdUb23DocWhIFByb2Now6F6a2EnLCBob3VybHlXYWdlOiAyNzAsIGFubnVhbExlYXZlRW50aXRsZW1lbnQ6IDIwIH0sCl07Cg==","@/services/geminiService":"data:application/javascript;base64,ZXhwb3J0IHt9Owo=","@/components/Icons":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmV4cG9ydCBjb25zdCBCcmllZmNhc2VJY29uID0gKHByb3BzKSA9PiAoX2pzeCgic3ZnIiwgeyB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgZmlsbDogIm5vbmUiLCB2aWV3Qm94OiAiMCAwIDI0IDI0Iiwgc3Ryb2tlV2lkdGg6IDEuNSwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgLi4ucHJvcHMsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk0yMC4yNSAxNC4xNXY0LjA3YTIuMjUgMi4yNSAwIDAxLTIuMjUgMi4yNUg1LjkyYTIuMjUgMi4yNSAwIDAxLTIuMjUtMi4yNXYtNC4wN20xNi41IDBhMi4yNSAyLjI1IDAgMDAtMi4yNS0yLjI1SDUuOTJhMi4yNSAyLjI1IDAgMDAtMi4yNSAyLjI1bTE2LjUgMHYtMi4wN2EyLjI1IDIuMjUgMCAwMC0yLjI1LTIuMjVINS45MmEyLjI1IDIuMjUgMCAwMC0yLjI1IDIuMjV2Mi4wN20xNi41IDBzLTMtMi4yNS02LTIuMjVzLTYgMi4yNS02IDIuMjVtMTIgMHMtMy0yLjI1LTYtMi4yNXMtNiAyLjI1LTYgMi4yNU01LjkyIDE0LjE1djQuMDdhMi4yNSAyLjI1IDAgMDAyLjI1IDIuMjVoMTAuMDZhMi4yNSAyLjI1IDAgMDAyLjI1LTIuMjV2LTQuMDdNNS45MiAxNC4xNWEyLjI1IDIuMjUgMCAwMTIuMjUtMi4yNWgxMC4wNmEyLjI1IDIuMjUgMCAwMTIuMjUgMi4yNW0tMTQuNSAwdi0yLjA3YTIuMjUgMi4yNSAwIDAxMi4yNS0yLjI1aDEwLjA2YTIuMjUgMi4yNSAwIDAxMi4yNSAyLjI1djIuMDciIH0pIH0pKTsKZXhwb3J0IGNvbnN0IENsb2NrSWNvbiA9IChwcm9wcykgPT4gKF9qc3goInN2ZyIsIHsgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsIGZpbGw6ICJub25lIiwgdmlld0JveDogIjAgMCAyNCAyNCIsIHN0cm9rZVdpZHRoOiAxLjUsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIC4uLnByb3BzLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNMTIgNnY2aDQuNW00LjUgMGE5IDkgMCAxMS0xOCAwIDkgOSAwIDAxMTggMHoiIH0pIH0pKTsKZXhwb3J0IGNvbnN0IFVzZXJJY29uID0gKHByb3BzKSA9PiAoX2pzeCgic3ZnIiwgeyB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgZmlsbDogIm5vbmUiLCB2aWV3Qm94OiAiMCAwIDI0IDI0Iiwgc3Ryb2tlV2lkdGg6IDEuNSwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgLi4ucHJvcHMsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk0xNS43NSA2YTMuNzUgMy43NSAwIDExLTcuNSAwIDMuNzUgMy43NSAwIDAxNy41IDB6TTQuNTAxIDIwLjExOGE3LjUgNy41IDAgMDExNC45OTggMEExNy45MzMgMTcuOTMzIDAgMDExMiAyMS43NWMtMi42NzYgMC01LjIxNi0uNTg0LTcuNDk5LTEuNjMyeiIgfSkgfSkpOwpleHBvcnQgY29uc3QgQ2hlY2tDaXJjbGVJY29uID0gKHByb3BzKSA9PiAoX2pzeCgic3ZnIiwgeyB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgZmlsbDogIm5vbmUiLCB2aWV3Qm94OiAiMCAwIDI0IDI0Iiwgc3Ryb2tlV2lkdGg6IDEuNSwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgLi4ucHJvcHMsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk05IDEyLjc1TDExLjI1IDE1IDE1IDkuNzVNMjEgMTJhOSA5IDAgMTEtMTggMCA5IDkgMCAwMTE4IDB6IiB9KSB9KSk7CmV4cG9ydCBjb25zdCBUcmFzaEljb24gPSAocHJvcHMpID0+IChfanN4KCJzdmciLCB7IHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCBmaWxsOiAibm9uZSIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBzdHJva2VXaWR0aDogMS41LCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCAuLi5wcm9wcywgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTE0Ljc0IDlsLS4zNDYgOW0tNC43ODggMEw5LjI2IDltOS45NjgtMy4yMWMuMzQyLjA1Mi42ODIuMTA3IDEuMDIyLjE2Nm0tMS4wMjItLjE2NUwxOC4xNiAxOS42NzNhMi4yNSAyLjI1IDAgMDEtMi4yNDQgMi4wNzdIOC4wODRhMi4yNSAyLjI1IDAgMDEtMi4yNDQtMi4wNzdMNC43NzIgNS43OW0xNC40NTYgMGE0OC4xMDggNDguMTA4IDAgMDAtMy40NzgtLjM5N20tMTIgLjU2MmMuMzQtLjA1OS42OC0uMTE0IDEuMDIyLS4xNjVtMCAwYTQ4LjExIDQ4LjExIDAgMDEzLjQ3OC0uMzk3bTcuNSAwdi0uOTE2YzAtMS4xOC0uOTEtMi4xNjQtMi4wOS0yLjIwMWE1MS45NjQgNTEuOTY0IDAgMDAtMy4zMiAwYy0xLjE4LjAzNy0yLjA5IDEuMDIyLTIuMDkgMi4yMDF2LjkxNm03LjUgMGE0OC42NjcgNDguNjY3IDAgMDAtNy41IDAiIH0pIH0pKTsKZXhwb3J0IGNvbnN0IFBlbmNpbEljb24gPSAocHJvcHMpID0+IChfanN4KCJzdmciLCB7IHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCBmaWxsOiAibm9uZSIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBzdHJva2VXaWR0aDogMS41LCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCAuLi5wcm9wcywgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTE2Ljg2MiA0LjQ4N2wxLjY4Ny0xLjY4OGExLjg3NSAxLjg3NSAwIDExMi42NTIgMi42NTJMMTAuNTgyIDE2LjA3YTQuNSA0LjUgMCAwMS0xLjg5NyAxLjEzTDYgMThsLjgtMi42ODVhNC41IDQuNSAwIDAxMS4xMy0xLjg5N2w4LjkzMi04LjkzMXptMCAwTDE5LjUgNy4xMjVNMTggMTR2NC43NUEyLjI1IDIuMjUgMCAwMTE1Ljc1IDIxSDUuMjVBMi4yNSAyLjI1IDAgMDEzIDE4Ljc1VjguMjVBMi4yNSAyLjI1IDAgMDE1LjI1IDZIMTAiIH0pIH0pKTsKZXhwb3J0IGNvbnN0IFNoaWVsZENoZWNrSWNvbiA9IChwcm9wcykgPT4gKF9qc3goInN2ZyIsIHsgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsIGZpbGw6ICJub25lIiwgdmlld0JveDogIjAgMCAyNCAyNCIsIHN0cm9rZVdpZHRoOiAxLjUsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIC4uLnByb3BzLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNOSAxMi43NUwxMS4yNSAxNSAxNSA5Ljc1bS0zLTcuMDM2QTExLjk1OSAxMS45NTkgMCAwMTMuNTk4IDYgMTEuOTkgMTEuOTkgMCAwMDMgOS43NDljMCA1LjU5MiAzLjgyNCAxMC4yOSA5IDExLjYyMiA1LjE3Ni0xLjMzMiA5LTYuMDMgOS0xMS42MjIgMC0xLjMxLS4yMS0yLjU3MS0uNTk4LTMuNzUxaC0uMTUyYy0zLjE5NiAwLTYuMS0xLjI0OC04LjI1LTMuMjg2em0wIDEzLjAzNmguMDA4di4wMDhoLS4wMDh2LS4wMDh6IiB9KSB9KSk7CmV4cG9ydCBjb25zdCBLZXlJY29uID0gKHByb3BzKSA9PiAoX2pzeCgic3ZnIiwgeyB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgZmlsbDogIm5vbmUiLCB2aWV3Qm94OiAiMCAwIDI0IDI0Iiwgc3Ryb2tlV2lkdGg6IDEuNSwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgLi4ucHJvcHMsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk0xNS43NSA1LjI1YTMgMyAwIDAxMyAzbTMgMGE5IDkgMCAxMS0xOCAwIDkgOSAwIDAxMTggMHpNMTIuNzUgOS43NUw5IDE0LjI1bTMuNzUtNC41YTMgMyAwIDAwLTMtMyIgfSkgfSkpOwpleHBvcnQgY29uc3QgTG9nb3V0SWNvbiA9IChwcm9wcykgPT4gKF9qc3goInN2ZyIsIHsgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsIGZpbGw6ICJub25lIiwgdmlld0JveDogIjAgMCAyNCAyNCIsIHN0cm9rZVdpZHRoOiAxLjUsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIC4uLnByb3BzLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNMTUuNzUgOVY1LjI1QTIuMjUgMi4yNSAwIDAwMTMuNSAzaC02YTIuMjUgMi4yNSAwIDAwLTIuMjUgMi4yNXYxMy41QTIuMjUgMi4yNSAwIDAwNy41IDIxaDZhMi4yNSAyLjI1IDAgMDAyLjI1LTIuMjVWMTVtMyAwbDMtM20wIDBsLTMtM20zIDNIOSIgfSkgfSkpOwpleHBvcnQgY29uc3QgQ2hhcnRCYXJJY29uID0gKHByb3BzKSA9PiAoX2pzeCgic3ZnIiwgeyB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgZmlsbDogIm5vbmUiLCB2aWV3Qm94OiAiMCAwIDI0IDI0Iiwgc3Ryb2tlV2lkdGg6IDEuNSwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgLi4ucHJvcHMsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk0zIDEzLjEyNUMzIDEyLjUwNCAzLjUwNCAxMiA0LjEyNSAxMmgyLjI1Yy42MjEgMCAxLjEyNS41MDQgMS4xMjUgMS4xMjV2Ni43NUM3LjUgMjAuNDk2IDYuOTk2IDIxIDYuMzc1IDIxaC0yLjI1QTEuMTI1IDEuMTI1IDAgMDEzIDE5Ljg3NXYtNi43NXpNOS43NSA4LjYyNWMwLS42MjEuNTA0LTEuMTI1IDEuMTI1LTEuMTI1aDIuMjVjLjYyMSAwIDEuMTI1LjUwNCAxLjEyNSAxLjEyNXYxMS4yNWMwIC42MjEtLjUwNCAxLjEyNS0xLjEyNSAxLjEyNWgtMi4yNWExLjEyNSAxLjEyNSAwIDAxLTEuMTI1LTEuMTI1VjguNjI1ek0xNi41IDQuMTI1YzAtLjYyMS41MDQtMS4xMjUgMS4xMjUtMS4xMjVoMi4yNUMyMC40OTYgMyAyMSAzLjUwNCAyMSA0LjEyNXYxNS43NWMwIC42MjEtLjUwNCAxLjEyNS0xLjEyNSAxLjEyNWgtMi4yNWExLjEyNSAxLjEyNSAwIDAxLTEuMTI1LTEuMTI1VjQuMTI1eiIgfSkgfSkpOwpleHBvcnQgY29uc3QgQ2FzaEljb24gPSAocHJvcHMpID0+IChfanN4KCJzdmciLCB7IHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCBmaWxsOiAibm9uZSIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBzdHJva2VXaWR0aDogMS41LCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCAuLi5wcm9wcywgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTEyIDZ2MTJtLTMtMi44MThsLjg3OS42NTljMS4xNzEuODc5IDMuMDcuODc5IDQuMjQyIDAgMS4xNzItLjg3OSAxLjE3Mi0yLjMwMyAwLTMuMTgyQzEzLjUzNiAxMi4yMTkgMTIuNzY4IDEyIDEyIDEyYy0uNzI1IDAtMS40NS0uMjItMi4wMDMtLjY1OS0xLjEwNi0uODc5LTEuMTA2LTIuMzAzIDAtMy4xODJzMi45LS44NzkgNC4wMDYgMGwuNDE1LjMzTTIxIDEyYTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAweiIgfSkgfSkpOwpleHBvcnQgY29uc3QgQXJjaGl2ZUJveEljb24gPSAocHJvcHMpID0+IChfanN4KCJzdmciLCB7IHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCBmaWxsOiAibm9uZSIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBzdHJva2VXaWR0aDogMS41LCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCAuLi5wcm9wcywgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTIwLjI1IDcuNWwtLjYyNSAxMC42MzJhMi4yNSAyLjI1IDAgMDEtMi4yNDcgMi4xMThINi42MjJhMi4yNSAyLjI1IDAgMDEtMi4yNDctMi4xMThMMy43NSA3LjVNMTAgMTEuMjVoNE0zLjM3NSA3LjVoMTcuMjVjLjYyMSAwIDEuMTI1LS41MDQgMS4xMjUtMS4xMjV2LTEuNWMwLS42MjEtLjUwNC0xLjEyNS0xLjEyNS0xLjEyNUgzLjM3NWMtLjYyMSAwLTEuMTI1LjUwNC0xLjEyNSAxLjEyNXYxLjVjMCAuNjIxLjUwNCAxLjEyNSAxLjEyNSAxLjEyNXoiIH0pIH0pKTsKZXhwb3J0IGNvbnN0IEZvbGRlckljb24gPSAocHJvcHMpID0+IChfanN4KCJzdmciLCB7IHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCBmaWxsOiAibm9uZSIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBzdHJva2VXaWR0aDogMS41LCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCAuLi5wcm9wcywgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTIuMjUgMTIuNzVWMTJBMi4yNSAyLjI1IDAgMDE0LjUgOS43NWgxNUEyLjI1IDIuMjUgMCAwMTIxLjc1IDEydi43NW0tOC42OS02LjQ0bC0yLjEyLTIuMTJhMS41IDEuNSAwIDAwLTEuMDYxLS40NEg0LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDZ2MTJhMi4yNSAyLjI1IDAgMDAyLjI1IDIuMjVoMTVBMi4yNSAyLjI1IDAgMDAyMS43NSAxOFY5YTIuMjUgMi4yNSAwIDAwLTIuMjUtMi4yNWgtNS4zNzlhMS41IDEuNSAwIDAxLTEuMDYtLjQ0eiIgfSkgfSkpOwpleHBvcnQgY29uc3QgRG9jdW1lbnRUZXh0SWNvbiA9IChwcm9wcykgPT4gKF9qc3goInN2ZyIsIHsgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsIGZpbGw6ICJub25lIiwgdmlld0JveDogIjAgMCAyNCAyNCIsIHN0cm9rZVdpZHRoOiAxLjUsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIC4uLnByb3BzLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNMTkuNSAxNC4yNXYtMi42MjVhMy4zNzUgMy4zNzUgMCAwMC0zLjM3NS0zLjM3NWgtMS41QTEuMTI1IDEuMTI1IDAgMDExMy41IDcuMTI1di0xLjVhMy4zNzUgMy4zNzUgMCAwMC0zLjM3NS0zLjM3NUg4LjI1bTAgMTIuNzVoNy41bS03LjUgM0gxMk0xMC41IDIuMjVINS42MjVjLS42MjEgMC0xLjEyNS41MDQtMS4xMjUgMS4xMjV2MTcuMjVjMCAuNjIxLjUwNCAxLjEyNSAxLjEyNSAxLjEyNWgxMi43NWMuNjIxIDAgMS4xMjUtLjUwNCAxLjEyNS0xLjEyNVYxMS4yNWE5IDkgMCAwMC05LTl6IiB9KSB9KSk7CmV4cG9ydCBjb25zdCBBbGVydFRyaWFuZ2xlSWNvbiA9IChwcm9wcykgPT4gKF9qc3goInN2ZyIsIHsgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsIGZpbGw6ICJub25lIiwgdmlld0JveDogIjAgMCAyNCAyNCIsIHN0cm9rZVdpZHRoOiAxLjUsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIC4uLnByb3BzLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNMTIgOXYzLjc1bS05LjMwMyAzLjM3NmMtLjg2NiAxLjUuMjE3IDMuMzc0IDEuOTQ4IDMuMzc0aDE0LjcxYzEuNzMgMCAyLjgxMy0xLjg3NCAxLjk0OC0zLjM3NEwxMy45NDkgMy4zNzhjLS44NjYtMS41LTMuMDMyLTEuNS0zLjg5OCAwTDIuNjk3IDE2LjEyNnpNMTIgMTUuNzVoLjAwN3YuMDA3SDEydi0uMDA3eiIgfSkgfSkpOwpleHBvcnQgY29uc3QgQ29nSWNvbiA9IChwcm9wcykgPT4gKF9qc3goInN2ZyIsIHsgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsIGZpbGw6ICJub25lIiwgdmlld0JveDogIjAgMCAyNCAyNCIsIHN0cm9rZVdpZHRoOiAxLjUsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIC4uLnByb3BzLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNMTAuMzQzIDMuOTRjLjA5LS41NDIuNTYtMS4wMDcgMS4xMS0xLjIyNmwuMjgtLjFjLjM0LS4xMjQuNzAyLS4xMjQgMS4wNDIgMGwuMjguMWMuNTQ4LjIyIDEuMDIuNjg0IDEuMTEgMS4yMjZsLjA2OC40MThjLjI4LjA2LjU1NC4xNC44MjIuMjRsLjI4LjEwNGMuMzI4LjEyLjY3OC4wNDQgMS4wMDItLjE4bC4zMy0uMjM0Yy40OC0uMzQuOTg2LS40NDQgMS40ODgtLjI4bC4yOC4wOTJjLjQ5OC4xNjIuOTE4LjQ5OCAxLjE5Ni45NDZsLjI0LjQxNGMuMjc2LjQ3Ni4yNC45Ni0uMDg0IDEuNDA0bC0uMjguMzgyYy0uMTguMjQtLjI4OC41MTQtLjMzNi43OTJsLS4wMzQuNDE4Yy0uMDE0LjE4LS4wMTQuMzY0IDAgLjU0NGwuMDM0LjQxOGMuMDQ4LjI3OC4xNTYuNTUyLjMzNi43OTJsLjI4LjM4MmMuMzI0LjQ0NC4zNi45MjguMDg0IDEuNDA0bC0uMjQuNDE0Yy0uMjc4LjQ0OC0uNy43ODQtMS4xOTYuOTQ2bC0uMjguMDkyYy0uNTAyLjE2NC0xLjAwOC4wNi0xLjQ4OC0uMjhsLS4zMy0uMjM0YS43NS43NSAwIDAwLTEuMDAyLS4xOGwtLjI4LjEwNGMtLjI2OC4xLS41NDIuMTgtLjgyMi4yNGwtLjA2OC40MThjLS4wOS41NDItLjU2LTEuMDA3LTEuMTEtMS4yMjZsLS4yOC4xYy0uMzQuMTI0LS43MDItLjEyNC0xLjA0MiAwbC0uMjgtLjFjLS41NDgtLjIyLTEuMDItLjY4NC0xLjExLTEuMjI2bC0uMDY4LS40MThjLS4yOC0uMDYtLjU1NC0uMTQtLjgyMi0uMjRsLS4yOC0uMTA0YS43NS43NSAwIDAwLTEuMDAyLjE4bC0uMzMuMjM0Yy0uNDguMzQtLjk4Ni0uNDQ0LTEuNDg4LS4yOGwtLjI4LS4wOTJjLS40OTgtLjE2Mi0uOTE4LS40OTgtMS4xOTYtLjk0NmwtLjI0LS40MTRhMS4wNSAxLjA1IDAgMDEuMDg0LTEuNDA0bC4yOC0uMzgyYy4xOC0uMjQuMjg4LjUxNC4zMzYtLjc5MmwuMDM0LS40MThjLjAxNC0uMTguMDE0LS4zNjQgMC0uNTQ0bC0uMDM0LS40MThjLS4wNDgtLjI3OC0uMTU2LS41NTItLjMzNi0uNzkybC0uMjgtLjM4MmExLjA1IDEuMDUgMCAwMS0uMDg0LTEuNDA0bC4yNC0uNDE0Yy4yNzgtLjQ0OC43LS43ODQgMS4xOTYtLjk0NmwuMjgtLjA5MmMuNTAyLS4xNjQgMS4wMDguMDYgMS40ODguMjhsLjMzLjIzNGEuNzUuNzUgMCAwMDEuMDAyLjE4bC4yOC0uMTA0Yy4yNjgtLjEuNTQyLS4xOC44MjItLjI0bC4wNjgtLjQxOHpNMTIgNi43NWE1LjI1IDUuMjUgMCAxMDAgMTAuNSA1LjI1IDUuMjUgMCAwMDAtMTAuNXoiIH0pIH0pKTsKZXhwb3J0IGNvbnN0IEdpZnRJY29uID0gKHByb3BzKSA9PiAoX2pzeCgic3ZnIiwgeyB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgZmlsbDogIm5vbmUiLCB2aWV3Qm94OiAiMCAwIDI0IDI0Iiwgc3Ryb2tlV2lkdGg6IDEuNSwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgLi4ucHJvcHMsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk0xMi43NSAxNWwtMy43NS0zLjc1TTEyLjc1IDE1bDMuNzUtMy43NU0xMi43NSAxNVYzLjc1bTAgMTEuMjVMOSAxMS4yNW0zLjc1IDBMMTUgMTEuMjVNOSAxNWg2TTIxIDEyYTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAweiIgfSkgfSkpOwpleHBvcnQgY29uc3QgQ2FsY3VsYXRvckljb24gPSAocHJvcHMpID0+IChfanN4KCJzdmciLCB7IHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCBmaWxsOiAibm9uZSIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBzdHJva2VXaWR0aDogMS41LCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCAuLi5wcm9wcywgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTkgMTcuMjV2MS4wMDdhMyAzIDAgMDEtLjg3OSAyLjEyMkw3LjUgMjFoOWwtLjYyMS0uNjIxQTMgMyAwIDAxMTUgMTguMjU3VjE3LjI1bTYtMTJWMTVhMi4yNSAyLjI1IDAgMDEtMi4yNSAyLjI1SDUuMjVBMi4yNSAyLjI1IDAgMDEzIDE1VjUuMjVBMi4yNSAyLjI1IDAgMDE1LjI1IDNoNC41TTEyIDEyaC4wMDh2LjAwOEgxMlYxMnptMCA0aC4wMDh2LjAwOEgxMnYtNHptMC04aC4wMDh2LjAwOEgxMlY4em0tNCA0aC4wMDh2LjAwOEg4di00em00IDBoLjAwOHYuMDA4SDEydi00em0tNCA0aC4wMDh2LjAwOEg4di00em00IDBoLjAwOHYuMDA4SDEydi00em0tNC00aC4wMDh2LjAwOEg4Vjh6bTQgMGguMDA4di4wMDhIMTJWOHptNC00aC4wMDh2LjAwOEgxNlY0em0wIDRoLjAwOHYuMDA4SDE2Vjh6IiB9KSB9KSk7CmV4cG9ydCBjb25zdCBVc2VyUGx1c0ljb24gPSAocHJvcHMpID0+IChfanN4KCJzdmciLCB7IHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCBmaWxsOiAibm9uZSIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBzdHJva2VXaWR0aDogMS41LCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCAuLi5wcm9wcywgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTE5IDcuNXYzbTAgMHYzbTAtM2gzbS0zIDBoLTNtLTIuMjUtNC4xMjVhMy4zNzUgMy4zNzUgMCAxMS02Ljc1IDAgMy4zNzUgMy4zNzUgMCAwMTYuNzUgMHpNNCAxOS4yMzV2LS4xMWE2LjM3NSA2LjM3NSAwIDAxMTIuNzUgMHYuMTA5QTEyLjMxOCAxMi4zMTggMCAwMTEwLjUgMjFjLTIuMzA1IDAtNC40Ny0uNjEyLTYuMzc1LTEuNjY2eiIgfSkgfSkpOwpleHBvcnQgY29uc3QgUGF1c2VJY29uID0gKHByb3BzKSA9PiAoX2pzeCgic3ZnIiwgeyB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgZmlsbDogIm5vbmUiLCB2aWV3Qm94OiAiMCAwIDI0IDI0Iiwgc3Ryb2tlV2lkdGg6IDEuNSwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgLi4ucHJvcHMsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk0xNS43NSA1LjI1djEzLjVtLTcuNS0xMy41djEzLjUiIH0pIH0pKTsKZXhwb3J0IGNvbnN0IFBsYXlJY29uID0gKHByb3BzKSA9PiAoX2pzeCgic3ZnIiwgeyB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgZmlsbDogIm5vbmUiLCB2aWV3Qm94OiAiMCAwIDI0IDI0Iiwgc3Ryb2tlV2lkdGg6IDEuNSwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgLi4ucHJvcHMsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk01LjI1IDUuNjUzYzAtLjg1Ni45MTctMS4zOTggMS42NjctLjk4NmwxMS41NCA2LjM0OGExLjEyNSAxLjEyNSAwIDAxMCAxLjk3MWwtMTEuNTQgNi4zNDdhMS4xMjUgMS4xMjUgMCAwMS0xLjY2Ny0uOTg1VjUuNjUzeiIgfSkgfSkpOwpleHBvcnQgY29uc3QgU3VuSWNvbiA9IChwcm9wcykgPT4gKF9qc3goInN2ZyIsIHsgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsIGZpbGw6ICJub25lIiwgdmlld0JveDogIjAgMCAyNCAyNCIsIHN0cm9rZVdpZHRoOiAxLjUsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIC4uLnByb3BzLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNMTIgM3YyLjI1bTYuMzY0LjM4NmwtMS41OTEgMS41OTFNMjEgMTJoLTIuMjVtLS4zODYgNi4zNjRsLTEuNTkxLTEuNTkxTTEyIDE4Ljc1VjIxbS00Ljc3My00LjIyN2wtMS41OTEgMS41OTFNNS4yNSAxMkgzbTQuMjI3LTQuNzczTDUuNjM2IDUuNjM2TTE1Ljc1IDEyYTMuNzUgMy43NSAwIDExLTcuNSAwIDMuNzUgMy43NSAwIDAxNy41IDB6IiB9KSB9KSk7CmV4cG9ydCBjb25zdCBGYWNlRnJvd25JY29uID0gKHByb3BzKSA9PiAoX2pzeCgic3ZnIiwgeyB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgZmlsbDogIm5vbmUiLCB2aWV3Qm94OiAiMCAwIDI0IDI0Iiwgc3Ryb2tlV2lkdGg6IDEuNSwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgLi4ucHJvcHMsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk0xNS4xODIgMTYuMzE4QTQuNDg2IDQuNDg2IDAgMDAxMi4wMTYgMTVhNC40ODYgNC40ODYgMCAwMC0zLjE5OCAxLjMxOE0yMSAxMmE5IDkgMCAxMS0xOCAwIDkgOSAwIDAxMTggMHpNOS43NSA5Ljc1YzAgLjQxNC0uMTY4Ljc1LS4zNzUuNzVTOSAxMC4xNjQgOSA5Ljc1cy4xNjgtLjc1LjM3NS0uNzUuMzc1LjMzNi4zNzUuNzV6bTQuNSAwYzAgLjQxNC0uMTY4Ljc1LS4zNzUuNzVzLS4zNzUtLjMzNi0uMzc1LS43NS4xNjgtLjc1LjM3NS0uNzUuMzc1LjMzNi4zNzUuNzV6IiB9KSB9KSk7CmV4cG9ydCBjb25zdCBCdWlsZGluZ09mZmljZUljb24gPSAocHJvcHMpID0+IChfanN4KCJzdmciLCB7IHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCBmaWxsOiAibm9uZSIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBzdHJva2VXaWR0aDogMS41LCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCAuLi5wcm9wcywgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTMuNzUgMjFoMTYuNU00LjUgM2gxNU01LjI1IDN2MThtMTMuNS0xOHYxOE05IDYuNzVoMS41bS0xLjUgM2gxLjVtLTEuNSAzaDEuNW0zLTZoMS41bS0xLjUgM2gxLjVtLTEuNSAzaDEuNU02Ljc1IDIxdi0zLjM3NWMwLS42MjEuNTA0LTEuMTI1IDEuMTI1LTEuMTI1aDIuMjVjLjYyMSAwIDEuMTI1LjUwNCAxLjEyNSAxLjEyNVYyMW0zLjc1LTMuMzc1YzAtLjYyMS41MDQtMS4xMjUgMS4xMjUtMS4xMjVoMi4yNWMuNjIxIDAgMS4xMjUuNTA0IDEuMTI1IDEuMTI1VjIxIiB9KSB9KSk7CmV4cG9ydCBjb25zdCBDYWxlbmRhckRheXNJY29uID0gKHByb3BzKSA9PiAoX2pzeCgic3ZnIiwgeyB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgZmlsbDogIm5vbmUiLCB2aWV3Qm94OiAiMCAwIDI0IDI0Iiwgc3Ryb2tlV2lkdGg6IDEuNSwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgLi4ucHJvcHMsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk02Ljc1IDN2Mi4yNU0xNy4yNSAzdjIuMjVNMyAxOC43NVY3LjVhMi4yNSAyLjI1IDAgMDEyLjI1LTIuMjVoMTMuNUEyLjI1IDIuMjUgMCAwMTIxIDcuNXYxMS4yNW0tMTggMEEyLjI1IDIuMjUgMCAwMDUuMjUgMjFoMTMuNUEyLjI1IDIuMjUgMCAwMDIxIDE4Ljc1bS0xOCAwaDE4IiB9KSB9KSk7CmV4cG9ydCBjb25zdCBQcmVzZW50YXRpb25DaGFydEJhckljb24gPSAocHJvcHMpID0+IChfanN4KCJzdmciLCB7IHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCBmaWxsOiAibm9uZSIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBzdHJva2VXaWR0aDogMS41LCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCAuLi5wcm9wcywgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTcuNSAxNC4yNXYyLjI1bTMtNC41djQuNW0zLTYuNzV2Ni43NW0zLTl2OU02IDIwLjI1aDEyQTIuMjUgMi4yNSAwIDAwMjAuMjUgMThWNkEyLjI1IDIuMjUgMCAwMDE4IDMuNzVINkEyLjI1IDIuMjUgMCAwMDMuNzUgNnYxMkEyLjI1IDIuMjUgMCAwMDYgMjAuMjV6IiB9KSB9KSk7CmV4cG9ydCBjb25zdCBBZGp1c3RtZW50c0hvcml6b250YWxJY29uID0gKHByb3BzKSA9PiAoX2pzeCgic3ZnIiwgeyB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgZmlsbDogIm5vbmUiLCB2aWV3Qm94OiAiMCAwIDI0IDI0Iiwgc3Ryb2tlV2lkdGg6IDEuNSwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgLi4ucHJvcHMsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk0xMC41IDZoOS43NU0xMC41IDZhMS41IDEuNSAwIDExLTMgMG0zIDBhMS41IDEuNSAwIDEwLTMgME0zLjc1IDZINy41bTMgMTJoOS43NW0tOS43NSAwYTEuNSAxLjUgMCAwMS0zIDBtMyAwYTEuNSAxLjUgMCAwMC0zIDBtLTMuNzUgMGg5Ljc1bTktNmgzLjc1bS0zLjc1IDBhMS41IDEuNSAwIDAxLTMgMG0zIDBhMS41IDEuNSAwIDAwLTMgMG0tOS43NSAwaDkuNzUiIH0pIH0pKTsKZXhwb3J0IGNvbnN0IEJvb2tPcGVuSWNvbiA9IChwcm9wcykgPT4gKF9qc3goInN2ZyIsIHsgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsIGZpbGw6ICJub25lIiwgdmlld0JveDogIjAgMCAyNCAyNCIsIHN0cm9rZVdpZHRoOiAxLjUsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIC4uLnByb3BzLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNMTIgNi4wNDJBOC45NjcgOC45NjcgMCAwMDYgMy43NWMtMS4wNTIgMC0yLjA2Mi4xOC0zIC41MTJ2MTQuMjVBOC45ODcgOC45ODcgMCAwMTYgMThjMi4zMDUgMCA0LjQwOC44NjcgNiAyLjI5Mm0wLTE0LjI1YTguOTY2IDguOTY2IDAgMDE2LTIuMjkyYzEuMDUyIDAgMi4wNjIuMTggMyAuNTEydjE0LjI1QTguOTg3IDguOTg3IDAgMDAxOCAxOGE4Ljk2NyA4Ljk2NyAwIDAwLTYgMi4yOTJtMC0xNC4yNXYxNC4yNSIgfSkgfSkpOwpleHBvcnQgY29uc3QgWENpcmNsZUljb24gPSAocHJvcHMpID0+IChfanN4KCJzdmciLCB7IHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCBmaWxsOiAibm9uZSIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBzdHJva2VXaWR0aDogMS41LCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCAuLi5wcm9wcywgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTkuNzUgOS43NWw0LjUgNC41bTAtNC41bC00LjUgNC41TTIxIDEyYTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAweiIgfSkgfSkpOwpleHBvcnQgY29uc3QgWE1hcmtJY29uID0gKHByb3BzKSA9PiAoX2pzeCgic3ZnIiwgeyB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgZmlsbDogIm5vbmUiLCB2aWV3Qm94OiAiMCAwIDI0IDI0Iiwgc3Ryb2tlV2lkdGg6IDEuNSwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgLi4ucHJvcHMsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk02IDE4TDE4IDZNNiA2bDEyIDEyIiB9KSB9KSk7CmV4cG9ydCBjb25zdCBBcnJvd0Rvd25UcmF5SWNvbiA9IChwcm9wcykgPT4gKF9qc3goInN2ZyIsIHsgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsIGZpbGw6ICJub25lIiwgdmlld0JveDogIjAgMCAyNCAyNCIsIHN0cm9rZVdpZHRoOiAxLjUsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIC4uLnByb3BzLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNMyAxNi41djIuMjVBMi4yNSAyLjI1IDAgMDA1LjI1IDIxaDEzLjVBMi4yNSAyLjI1IDAgMDAyMSAxOC43NVYxNi41TTE2LjUgMTJMMTIgMTYuNW0wIDBMNy41IDEybTQuNSA0LjVWMyIgfSkgfSkpOwpleHBvcnQgY29uc3QgQXJyb3dVcFRyYXlJY29uID0gKHByb3BzKSA9PiAoX2pzeCgic3ZnIiwgeyB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgZmlsbDogIm5vbmUiLCB2aWV3Qm94OiAiMCAwIDI0IDI0Iiwgc3Ryb2tlV2lkdGg6IDEuNSwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgLi4ucHJvcHMsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk0zIDE2LjV2Mi4yNUEyLjI1IDIuMjUgMCAwMDUuMjUgMjFoMTMuNUEyLjI1IDIuMjUgMCAwMDIxIDE4Ljc1VjE2LjVtLTEzLjUtOUwxMiAzbTAgMGw0LjUgNC41TTEyIDN2MTMuNSIgfSkgfSkpOwo="}}</script>
<script type="module">
  const geminiUrl = window.location.origin + '/api-proxy';

  window.API_KEY = 'UNUSED_PLACEHOLDER_FOR_API_KEY';
  window.GEMINI_API_KEY = 'UNUSED_PLACEHOLDER_FOR_API_KEY';
  window.process = window.process || {};
  window.process.env = window.process.env || {};
  window.process.env.API_KEY = window.API_KEY;
  window.process.env.GEMINI_API_KEY = window.GEMINI_API_KEY;
</script>



  <script src="js/websocket-interceptor.js" defer=""></script>
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load' , () => {
    navigator.serviceWorker.register('./service-worker.js')
      .then(registration => {
        console.log('Service Worker registered successfully with scope:', registration.scope);
      })
      .catch(error => {
        console.error('Service Worker registration failed:', error);
      });
  });
} else {
  console.log('Service workers are not supported in this browser.');
}
</script>

    <meta charset="UTF-8">
    <link rel="icon" type="image/svg+xml" href="/vite.svg">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Systm pro Sledovn Zakzek</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'brand-primary': '#007BFF',
              'brand-secondary': '#6C757D',
              'brand-background': '#1a202c',
              'brand-surface': '#2d3748',
              'brand-text-primary': '#f7fafc',
              'brand-text-secondary': '#a0aec0',
            },
            animation: {
              'fade-in': 'fadeIn 0.5s ease-in-out',
              'slide-in': 'slideIn 0.5s ease-in-out',
            },
            keyframes: {
              fadeIn: {
                '0%': { opacity: 0 },
                '100%': { opacity: 1 },
              },
              slideIn: {
                '0%': { transform: 'translateY(20px)', opacity: 0 },
                '100%': { transform: 'translateY(0)', opacity: 1 },
              },
            },
          },
        },
      }
    </script>
  </head>
  <body class="bg-brand-background text-brand-text-primary">
    <div id="root"></div>
    <script type="module" src="index.tsx"></script>
  

<script type="module">import '@/index';</script>
</body></html>